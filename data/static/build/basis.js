(function(){(function(h){function K(b,g){for(var d in g)b[d]=g[d];return b}function a(b,g){for(var d in g)!1==d in b&&(b[d]=g[d]);return b}function p(b,g){var d={};if(!g)return K(d,b);for(var k=0,a;a=g[k++];)a in b&&(d[a]=b[a]);return d}function J(b,g,d){var k=[],a;for(a in b)k.push(g.call(d,a,b[a]));return k}function z(b){return null==b||void 0==b}function s(b){return b}function B(b){return function(){return b}}function r(){}function n(b,g){if(null!=b){var d=b.length;if("undefined"==typeof d||"[object Function]"==
L.call(b))return[b];g||(g=0);if(0<d-g){for(var k=[],a=0,t=g;t<d;)k[a++]=b[t++];return k}}return[]}function x(b,g,d){for(var k=[],a="function"==typeof g,t=0;t<b;t++)k[t]=a?g.call(d,t,k):g;return k}var G=h.document,F={_l10nIndex_:"basis>ui>calendar>day>fri<mon<sat<sun<thr<tue<wed<<day2>fri<mon<sat<sun<thr<tue<wed<<day3>fri<mon<sat<sun<thr<tue<wed<<month>apr<aug<dec<feb<jan<jul<jun<mar<may<nov<oct<sep<<monthShort>apr<aug<dec<feb<jan<jul<jun<mar<may<nov<oct<sep<<quarter<selected<today<<field>symbolsLeft<validator>currencyMustBeGreaterZero<currencyWrongFormat<emailWrongFormat<maxLengthError<minLengthError<numberWrongFormat<regExpWrongFormat<required<urlWrongFormat",
"0.css":"","0.tmpl":[[1,0,["element"],"div",[4,[["app-page__","unselected"]],0,"app-page"]]],"p.tmpl":[[1,0,["element"],"div",[4,0,0,"app-wizard-details-form"],[8,1,["childNodesHere"]],[1,0,0,"button",[6,"click","save"],[3,0,0,"Save"]]]],"1s.tmpl":[[1,0,["element"],"div",[4,[["","disabled",0]],0,"Basis-FormContent"]]],"1.tmpl":[[1,0,["element"],"div",[4,0,0,"app-layout"],[1,0,0,"h1",[3,0,0,"EventShot"]],[8,1,["tabs"]],[8,1,["pages"]]]],"2.tmpl":[[1,0,["element"],"div"]],"3.tmpl":[[1,0,["element"],
"span",[4,0,0,"tmp-tab"],[6,"click"],[3,1,["title"]]]],"4.tmpl":[[1,0,["element"],"div",[4,0,0,"app-welcome"],[1,0,0,"h2",[3,0,0,"Welcome page"]]]],"5.tmpl":[[1,0,["element"],"div",[4,0,0,"app-wizard"]]],"6.tmpl":[[1,0,["element"],"div",[4,[["app-wizard-page__","selected"],["app-wizard-page__","unselected"]],0,"app-wizard-page"],[8,1,["content"]]]],"1r.tmpl":[[1,1,["form","element"],"form",[4,[["","disabled",0]],0,"Basis-Form"],[2,[["method"],[0]],0,"method"],[2,[["action"],[0]],0,"action"],[2,[["target"],
[0]],0,"target"],[2,[["enctype"],[0]],0,"enctype"],[6,"submit","validate"],[1,0,["content","childNodesElement"],"div",[4,0,0,"Basis-FormContent"]]]],"1q.tmpl":[[1,0,["field","focus","element"],"input",[2,0,0,"type","file"],[4,0,0,"native-type-file"],[2,[["name"],[0]],0,"name"],[2,[["disabled"],[0]],0,"disabled"],[6,"change"]]],"1p.tmpl":[[1,0,["field","focus","childNodesElement","element"],"select",[4,[["","disabled",0],["","validity",1,["indeterminate","valid","invalid"]]],0,"Basis-Select indeterminate"],
[2,[["name"],[0]],0,"name"],[2,[["disabled"],[0]],0,"disabled"],[6,"change"],[6,"keyup"],[6,"keypress"],[6,"keydown"],[6,"focus"],[6,"blur"]]],"1o.tmpl":[[1,0,["field","focus","element"],"input",[2,0,0,"type","radio"],[4,0,0,"native-type-radio"],[2,[["name"],[0]],0,"name"],[2,[["value"],[0]],0,"value"],[2,[["disabled"],[0]],0,"disabled"],[2,[["checked"],[0]],0,"checked"],[6,"focus"],[6,"blur"],[6,"change"],[6,"keydown"],[6,"keyup"],[6,"keypress"]]],"1n.tmpl":[[1,0,["field","focus","element"],"input",
[2,0,0,"type","checkbox"],[4,0,0,"native-type-checkbox"],[2,[["checked"],[0]],0,"checked"],[2,[["value"],[0]],0,"value"],[2,[["readonly"],[0]],0,"readonly"],[2,[["disabled"],[0]],0,"disabled"],[6,"focus"],[6,"blur"],[6,"change"],[6,"keydown"],[6,"keyup"],[6,"keypress"]]],"7.tmpl":[[1,0,["element"],"div",[4,0,0,"app-eventlist"],[1,0,0,"h2",[3,0,0,"Your events"]],[1,0,0,"div",[1,0,0,"div",[4,0,0,"app-eventlist-item app-eventlist_new"],[6,"click","create"],[1,0,0,"div",[4,0,0,"app-eventlist_new-overlay"],
[1,0,0,"div",[4,0,0,"app-eventlist_new-overlay-icon"]]]],[8,1,["childNodesHere"]]]]],"8.tmpl":[[1,0,["element"],"div",[4,0,0,"app-eventlist-item"],[6,"click","showDetails"],[1,0,0,"div",[4,0,0,"app-eventlist-item_defcover"]],[8,1,["cover"]],[1,0,0,"div",[4,0,0,"app-eventlist-item_label"],[1,0,0,"div",[4,[["app-eventlist-item_title__","noTitle"]],0,"app-eventlist-item_title"],[3,1,["title"]]],[1,0,0,"div",[4,[["app-eventlist-item_dates__","noTitle"]],0,"app-eventlist-item_dates"],[3,1,["startDate"]],
[3,0,0," — "],[3,1,["endDate"]]]]]],"9.tmpl":[[1,0,["element"],"div",[4,0,0,"app-eventlist-item-cover"],[5,[[["url"],["url(",0,")"],"background-image"]],0]]],"a.tmpl":[[1,0,["element"],"div",[4,0,0,"app-event-entry"],[1,0,0,"img",[4,0,0,"app-event-entry_source-icon"],[2,[["sourceImage"],[0]],0,"src"],[2,0,0,"width","20"]],[1,0,0,"div",[4,0,0,"app-event-entry_content"],[8,1,["content"]]]]],"b.tmpl":[[1,0,["element"],"div",[4,0,0,"app-event-entry app-event-entry-text"],[1,0,0,"img",[4,0,0,"app-event-entry_source-icon"],
[2,[["sourceImage"],[0]],0,"src"],[2,0,0,"width","20"]],[1,0,0,"div",[4,0,0,"app-event-entry_content"],[3,1,["content"]]]],[3,0,0,"</div>"]],"c.tmpl":[[1,0,["element"],"div",[4,0,0,"app-event-entry app-event-entry-photo"],[1,0,0,"img",[4,0,0,"app-event-entry_source-icon"],[2,[["sourceImage"],[0]],0,"src"],[2,0,0,"width","20"]],[1,0,0,"div",[4,0,0,"app-event-entry_content"],[1,0,0,"div",[4,0,0,"app-event-entry-photo_photo-card"],[1,0,0,"img",[4,0,0,"app-event-entry-photo_image"],[2,[["url"],[0]],0,
"src"],[2,0,0,"height","100"]],[1,0,0,"div",[4,[["app-event-entry-photo_title__","title",0]],0,"app-event-entry-photo_title"],[3,1,["title"]]]]]],[3,0,0,"</div>"]],"d.tmpl":[[1,0,["element"],"div",[4,0,0,"app-event"],[1,0,0,"div",[4,0,0,"app-event_dates"],[3,0,0,"sdfdsf"]],[8,1,["title"]],[8,1,["description"]],[8,1,["entries"]],[8,1,["progress"]]]],"e.tmpl":[[1,0,["element"],"div",[4,0,0,"app-event-title"],[1,0,0,"input",[4,0,0,"app-event-title_input"],[2,0,0,"placeholder","Give a name for event"],
[2,[["title"],[0]],0,"value"],[6,"keyup","change"],[6,"change"],[6,"blur","change blur"],[6,"focus"]]]],"f.tmpl":[[1,0,["element"],"div",[4,0,0,"app-event_description"],[1,0,0,"textarea",[4,0,0,"app-event-description_input"],[2,0,0,"placeholder","Event description"],[2,[["description"],[0]],0,"value"]]]],"g.tmpl":[[1,0,["element"],"div",[4,[["app-event-entry-list__","visible"]],0,"app-event-entry-list"]]],"h.tmpl":[[1,0,["element"],"div",[4,[["app-event-progress__","visible"]],0,"app-event-progress"],
[1,0,0,"div",[4,0,0,"app-event-progress_box"],[1,0,0,"div",[4,0,0,"app-event-progress_fill"],[5,[[["progress"],[0,"%"],"width"]],0]]]]],"i.tmpl":[[1,0,["element"],"div",[4,0,0,"app-wizard-start"],[8,1,["dates"]],[8,1,["providers"]],[1,0,0,"button",[4,0,0,"app-wizard-start_create-button"],[6,"click","create"],[3,0,0,"Create"]]]],"1m.tmpl":[[1,0,["field","focus","element"],"textarea",[2,[["name"],[0]],0,"name"],[2,[["value"],[0]],0,"value"],[2,[["readonly"],[0]],0,"readonly"],[2,[["disabled"],[0]],
0,"disabled"],[2,[["placeholder"],[0]],0,"placeholder"],[6,"keydown"],[6,"keyup","keyup updateSymbolsLeft"],[6,"keypress"],[6,"focus"],[6,"blur"],[6,"change","change updateSymbolsLeft"],[6,"input","input updateSymbolsLeft"]]],"q.tmpl":[[1,0,["element"],"div",[4,0,0,"Basis-VerticalPanel"]]],"r.tmpl":[[1,0,["element"],"div",[4,0,0,"Basis-VerticalPanelStack"],[1,1,["ruller"],"div",[5,0,0,"position: absolute;visibility: hidden;top: -1000px;width: 10px;"]]]],"s.tmpl":[[1,0,["element"],"div",[4,[["popup-",
"orientation",0,"v-left-top v-right-top v-center-top v-left-center v-right-center v-center-center v-left-bottom v-right-bottom v-center-bottom h-left-top h-right-top h-center-top h-left-center h-right-center h-center-center h-left-bottom h-right-bottom h-center-bottom".split(" ")],["","anim:visible",2,["visible","hidden"]],["","selected",0],["","disabled",0]],0,"Basis-Popup hidden"],[1,0,["content","childNodesElement"],"div",[4,0,0,"Basis-Popup-Content"]]]],"t.tmpl":[[1,0,["element"],"div",[4,[["mode-",
"orientation",0,"v-left-top v-right-top v-center-top v-left-center v-right-center v-center-center v-left-bottom v-right-bottom v-center-bottom h-left-top h-right-top h-center-top h-left-center h-right-center h-center-center h-left-bottom h-right-bottom h-center-bottom".split(" ")],["","anim:visible",2,["visible","hidden"]],["","selected",0],["","disabled",0]],0,"Basis-Balloon hidden"],[6,"click"],[1,0,0,"div",[4,0,0,"Basis-Balloon-Canvas"],[1,0,0,"div",[4,0,0,"corner-left-top"]],[1,0,0,"div",[4,0,
0,"corner-right-top"]],[1,0,0,"div",[4,0,0,"side-top"]],[1,0,0,"div",[4,0,0,"side-left"]],[1,0,0,"div",[4,0,0,"side-right"]],[1,0,0,"div",[4,0,0,"content"]],[1,0,0,"div",[4,0,0,"corner-left-bottom"]],[1,0,0,"div",[4,0,0,"corner-right-bottom"]],[1,0,0,"div",[4,0,0,"side-bottom"]],[1,0,0,"div",[4,0,0,"tail"]]],[1,0,0,"div",[4,0,0,"Basis-Balloon-Layout"],[1,0,["content","childNodesElement"],"div",[4,0,0,"Basis-Balloon-Content"]]]]],"u.tmpl":[[1,0,["element"],"div",[2,0,0,"id","Basis-PopupStack"],[4,
[["","hasChildren",0]],0]]],"v.tmpl":[[1,0,["element"],"div",[4,[["","selected",0],["","disabled",0]],0,"Basis-Calendar"],[1,0,0,"div",[4,0,0,"Basis-Calendar-Header"],[1,1,["sectionTabs"],"div",[4,0,0,"Basis-Calendar-SectionTabs"]]],[1,0,0,"div",[4,0,0,"Basis-Calendar-Body"],[1,0,0,"span",[6,"click","movePrev"],[4,0,0,"Basis-Calendar-ButtonPrevPeriod"],[1,0,0,"span",[3,0,0,"‹"]],[1,0,0,"span",[4,0,0,"over"]]],[1,0,0,"span",[6,"click","moveNext"],[4,0,0,"Basis-Calendar-ButtonNextPeriod"],[1,0,0,"span",
[3,0,0,"›"]],[1,0,0,"span",[4,0,0,"over"]]],[1,0,["content","childNodesElement"],"div",[4,0,0,"Basis-Calendar-Content"]]],[1,0,0,"div",[4,0,0,"Basis-Calendar-Footer"],[1,0,0,"div",[4,0,0,"Basis-Calendar-Footer-Date"],[1,0,0,"span",[4,0,0,"Basis-Calendar-Footer-Label"],[3,"l10n:basis.ui.calendar.today",0],[3,0,0,":"]],[1,0,0,"span",[6,"click","selectToday"],[4,0,0,"Basis-Calendar-Footer-Value"],[3,1,["today"]]]]]]],"w.tmpl":[[1,0,["element"],"div",[4,[["Basis-Calendar-Section-","sectionName",0,"Month Year YearDecade Century YearQuarter Quarter".split(" ")],
["","selected",0],["","disabled",0]],0,"Basis-Calendar-Section"],[1,0,0,"div",[4,0,0,"Basis-Calendar-SectionTitle"],[3,1,["title"]]],[1,1,["childNodesElement"],"div",[4,0,0,"Basis-Calendar-SectionContent"]]],[1,1,["tabElement"],"div",[4,[["","selected",0]],0,"Basis-Calendar-SectionTab"],[6,"click","select"],[3,1,["tabTitle"]]]],"x.tmpl":[[1,0,["element"],"div",[4,[["","selected",0],["","disabled",0]],0,"Basis-Calendar-Section Basis-Calendar-Section-Month"],[1,0,0,"div",[4,0,0,"Basis-Calendar-SectionTitle"],
[3,1,["title"]],[3,0,0," "],[3,1,["year"]]],[1,0,["content","childNodesElement"],"div",[4,0,0,"Basis-Calendar-SectionContent"],[1,0,0,"div",[4,0,0,"Basis-Calendar-MonthWeekDays"],[1,0,0,"span",[4,0,0,"Basis-Calendar-MonthWeekDays-Day"],[3,"l10n:basis.ui.calendar.day2.mon",0]],[1,0,0,"span",[4,0,0,"Basis-Calendar-MonthWeekDays-Day"],[3,"l10n:basis.ui.calendar.day2.tue",0]],[1,0,0,"span",[4,0,0,"Basis-Calendar-MonthWeekDays-Day"],[3,"l10n:basis.ui.calendar.day2.wed",0]],[1,0,0,"span",[4,0,0,"Basis-Calendar-MonthWeekDays-Day"],
[3,"l10n:basis.ui.calendar.day2.thr",0]],[1,0,0,"span",[4,0,0,"Basis-Calendar-MonthWeekDays-Day"],[3,"l10n:basis.ui.calendar.day2.fri",0]],[1,0,0,"span",[4,0,0,"Basis-Calendar-MonthWeekDays-Day"],[3,"l10n:basis.ui.calendar.day2.sat",0]],[1,0,0,"span",[4,0,0,"Basis-Calendar-MonthWeekDays-Day"],[3,"l10n:basis.ui.calendar.day2.sun",0]]]]],[1,1,["tabElement"],"div",[4,[["","selected",0]],0,"Basis-Calendar-SectionTab"],[6,"click","select"],[3,1,["tabTitle"]]]],"y.tmpl":[[1,0,["element"],"a",[4,[["","nodePeriodName",
0,["day","month","year","decade","quarter"]],["","selected",0],["","disabled",0],["","before",0],["","after",0]],0,"Basis-Calendar-Node"],[6,"click"],[3,1,["title"]]]],"j.tmpl":[[1,0,["element"],"div",[4,[["popup-","orientation",0,"v-left-top v-right-top v-center-top v-left-center v-right-center v-center-center v-left-bottom v-right-bottom v-center-bottom h-left-top h-right-top h-center-top h-left-center h-right-center h-center-center h-left-bottom h-right-bottom h-center-bottom".split(" ")],["",
"anim:visible",2,["visible","hidden"]],["","selected",0],["","disabled",0]],0,"Basis-Popup hidden"],[1,0,["content","childNodesElement"],"div",[4,0,0,"Basis-Popup-Content"]],[2,0,0,"id","app-wizard-start-date-picker"]]],"k.tmpl":[[1,0,["element"],"div",[4,0,0,"app-wizard-start-dates"],[1,0,0,"h2",[3,0,0,"When event happend?"]],[1,0,0,"div",[4,0,0,"app-wizard-start-dates_date-buttons"],[1,0,0,"button",[4,0,0,"app-wizard-start-dates_date-button"],[6,"click","pickStartDate"],[3,1,["startDate"]]],[1,
0,0,"button",[4,0,0,"app-wizard-start-dates_date-button"],[6,"click","pickEndDate"],[3,1,["endDate"]]]]]],"1l.tmpl":[[1,0,["field","focus","element"],"input",[2,0,0,"type","password"],[4,0,0,"native-type-password"],[2,[["name"],[0]],0,"name"],[2,[["value"],[0]],0,"value"],[2,[["readonly"],[0]],0,"readonly"],[2,[["disabled"],[0]],0,"disabled"],[2,[["maxlength"],[0]],0,"maxlength"],[2,[["placeholder"],[0]],0,"placeholder"],[6,"keydown"],[6,"keyup"],[6,"keypress"],[6,"focus"],[6,"blur"],[6,"change"],
[6,"input"]]],"l.tmpl":[[1,0,["element"],"div",[4,0,0,"app-wizard-start-providers-list"],[1,0,0,"h2",[3,0,0,"Where did you post about?"]],[1,1,["childNodesElement"],"div",[4,0,0,"app-wizard-start-providers-list_content"]]]],"m.tmpl":[[1,0,["element"],"span",[4,[["app-wizard-start-providers-item__","unchecked"]],0,"app-wizard-start-providers-item"],[6,"click","toggle"],[1,0,0,"img",[4,0,0,"app-wizard-start-providers-item_image"],[2,[["imageUrl"],[0]],0,"src"]],[1,0,0,"div",[4,[["app-wizard-start-providers-item_title__",
"unchecked"]],0,"app-wizard-start-providers-item_title"],[3,1,["title"]]]]],"1k.tmpl":[[1,0,["field","focus","element"],"input",[2,0,0,"type","text"],[4,0,0,"native-type-text"],[2,[["name"],[0]],0,"name"],[2,[["value"],[0]],0,"value"],[2,[["readonly"],[0]],0,"readonly"],[2,[["disabled"],[0]],0,"disabled"],[2,[["maxlength"],[0]],0,"maxlength"],[2,[["autocomplete"],[0]],0,"autocomplete"],[2,[["placeholder"],[0]],0,"placeholder"],[6,"keydown"],[6,"keyup"],[6,"keypress"],[6,"focus"],[6,"blur"],[6,"change"],
[6,"input"]]],"n.tmpl":[[1,0,["element"],"div",[4,0,0,"app-wizard-start-local"],[1,0,0,"h2",[3,0,0,"Add your photos from desktop"]],[1,0,0,"div",[4,0,0,"app-wizard-start-local_drop-zone"],[3,0,0,"Drop your photos here or "],[1,0,0,"button",[3,0,0,"browse"]]]]],"o.tmpl":[[1,0,["element"],"div",[4,0,0,"app-wizard-details"],[8,1,["form"]]]],"1j.tmpl":[[1,1,["sampleContainer","element"],"div",[4,[["","disabled",0],["","focused",0],["Basis-Field__","validity",1,["indeterminate","valid","invalid"]]],0,
"Basis-Field Basis-Field__indeterminate Basis-MatchInput"],[2,[["error"],[0]],0,"title"],[1,0,0,"div",[4,0,0,"Basis-Field-Title"],[1,0,0,"label",[1,1,["title"],"span",[3,1,["titleText"]]]]],[1,1,["content"],"div",[4,0,0,"Basis-Field-Container"],[1,0,["field","focus"],"input",[2,0,0,"type","text"],[4,0,0,"native-type-text"],[2,[["name"],[0]],0,"name"],[2,[["value"],[0]],0,"value"],[2,[["readonly"],[0]],0,"readonly"],[2,[["disabled"],[0]],0,"disabled"],[2,[["maxlength"],[0]],0,"maxlength"],[2,[["autocomplete"],
[0]],0,"autocomplete"],[2,[["placeholder"],[0]],0,"placeholder"],[6,"keydown"],[6,"keyup"],[6,"keypress"],[6,"focus"],[6,"blur"],[6,"change"],[6,"input"]]],[8,1,["description"]],[8,1,["example"]]]],"z.tmpl":[[1,0,["element"],"span",[4,0,0,"Basis-Field-Sample"],[3,1,["example"]]]],"10.tmpl":[[1,0,["element"],"span",[4,0,0,"Basis-Field-Description"],[3,1,["description"]]]],"11.tmpl":[[1,0,["element"],"div",[4,0,0,"Basis-Field-LengthCounter"],[3,"l10n:basis.ui.field.symbolsLeft",0],[3,0,0,": "],[3,1,
["availChars"]]]],"12.tmpl":[[1,1,["sampleContainer","element"],"div",[4,[["","disabled",0],["","focused",0],["Basis-Field__","validity",1,["indeterminate","valid","invalid"]]],0,"Basis-Field Basis-Field__indeterminate"],[2,[["error"],[0]],0,"title"],[1,0,0,"div",[4,0,0,"Basis-Field-Title"],[1,0,0,"label",[1,1,["title"],"span",[3,1,["titleText"]]]]],[1,1,["content"],"div",[4,0,0,"Basis-Field-Container"],[8,1,["fieldPlace"]]],[8,1,["description"]],[8,1,["example"]]]],"13.tmpl":[[1,1,["sampleContainer",
"element"],"div",[4,[["","disabled",0],["","focused",0],["Basis-Field__","validity",1,["indeterminate","valid","invalid"]]],0,"Basis-Field Basis-Field__indeterminate"],[2,[["error"],[0]],0,"title"],[1,0,0,"div",[4,0,0,"Basis-Field-Title"],[1,0,0,"label",[1,1,["title"],"span",[3,1,["titleText"]]]]],[1,1,["content"],"div",[4,0,0,"Basis-Field-Container"],[1,0,["field","focus"],"input",[2,0,0,"type","file"],[4,0,0,"native-type-file"],[2,[["name"],[0]],0,"name"],[2,[["disabled"],[0]],0,"disabled"],[6,
"change"]]],[8,1,["description"]],[8,1,["example"]]]],"14.tmpl":[[1,1,["field","element"],"input",[2,0,0,"type","hidden"],[2,[["name"],[0]],0,"name"],[2,[["value"],[0]],0,"value"],[6,"change"]]],"15.tmpl":[[1,1,["sampleContainer","element"],"div",[4,[["","disabled",0],["","focused",0],["Basis-Field__","validity",1,["indeterminate","valid","invalid"]]],0,"Basis-Field Basis-Field__indeterminate"],[2,[["error"],[0]],0,"title"],[1,0,0,"div",[4,0,0,"Basis-Field-Title"],[1,0,0,"label",[1,1,["title"],"span",
[3,1,["titleText"]]]]],[1,1,["content"],"div",[4,0,0,"Basis-Field-Container"],[1,0,["field","focus"],"input",[2,0,0,"type","text"],[4,0,0,"native-type-text"],[2,[["name"],[0]],0,"name"],[2,[["value"],[0]],0,"value"],[2,[["readonly"],[0]],0,"readonly"],[2,[["disabled"],[0]],0,"disabled"],[2,[["maxlength"],[0]],0,"maxlength"],[2,[["autocomplete"],[0]],0,"autocomplete"],[2,[["placeholder"],[0]],0,"placeholder"],[6,"keydown"],[6,"keyup"],[6,"keypress"],[6,"focus"],[6,"blur"],[6,"change"],[6,"input"]]],
[8,1,["description"]],[8,1,["example"]]]],"16.tmpl":[[1,1,["sampleContainer","element"],"div",[4,[["","disabled",0],["","focused",0],["Basis-Field__","validity",1,["indeterminate","valid","invalid"]]],0,"Basis-Field Basis-Field__indeterminate"],[2,[["error"],[0]],0,"title"],[1,0,0,"div",[4,0,0,"Basis-Field-Title"],[1,0,0,"label",[1,1,["title"],"span",[3,1,["titleText"]]]]],[1,1,["content"],"div",[4,0,0,"Basis-Field-Container"],[1,0,["field","focus"],"input",[2,0,0,"type","password"],[4,0,0,"native-type-password"],
[2,[["name"],[0]],0,"name"],[2,[["value"],[0]],0,"value"],[2,[["readonly"],[0]],0,"readonly"],[2,[["disabled"],[0]],0,"disabled"],[2,[["maxlength"],[0]],0,"maxlength"],[2,[["placeholder"],[0]],0,"placeholder"],[6,"keydown"],[6,"keyup"],[6,"keypress"],[6,"focus"],[6,"blur"],[6,"change"],[6,"input"]]],[8,1,["description"]],[8,1,["example"]]]],"17.tmpl":[[1,1,["sampleContainer","element"],"div",[4,[["","disabled",0],["","focused",0],["Basis-Field__","validity",1,["indeterminate","valid","invalid"]]],
0,"Basis-Field Basis-Field__indeterminate"],[2,[["error"],[0]],0,"title"],[1,0,0,"div",[4,0,0,"Basis-Field-Title"],[1,0,0,"label",[1,1,["title"],"span",[3,1,["titleText"]]]]],[1,1,["content"],"div",[4,0,0,"Basis-Field-Container"],[1,0,["field","focus"],"textarea",[2,[["name"],[0]],0,"name"],[2,[["value"],[0]],0,"value"],[2,[["readonly"],[0]],0,"readonly"],[2,[["disabled"],[0]],0,"disabled"],[2,[["placeholder"],[0]],0,"placeholder"],[6,"keydown"],[6,"keyup","keyup updateSymbolsLeft"],[6,"keypress"],
[6,"focus"],[6,"blur"],[6,"change","change updateSymbolsLeft"],[6,"input","input updateSymbolsLeft"]],[8,1,["counter"]]],[8,1,["description"]],[8,1,["example"]]]],"18.tmpl":[[1,0,["element"],"div",[4,[["","disabled",0],["","validity",1,["indeterminate","valid","invalid"]]],0,"Basis-Field Basis-Field-Checkbox indeterminate"],[1,1,["content"],"div",[4,0,0,"Basis-Field-Container"],[1,0,0,"label",[1,0,["field","focus"],"input",[2,0,0,"type","checkbox"],[4,0,0,"native-type-checkbox"],[2,[["checked"],[0]],
0,"checked"],[2,[["value"],[0]],0,"value"],[2,[["readonly"],[0]],0,"readonly"],[2,[["disabled"],[0]],0,"disabled"],[6,"focus"],[6,"blur"],[6,"change"],[6,"keydown"],[6,"keyup"],[6,"keypress"]],[1,0,0,"span",[3,1,["titleText"]]]]]]],"19.tmpl":[[1,1,["sampleContainer","element"],"div",[4,[["","disabled",0],["","focused",0],["Basis-Field__","validity",1,["indeterminate","valid","invalid"]]],0,"Basis-Field Basis-Field__indeterminate Basis-Field-Label"],[2,[["error"],[0]],0,"title"],[1,0,0,"div",[4,0,
0,"Basis-Field-Title"],[1,0,0,"label",[1,1,["title"],"span",[3,1,["titleText"]]]]],[1,1,["content"],"div",[4,0,0,"Basis-Field-Container"],[1,1,["field"],"label",[3,1,["value"]]]],[8,1,["description"]],[8,1,["example"]]]],"1a.tmpl":[[1,1,["sampleContainer","element"],"div",[4,[["","disabled",0],["","focused",0],["Basis-Field__","validity",1,["indeterminate","valid","invalid"]]],0,"Basis-Field Basis-Field__indeterminate"],[2,[["error"],[0]],0,"title"],[1,0,0,"div",[4,0,0,"Basis-Field-Title"],[1,0,0,
"label",[1,1,["title"],"span",[3,1,["titleText"]]]]],[1,1,["content"],"div",[4,0,0,"Basis-Field-Container"],[1,0,["field","childNodesElement"],"div",[4,0,0,"Basis-RadioGroup"]]],[8,1,["description"]],[8,1,["example"]]]],"1b.tmpl":[[1,0,["element"],"label",[4,[["","selected",0],["","disabled",0]],0,"Basis-RadioGroup-Item"],[6,"click","select"],[1,0,["field","focus"],"input",[2,0,0,"type","radio"],[4,0,0,"native-type-radio"],[2,[["name"],[0]],0,"name"],[2,[["value"],[0]],0,"value"],[2,[["disabled"],
[0]],0,"disabled"],[2,[["checked"],[0]],0,"checked"],[6,"focus"],[6,"blur"],[6,"change"],[6,"keydown"],[6,"keyup"],[6,"keypress"]],[1,1,["content"],"span",[3,1,["title"]]]]],"1c.tmpl":[[1,1,["sampleContainer","element"],"div",[4,[["","disabled",0],["","focused",0],["Basis-Field__","validity",1,["indeterminate","valid","invalid"]]],0,"Basis-Field Basis-Field__indeterminate"],[2,[["error"],[0]],0,"title"],[1,0,0,"div",[4,0,0,"Basis-Field-Title"],[1,0,0,"label",[1,1,["title"],"span",[3,1,["titleText"]]]]],
[1,1,["content"],"div",[4,0,0,"Basis-Field-Container"],[1,0,["field","childNodesElement"],"div",[4,0,0,"Basis-CheckGroup"]]],[8,1,["description"]],[8,1,["example"]]]],"1d.tmpl":[[1,0,["element"],"label",[4,[["","selected",0],["","disabled",0]],0,"Basis-CheckGroup-Item"],[6,"click","select"],[1,0,["field","focus"],"input",[2,0,0,"type","checkbox"],[4,0,0,"native-type-checkbox"],[2,[["checked"],[0]],0,"checked"],[2,[["value"],[0]],0,"value"],[2,[["readonly"],[0]],0,"readonly"],[2,[["disabled"],[0]],
0,"disabled"],[6,"focus"],[6,"blur"],[6,"change"],[6,"keydown"],[6,"keyup"],[6,"keypress"]],[1,1,["content"],"span",[3,1,["title"]]]]],"1e.tmpl":[[1,1,["sampleContainer","element"],"div",[4,[["","disabled",0],["","focused",0],["Basis-Field__","validity",1,["indeterminate","valid","invalid"]]],0,"Basis-Field Basis-Field__indeterminate"],[2,[["error"],[0]],0,"title"],[1,0,0,"div",[4,0,0,"Basis-Field-Title"],[1,0,0,"label",[1,1,["title"],"span",[3,1,["titleText"]]]]],[1,1,["content"],"div",[4,0,0,"Basis-Field-Container"],
[1,0,["field","focus","childNodesElement"],"select",[4,[["","disabled",0],["","validity",1,["indeterminate","valid","invalid"]]],0,"Basis-Select indeterminate"],[2,[["name"],[0]],0,"name"],[2,[["disabled"],[0]],0,"disabled"],[6,"change"],[6,"keyup"],[6,"keypress"],[6,"keydown"],[6,"focus"],[6,"blur"]]],[8,1,["description"]],[8,1,["example"]]]],"1f.tmpl":[[1,1,["field","element"],"option",[4,0,0,"Basis-Select-Item"],[2,[["selected"],[0]],0,"selected"],[2,[["value"],[0]],0,"value"],[3,1,["title"]]]],
"1g.tmpl":[[1,1,["sampleContainer","element"],"div",[4,[["","disabled",0],["","focused",0],["Basis-Field__","validity",1,["indeterminate","valid","invalid"]]],0,"Basis-Field Basis-Field__indeterminate"],[2,[["error"],[0]],0,"title"],[1,0,0,"div",[4,0,0,"Basis-Field-Title"],[1,0,0,"label",[1,1,["title"],"span",[3,1,["titleText"]]]]],[1,"content",0,"div",[4,0,0,"Basis-Field-Container"],[1,0,["field","focus"],"span",[4,[["Basis-DropdownList-","opened",0],["","disabled",0]],0,"Basis-DropdownList"],[6,
"click","togglePopup"],[6,"keyup"],[6,"keydown"],[6,"keypressed"],[6,"focus"],[6,"blur"],[2,0,0,"tabindex","0"],[1,0,0,"span",[4,0,0,"Basis-DropdownList-Caption"],[8,1,["captionItem"]]],[1,0,0,"span",[4,0,0,"Basis-DropdownList-Trigger"]],[8,1,["hiddenField"]]],[1,0,["content","childNodesElement"],"div",[4,0,0,"Basis-DropdownList-PopupContent"]]],[8,1,["description"]],[8,1,["example"]]]],"1h.tmpl":[[1,0,["element"],"div",[4,[["","selected",0],["","disabled",0]],0,"Basis-Combobox-Item"],[6,"click",
"select"],[3,1,["title"]]]],"1i.tmpl":[[1,0,["element"],"div",[4,[["popup-","orientation",0,"v-left-top v-right-top v-center-top v-left-center v-right-center v-center-center v-left-bottom v-right-bottom v-center-bottom h-left-top h-right-top h-center-top h-left-center h-right-center h-center-center h-left-bottom h-right-bottom h-center-bottom".split(" ")],["","anim:visible",2,["visible","hidden"]],["","selected",0],["","disabled",0]],0,"Basis-Popup hidden Basis-DropdownList-Popup"],[1,0,["content",
"childNodesElement"],"div",[4,0,0,"Basis-Popup-Content"]]]],"6.js":function(b,g,d,k,a,t,f){function c(b){return null==b?b:String(b)}var v=d.entity.createType("Event",{id:d.entity.IntId,startDate:{type:String,defValue:function(){return"2013-09-01"}},endDate:{type:String,defValue:function(){return"2013-09-08"}},title:c,description:c,main_entry:"Entry",status:String,progress:Number,providers:{type:Array,defValue:function(){return app.type.Provider.all.getItems().filter(function(b){return b.data.enabled}).map(function(b){return b.data.id})}},
entries:d.entity.createSetType("Entry")});v.all.setSyncAction(app.service["default"].createAction({url:"/api/event",success:function(b){this.sync(d.array(b.events).map(v.reader))}}));v.extend({syncAction:app.service["default"].createAction({url:"/api/event/:id",request:function(){return{routerParams:{id:this.data.id}}},success:function(b){this.update(v.reader(b.event))}}),save:app.service["default"].createAction({method:"POST",request:function(){return!this.data.id?{url:"/api/event/create",params:{start_date:this.data.startDate,
end_date:this.data.endDate,providers:this.data.providers}}:{url:"/api/event/:id",routerParams:{id:this.data.id},params:d.object.slice(this.data,["title","description"])}},success:function(b){this.update(v.reader(b.event))}}),remove:app.service["default"].createAction({method:"POST",url:"/api/:id/remove",request:function(){return{routerParams:{id:this.data.id}}},success:function(b){this.destroy()}})});g.exports=v},"c.js":function(b,g,d,k,a,t,f){g.exports=new d.ui.form.FormContent({autoDelegate:!0,
template:d.template.get("#q"),childNodes:[{name:"title",title:"Title"},{name:"description",title:"Description"}],action:{save:function(){this.update(this.serialize());this.target.save()}}})},"0.js":function(b,g,d,k,a,t,f){g.exports=new d.ui.Node({template:d.template.get("#5"),binding:{},action:{}})},"9.js":function(b,g,d,k,a,t,f){var v=new d.ui.calendar.Calendar({maxDate:new Date,sections:["Month"],handler:{change:function(){"startDate"==v.dateType?e.update({startDate:d.date.format(this.selectedDate.value,
"%Y-%M-%D")}):e.update({endDate:d.date.format(this.selectedDate.value,"%Y-%M-%D")});c.hide()}}}),c=new d.ui.popup.Popup({template:d.template.get("#k"),dir:"bottom center top center",childNodes:[v]}),e=new d.ui.Node({autoDelegate:!0,template:d.template.get("#l"),binding:{startDate:"data:",endDate:"data:"},action:{pickStartDate:function(b){v.selectedDate.set(d.date.fromISOString(this.data.startDate));v.dateType="startDate";c.show(b.sender)},pickEndDate:function(b){v.selectedDate.set(d.date.fromISOString(this.data.endDate));
v.dateType="endDate";c.show(b.sender)}}});g.exports=e},"8.js":function(b,g,d,k,a,t,f){b=d.entity.createType("Provider",{id:d.entity.StringId,title:String,enabled:Boolean});b.all.sync([{id:"facebook",title:"Facebook",enabled:!0},{id:"instagram",title:"Instagram"},{id:"twitter",title:"Twitter",enabled:!0},{id:"foursquare",title:"Foursquare"}]);b.assets={facebook:"res/S9P1qHtsWyou0VhQNl7UUA.png",instagram:"res/5jmIgrt08XS4w3uQga33fw.png",twitter:"res/eeJAfI-8iZkLWmv0c_HMVQ.png",foursquare:"res/l5sxV1gmop93otZQ-MocqQ.png"};
g.exports=b},"7.js":function(b,g,d,k,a,t,f){b=d.entity.createType("Entry",{id:d.entity.IntId,source:String,type:String,data:function(b){return b||""}});g.exports=b},"b.js":function(b,g,d,k,a,t,f){g.exports=new d.ui.Node({template:d.template.get("#o"),binding:{},action:{}})},"5.js":function(b,g,d,k,a,t,f){g.exports=new d.ui.Node({autoDelegate:!0,template:d.template.get("#p"),binding:{form:d.resource("c.js").fetch()}})},"4.js":function(b,g,d,k,a,t,f){b=new d.ui.Node({autoDelegate:!0,template:d.template.get("#j"),
binding:{dates:d.resource("9.js").fetch(),providers:d.resource("a.js").fetch(),local:d.resource("b.js").fetch()},action:{create:function(){this.target.save()}}});g.exports=b},"3.js":function(b,g,d,k,a,t,f){var v="January February March April May June July August September October November December".split(" "),c=new d.ui.Node.subclass({template:d.template.get("#b"),binding:{source:"data:",sourceImage:{events:"update",getter:function(b){return app.type.Provider.assets[b.data.source]}},content:"data:data"}}),
e={text:c.subclass({template:d.template.get("#c"),binding:{}}),photo:c.subclass({template:d.template.get("#d"),binding:{url:"data:data.url",title:"data:data.title"}})},A=new d.ui.Node({active:!0,titleFocused:!1,descriptionFocused:!1,template:d.template.get("#e"),binding:{id:"data:",status:"data:",title:new d.ui.Node({autoDelegate:!0,template:d.template.get("#f"),binding:{title:{events:"update",getter:function(b){return b.data.title||""}},hasTitle:{events:"update",getter:function(b){return!!b.data.title}},
noTitle:{events:"update",getter:function(b){return!b.data.title}}}}),startDate:{events:"update",getter:function(b){b=d.date.fromISOString(b.data.startDate);return v[b.getMonth()-1]+" "+b.getDate()+", "+b.getFullYear()}},endDate:{events:"update",getter:function(b){b=d.date.fromISOString(b.data.endDate);return v[b.getMonth()-1]+" "+b.getDate()+", "+b.getFullYear()}},description:new d.ui.Node({autoDelegate:!0,template:d.template.get("#g"),binding:{description:{events:"update",getter:function(b){return b.data.description||
""}}}}),entries:new d.ui.Node({autoDelegate:!0,handler:{update:function(){this.setDataSource(this.data.entries)}},template:d.template.get("#h"),binding:{visible:{events:"update",getter:function(b){return"ready"==b.data.status}}},sorting:"data.id",childClass:c,childFactory:function(b){return new (e[b.delegate.data.type]||c)(b)}}),progress:new d.ui.Node({autoDelegate:!0,template:d.template.get("#i"),binding:{visible:{events:"update",getter:function(b){return"wait"==b.data.status||"progress"==b.data.status}},
progress:"data:"}})}});d.router.add("/event/:id",{match:function(b){A.setDelegate(app.type.Event(b))},leave:function(){A.setDelegate()}});g.exports=A},"2.js":function(b,g,d,k,a,t,f){var v="January February March April May June July August September October November December".split(" ");g.exports=new d.ui.Node({template:d.template.get("#8"),action:{create:function(){d.router.navigate("/add-event")}},dataSource:app.type.Event.all,active:!0,sorting:"data.id",sortingDesc:!0,childClass:{template:d.template.get("#9"),
binding:{title:"data:",hasTitle:{events:"update",getter:function(b){return!!b.data.title}},noTitle:{events:"update",getter:function(b){return!b.data.title}},startDate:{events:"update",getter:function(b){b=d.date.fromISOString(b.data.startDate);return v[b.getMonth()-1]+" "+b.getDate()+", "+b.getFullYear()}},endDate:{events:"update",getter:function(b){b=d.date.fromISOString(b.data.endDate);return v[b.getMonth()-1]+" "+b.getDate()+", "+b.getFullYear()}},cover:"satellite:"},action:{showDetails:function(){d.router.navigate("/event/"+
this.data.id)}},satelliteConfig:{cover:{existsIf:function(b){return b.data.main_entry},delegate:function(b){return b.data.main_entry},instanceOf:d.ui.Node.subclass({template:d.template.get("#a"),binding:{url:"data:data.photo"}})}}}})},"1.js":function(b,g,d,k,a,t,f){var v=new d.ui.Node({template:d.template.get("#6"),selection:!0,childClass:{autoDelegate:!0,template:d.template.get("#7"),binding:{content:"satellite:"},emit_select:function(){this.lazyContent&&(this.setSatellite("content",this.lazyContent.fetch()),
this.lazyContent=null);d.ui.Node.prototype.emit_select.call(this)}},childNodes:[{selected:!0,lazyContent:d.resource("4.js"),handler:{select:function(){this.tmpl&&(this.element.style.height="",this.element.style.opacity="")},unselect:function(){this.element.style.webkitTransition="none";this.element.style.height=this.element.clientHeight+"px";this.element.style.opacity=1;var b=this;d.nextTick(function(){b.element.style.webkitTransition="";b.element.style.height=0;b.element.style.opacity=0})}}},{lazyContent:d.resource("5.js"),
handler:{unselect:function(){this.tmpl&&(this.tmpl.element.style.height=0)},select:function(){this.element.style.webkitTransition="none";this.element.style.height=0;this.element.style.opacity=0;var b=this;d.nextTick(function(){b.element.style.webkitTransition="";b.element.style.height="";b.element.style.opacity=1})}}}],handler:{update:function(b,g){"id"in g&&this.data.id&&d.router.navigate("/event/"+this.data.id)}}});d.router.add("/add-event",{enter:function(b){v.setDelegate(app.type.Event({}))},
leave:function(){v.data.id?v.setDelegate():v.target.destroy()}});g.exports=v},"a.js":function(b,d,g,k,a,t,f){var v=new g.data.Value({value:[]});b=new g.ui.Node({autoDelegate:!0,dataSource:app.type.Provider.all,handler:{update:function(){v.set(this.data.providers)}},template:g.template.get("#m"),childClass:{checked:!1,template:g.template.get("#n"),binding:{id:"data:",imageUrl:{events:"update",getter:function(b){return app.type.Provider.assets[b.data.id]}},title:"data:",unchecked:v.compute("update",
function(b,g){return-1==g.indexOf(b.data.id)})},action:{toggle:function(){var b=g.array(v.value),d=b.indexOf(this.data.id);-1==d?b.push(this.data.id):b.splice(d,1);this.parentNode.update({providers:b})}}}});d.exports=b}},L=Object.prototype.toString,C=function(){function b(g){if(d.test(g)){var R=g.split("."),t=R[0],k=R[1],a=R[2];switch(R.length){case 1:g=function(b){return null!=b?b[t]:b};break;case 2:g=function(b){return null!=b?b[t][k]:b};break;case 3:g=function(b){return null!=b?b[t][k][a]:b};break;
default:g=function(b){if(null!=b){b=b[t][k][a];for(var g=3,d;d=R[g];g++)b=b[d]}return b}}return g}return new Function("object","return object != null ? object."+g+" : object")}var g=1,d=/^[a-z$_][a-z$_0-9]*(\.[a-z$_][a-z$_0-9]*)*$/i,k=[],a={},t={};return function(d,f){var v,c,e;if(!d||d===N)return N;"function"==typeof d?(e=d.basisGetterId_)?v=k[Math.abs(e)-1]:(v=function(b){return d(b)},v.base=d,v.__extend__=C,e=k.push(v),d.basisGetterId_=-e,v.basisGetterId_=e):(v=a[d])?e=v.basisGetterId_:(v=b(d),
v.base=d,v.__extend__=C,e=k.push(v),v.basisGetterId_=e,a[d]=v);c=null!=f&&typeof f;if(!c)return v;var A=t[e],q;if("string"==c)q=c+f;else if("function"==c)q=f.basisModId_;else if("object"!=c)return v;if(q&&A&&A[q])return A[q];"function"==typeof v.base&&(v=v.base);switch(c){case "string":c=function(b){return f.format(v(b))};break;case "function":q||(q=c+g++,f.basisModId_=q);c=function(b){return f(v(b))};break;default:c=function(b){return f[v(b)]}}c.base=v.base||v;c.__extend__=C;q&&(A||(A={},t[e]=A),
A[q]=c,c.mod=f,c.basisGetterId_=k.push(c));return c}}(),N=K(function(){},{__extend__:C}),H=function(){var b={log:r,info:r,warn:r,error:r};"undefined"!=typeof console&&J(b,function(d){b[d]="bind"in Function.prototype&&"function"==typeof console[d]?Function.prototype.bind.call(console[d],console):function(){Function.prototype.apply.call(console[d],console,arguments)}});return b}(),u=h.setImmediate||h.msSetImmediate,w=h.clearImmediate||h.msSetImmediate;u&&(u=u.bind(h));w&&(w=w.bind(h));u||function(){var b=
function(){var b={},g=1;u=function(){b[++g]={fn:arguments[0],args:n(arguments,1)};d(g);return g};w=function(d){delete b[d]};return function(d){var g=b[d];if(g)try{"function"==typeof g.fn?g.fn.apply(void 0,g.args):(h.execScript||function(b){h.eval.call(h,b)})(String(g.fn))}finally{delete b[d]}}}(),d=function(d){setTimeout(function(){b(d)},0)};if(h.process&&"function"==typeof process.nextTick)d=function(d){process.nextTick(function(){b(d)})};else if(h.MessageChannel)d=function(d){var g=new h.MessageChannel;
g.port1.onmessage=function(){b(d)};g.port2.postMessage("")};else{var g=h.postMessage&&!h.importScripts;if(g){var k=h.onmessage;h.onmessage=function(){g=!1};h.postMessage("","*");h.onmessage=k}g?(k=function(d){d&&d.source==h&&(d=String(d.data).split("basisjs.setImmediate")[1])&&b(d)},h.addEventListener?h.addEventListener("message",k,!0):h.attachEvent("onmessage",k),d=function(b){h.postMessage("basisjs.setImmediate"+b,"*")}):G&&"onreadystatechange"in createScript()&&(d=function(d){var g=createScript();
g.onreadystatechange=function(){b(d);g.onreadystatechange=null;g.parentNode.removeChild(g);g=null};G.documentElement.appendChild(g)})}}();var m="object"==typeof process&&"[object process]"==L.call(process),e=function(){var b="",d,g;if(m)g=p(require("path"),"normalize dirname extname basename resolve relative".split(" ")),d=g.resolve(".")+"/";else{var k=/^([^\/]+:|\/)/,a=/^([a-zA-Z0-9\-]+:)?\/\/[^\/]+/,t=/[\?#].*$/;g={normalize:function(b){var d=[];b=(b||"").replace(a,"").replace(t,"").split("/");
for(var g=0;g<b.length;g++)".."==b[g]?d.pop():(b[g]||!g)&&"."!=b[g]&&d.push(b[g]);return d.join("/")},dirname:function(b){return g.normalize(b).replace(/\/[^\/]*$/,"")},extname:function(b){return(b=g.normalize(b).match(/\.[^\\\/]*$/))?b[0]:""},basename:function(b,d){var R=g.normalize(b).match(/[^\\\/]*$/),R=R?R[0]:"";d==g.extname(R)&&(R=R.substring(0,R.length-d.length));return R},resolve:function(b,R){for(var t=n(arguments).reverse(),a=[],f=!1,v=0;!f&&v<t.length;v++)"string"==typeof t[v]&&(a.unshift(t[v]),
f=k.test(t[v]));f||a.unshift("/"==d?"":d);return g.normalize(a.join("/"))},relative:function(b,R){"string"!=typeof R&&(R=b,b=d);for(var t=g.normalize(R).split(/\//),k=g.normalize(b).split(/\//),a=0;t[a]==k[a]&&"string"==typeof k[a];)a++;for(var f="",k=k.length-a;0<k;k--)f+="../";return f+t.slice(a).join("/")}};d=location.pathname.replace(/[^\/]+$/,"");b=location.protocol+"//"+location.host}g.baseURI=d;g.origin=b;return g}(),c="",l=function(){var b="",d={extClass:!0};if(m)c=__filename,b=__dirname;
else for(var g=G.getElementsByTagName("script"),k=0,a;a=g[k];k++){var t=a.getAttributeNode("data-basis-config")||a.getAttributeNode("basis-config");if(t){try{K(d,Function("return{"+t.nodeValue+"}")()||{})}catch(f){}c=e.normalize(a.src);b=e.dirname(c);break}}d.path=K(d.path||{},{basis:b});b=d.autoload;d.autoload=!1;if(b&&(b=b.match(/^((?:[^\/]*\/)*)([a-z$_][a-z0-9$_]*)((?:\.[a-z$_][a-z0-9$_]*)*)$/i))&&"basis"!=b[2])d.autoload=b[2]+(b[3]||""),b[1]&&(d.path[b[2]]=b[1].replace(/\/$/,""));for(var v in d.path)d.path[v]=
e.resolve(d.path[v])+"/";return d}(),Q={},y=function(b,d){var g=h,k;b=b.split(".");for(var f=0,t;t=b[f];f++){if(!g[t]){var v=b.slice(0,f+1).join(".");g[t]=function(b,d){var g="function"==typeof d?d:null,t=function(d){return b+(d?"."+d:"")};t.toString=B(b);return K(function(){if(g)return g.apply(this,arguments)},{path:t,exports:{path:t},toString:B("[basis.namespace "+b+"]"),extend:function(b){K(this.exports,b);return a(this,b)},setWrapper:function(b){"function"==typeof b&&(g=b)}})}(v,f<b.length?d:
null);k&&(k.namespaces_[v]=g[t])}g=g[t];k||(k=g,k.namespaces_||(k.namespaces_={}))}return Q[b.join(".")]=g},A=function(){function b(g){return"function"==typeof g&&!!g.basisClassId_}function d(b){for(var g=this;g&&g!==b;)g=g.superClass_;return g===b}var g=function(){},k=1,a=1,t=function(){},f={},v=function(){for(var b in{toString:1})return!1;return!0}();K(g,{className:"basis.Class",extendConstructor_:!1,prototype:{constructor:null,init:t,postInit:t,toString:function(){return"[object "+(this.constructor||
this).className+"]"},destroy:function(){for(var b in this)this[b]=null;this.destroy=r}},create:function(t,v){var c=a++;"function"!=typeof t&&(t=g);var e=function(){};e.prototype=t.prototype;for(var e=new e,c={basisClassId_:c,superClass_:t,extendConstructor_:!!t.extendConstructor_,isSubclassOf:d,subclass:function(){return g.create.apply(null,[U].concat(n(arguments)))},extend:g.extend,__extend__:function(d){return d&&d!==f&&("object"==typeof d||"function"==typeof d&&!b(d))?g.create.call(null,U,d):d},
prototype:e},A=1,q;q=arguments[A];A++)c.extend(q);var U=c.extendConstructor_?function(b){this.basisObjectId=k++;var g,d;for(d in b)g=this[d],this[d]=g&&g.__extend__?g.__extend__(b[d]):b[d];this.init();this.postInit()}:function(){this.basisObjectId=k++;this.init.apply(this,arguments);this.postInit()};e.constructor=U;for(var l in e)e[l]===f&&(e[l]=U);K(U,c);return U},extend:function(g){var d=this.prototype;"function"==typeof g&&!b(g)&&(g=g(this.superClass_.prototype));g.prototype&&(g=g.prototype);for(var t in g){var k=
g[t],a=d[t];"className"==t||"extendConstructor_"==t?this[t]=k:d[t]=a&&a.__extend__?a.__extend__(k):k}if(v&&g[t="toString"]!==L)d[t]=g[t];return this}});var c=function(b,g,d){return{__extend__:function(b){if(!b||b&&b.__extend__)return b;var d=function(){};d.prototype=this;d=new d;g(d,b);return d}}.__extend__(b||{})},e=function(b){return c(b,K,"extensibleProperty")};return y("basis.Class",g.create).extend({SELF:f,BaseClass:g,create:g.create,isClass:b,customExtendProperty:c,extensibleProperty:e,nestedExtendProperty:function(b){return c(b,
function(b,g){for(var d in g){var t=b[d];b[d]=t&&t.__extend__?t.__extend__(g[d]):e(g[d])}},"nestedExtendProperty")},oneFunctionProperty:function(b,g){var d=function(g){var t;if(g){if(g.__extend__)return g;t={__extend__:d};for(var k in g)g[k]&&(t[k]=b)}return t};return d(g||{})}})}(),D=A(null,{className:"basis.Token",value:null,handler:null,deferredToken:null,bindingBridge:{attach:function(b,g,d){return b.attach(g,d)},detach:function(b,g,d){return b.detach(g,d)},get:function(b){return b.get()}},init:function(b){this.value=
b},get:function(){return this.value},set:function(b){this.value!==b&&(this.value=b,this.apply())},attach:function(b,g){this.handler={fn:b,context:g,handler:this.handler}},detach:function(b,g){for(var d=this,k;k=d,d=d.handler;)if(d.fn===b&&d.context===g){d.fn=r;k.handler=d.handler;break}},apply:function(){for(var b=this.get(),g=this;g=g.handler;)g.fn.call(g.context,b)},deferred:function(){var b=this.deferredToken;b||(b=this.deferredToken=new v.DeferredToken(this.value),this.attach(b.set,b));return b},
destroy:function(){this.deferredToken&&(this.deferredToken.destroy(),this.deferredToken=null);this.value=this.handler=null}}),I=function(){function b(){var k=g;g={};d=null;for(var a in k)k[a].apply()}var g={},d;return function(k){k.basisObjectId in g||(g[k.basisObjectId]=k,d||u(b))}}(),f=D.subclass({set:function(b){this.value!==b&&(this.value=b,I(this))},deferred:function(){return this}}),q={},E={};(function(){if(F)for(var b in F)E[e.resolve(b)]=F[b];F=null})();var P=function(b,g){if(g||!E.hasOwnProperty(b)){var d=
"";if(m)try{d=require("fs").readFileSync(b,"utf-8")}catch(k){}else{var a=new XMLHttpRequest;a.open("GET",b,!1);a.setRequestHeader("If-Modified-Since",(new Date(0)).toGMTString());a.setRequestHeader("X-Basis-Resource",1);a.send("");200<=a.status&&400>a.status&&(d=a.responseText)}E[b]=d}return E[b]},M=function(b){b=e.resolve(b);if(!q[b]){var g=M.extensions[e.extname(b)],d=!1,k=!1,a,t=function(){if(d)return a;var f=P(b);g?k||(k=!0,a=g(f,b)):a=f;d=!0;t.apply();return a};K(t,K(new D,{url:b,fetch:function(){return t()},
toString:function(){return"[basis.resource "+b+"]"},update:function(f){f=String(f);if(!d||f!=E[b]){E[b]=f;if(g){if(!k||!g.updatable)return;a=g(f,b)}else a=f;d=!0;t.apply()}},reload:function(){var g=E[b],k=P(b,!0);k!=g&&(d=!1,t.update(k))},get:function(g){return g?P(b):t()},ready:function(b,k){if(d&&(b.call(k,t()),g&&!g.updatable))return;t.attach(b,k);return t}}));q[b]=t}return q[b]};K(M,{getFiles:function(){var b=[],g;for(g in q)b.push(e.relative(g));return b},getSource:function(b){return P(e.resolve(b))},
exists:function(b){return!!q.hasOwnProperty(e.resolve(b))},extensions:{".js":function(b,g){return O({exports:{}},g,b).exports},".json":K(function(b,g){if("object"==typeof b)return b;var d;try{d=JSON.parse(String(b))}catch(k){}return d||null},{updatable:!0})}});var O=function(b,g,d){var k=e.dirname(g)+"/",a=d;b.exports||(b.exports={});if("function"!=typeof a)try{a=new Function("exports, module, basis, global, __filename, __dirname, resource","//@ sourceURL="+e.origin+g+"\n//# sourceURL="+e.origin+
g+'\n"use strict";\n\n'+d)}catch(t){return v.dev.error("Compilation error at "+g+("line"in t?":"+(t.line-4):"")+": "+t),b}a.call(b.exports,b.exports,b,v,h,g,k,function(b){return M(k+b)});return b},k=function(){if(m){var b=e.dirname(module.filename)+"/",g=module.constructor.prototype;return function(d){var t=g._compile,k=y(d);g._compile=function(b,g){this.basis=v;t.call(K(this,k),'var basis = module.basis;\nvar resource = function(filename){ return basis.require(__dirname + "/" + filename) };\n'+b,
g)};d=require(b+d.replace(/\./g,"/"));k.exports=d;a(k,d);g._compile=t;return d}}var d=l.path,k={};return function(b){if(/[^a-z0-9_\.]/i.test(b))throw 1;var g=b.replace(/\./g,"/")+".js",f=b.split(".")[0];f==b&&(d[f]=d[b]||e.baseURI);if(!Q[b]){f=d[f];if(!/^\//.test(f))throw 2;if(k[b])throw 3;k[b]=!0;g=f+g;b=y(b);f=P(g);O(b,g,f);a(b,b.exports)}}}();a(Function.prototype,{bind:function(b){var g=this,d=n(arguments,1);return d.length?function(){return g.apply(b,d.concat.apply(d,arguments))}:function(){return g.apply(b,
arguments)}}});a(Array,{isArray:function(b){return"[object Array]"===L.call(b)}});a(Array.prototype,{indexOf:function(b,g){g=parseInt(g,10)||0;if(0>g)return-1;for(;g<this.length;g++)if(this[g]===b)return g;return-1},lastIndexOf:function(b,g){var d=this.length;g=parseInt(g,10);for(g=isNaN(g)||g>=d?d-1:(g+d)%d;0<=g;g--)if(this[g]===b)return g;return-1},forEach:function(b,g){for(var d=0,k=this.length;d<k;d++)d in this&&b.call(g,this[d],d,this)},every:function(b,g){for(var d=0,k=this.length;d<k;d++)if(d in
this&&!b.call(g,this[d],d,this))return!1;return!0},some:function(b,g){for(var d=0,k=this.length;d<k;d++)if(d in this&&b.call(g,this[d],d,this))return!0;return!1},filter:function(b,g){for(var d=[],k=0,a=this.length;k<a;k++)k in this&&b.call(g,this[k],k,this)&&d.push(this[k]);return d},map:function(b,g){for(var d=[],k=0,a=this.length;k<a;k++)k in this&&(d[k]=b.call(g,this[k],k,this));return d},reduce:function(b,g){var d=this.length,k=arguments.length;if(0==d&&1==k)throw 4;var a,t=0;1<k&&(a=g,t=1);for(k=
0;k<d;k++)k in this&&(a=t++?b.call(null,a,this[k],k,this):this[k]);return a}});K(Array.prototype,{flatten:function(){return this.concat.apply([],this)},repeat:function(b){return x(parseInt(b,10)||0,this).flatten()},item:function(b){b=parseInt(b||0,10);return this[0<=b?b:this.length+b]},search:function(b,g,d){Array.lastSearchIndex=-1;g=C(g||s);d=parseInt(d,10)||0;for(var k=this.length;d<k;d++)if(g(this[d])===b)return this[Array.lastSearchIndex=d]},lastSearch:function(b,g,d){Array.lastSearchIndex=-1;
g=C(g||s);var k=this.length;d=isNaN(d)||null==d?k:parseInt(d,10);for(k=d>k?k:d;0<k--;)if(g(this[k])===b)return this[Array.lastSearchIndex=k]},binarySearchPos:function(b,g,d,k,a,t){if(!this.length)return k?-1:0;g=C(g||s);d=!!d;var f;a=isNaN(a)?0:a;var v=isNaN(t)?this.length-1:t;do if(t=a+v>>1,f=g(this[t]),d?b>f:b<f)v=t-1;else if(d?b<f:b>f)a=t+1;else return b==f?t:k?-1:0;while(a<=v);return k?-1:t+(f<b^d)},binarySearch:function(b,g){return this.binarySearchPos(b,g,!1,!0)},add:function(b){return-1==this.indexOf(b)&&
!!this.push(b)},remove:function(b){b=this.indexOf(b);return-1!=b&&!!this.splice(b,1)},has:function(b){return-1!=this.indexOf(b)},merge:function(b){return this.reduce(K,b||{})},sortAsObject:function(b,g,d){b=C(b);d=d?-1:1;return this.map(function(g,d){return{i:d,v:b(g)}}).sort(g||function(b,g){return d*(b.v>g.v||-(b.v<g.v)||(b.i>g.i?1:-1))}).map(function(b){return this[b.i]},this)},set:function(b){this!==b&&(this.length=0,this.push.apply(this,b));return this},clear:function(){this.length=0;return this}});
if(![1,2].splice(1).length){var U=Array.prototype.splice;Array.prototype.splice=function(){var b=n(arguments);2>b.length&&(b[1]=this.length);return U.apply(this,b)}}var X={"<":">","[":"]","(":")","{":"}","«":"»"},W=/([\/\\\(\)\[\]\?\{\}\|\*\+\-\.\^\$])/g,S=/\{([a-z\d_]+)(?::([\.0])(\d+)|:(\?))?\}/gi,T={};a(String,{toLowerCase:function(b){return String(b).toLowerCase()},toUpperCase:function(b){return String(b).toUpperCase()},trim:function(b){return String(b).trim()},trimLeft:function(b){return String(b).trimLeft()},
trimRight:function(b){return String(b).trimRight()}});a(String.prototype,{trimLeft:function(){return this.replace(/^\s+/,"")},trimRight:function(){return this.replace(/\s+$/,"")},trim:function(){return this.trimLeft().trimRight()}});K(String.prototype,{toObject:function(b){try{return(new Function("return 0,"+this))()}catch(g){if(b)throw 5;}},toArray:"a".hasOwnProperty("0")?function(){return n(this)}:function(){for(var b=[],g=this.length,d=0;d<g;d++)b[d]=this.charAt(d);return b},repeat:function(b){return Array(parseInt(b,
10)+1||0).join(this)},qw:function(){var b=this.trim();return b?b.split(/\s+/):[]},forRegExp:function(){return this.replace(W,"\\$1")},format:function(b){var g=arguments;"object"==typeof b&&K(g,b);return this.replace(S,function(b,d,k,t,a){b=d in g?g[d]:a?"":b;return k&&!isNaN(b)?(b=Number(b),"."==k?b.toFixed(t):b.lead(t)):b})},quote:function(b,g){b=b||'"';g=g||X[b]||b;var d=(1==b.length?b:"")+(1==g.length?g:"");return b+(d?this.replace(T[d]||(T[d]=RegExp("["+d.forRegExp()+"]","g")),"\\$&"):this)+g},
capitalize:function(){return this.charAt(0).toUpperCase()+this.substr(1).toLowerCase()},camelize:function(){return this.replace(/-(.)/g,function(b,g){return g.toUpperCase()})},dasherize:function(){return this.replace(/[A-Z]/g,function(b){return"-"+b.toLowerCase()})}});11!="|||".split(/\|/).length+"|||".split(/(\|)/).length&&(String.prototype.split=function(b,g){if(""==b||b&&""==b.source)return this.toArray();var d=[],k=0,a;if(b instanceof RegExp)for(b.global||(b=RegExp(b.source,/\/([mi]*)$/.exec(b)[1]+
"g"));a=b.exec(this);)a[0]=this.substring(k,a.index),d.push.apply(d,a),k=b.lastIndex;else for(;-1!=(a=this.indexOf(b,k));)d.push(this.substring(k,a)),k=a+b.length;d.push(this.substr(k));return d});if("2"!="12".substr(-1)){var g=String.prototype.substr;String.prototype.substr=function(b,d){return g.call(this,0>b?Math.max(0,this.length+b):b,d)}}K(Number.prototype,{fit:function(b,g){return!isNaN(b)&&this<b?Number(b):!isNaN(g)&&this>g?Number(g):this},between:function(b,g){return!isNaN(this)&&this>=b&&
this<=g},quote:function(b,g){return(this+"").quote(b,g)},toHex:function(){return parseInt(this,10).toString(16).toUpperCase()},sign:function(){return 0>this?-1:+(0<this)},base:function(b){return!b||isNaN(b)?0:Math.floor(this/b)*b},lead:function(b,g){return(this+"").replace(/\d+/,function(d){return 1<(b-=d.length-1)?Array(b).join(g||0)+d:d})},group:function(b,g){return(this+"").replace(/\d+/,function(d){return d.replace(/\d/g,function(k,a){return!a+(d.length-a)%(b||3)?k:(g||" ")+k})})},format:function(b,
g,d,k,a){b=this.toFixed(b);if(g||a)b=b.replace(/(\d+)(\.?)/,function(b,d,k){return(g?Number(d).group(3,g):d)+(k?a||k:"")});d&&(b=b.replace(/^-?/,"$&"+(d||"")));return b+(k||"")}});a(Date,{now:function(){return+new Date}});1900>(new Date).getYear()&&K(Date.prototype,{getYear:function(){return this.getFullYear()-1900},setYear:function(b){return this.setFullYear(!isNaN(b)&&100>b?Number(b)+1900:b)}});var d=function(){function b(){if("complete"==G.readyState&&!d++)for(;k;)k.callback.call(k.context),k=
k.next}function g(){try{G.documentElement.doScroll("left"),b()}catch(d){setTimeout(g,1)}}var d=!G||"complete"==G.readyState,k;if(!d)if(G.addEventListener)G.addEventListener("DOMContentLoaded",b,!1),h.addEventListener("load",b,!1);else{G.attachEvent("onreadystatechange",b);h.attachEvent("onload",b);try{!h.frameElement&&G.documentElement.doScroll&&g()}catch(a){}}return function(b,g){d?b.call(g):k={callback:b,context:g,next:k}}}(),b=function(){function b(k){d.globalDestroy=!0;d.add=r;for(d.remove=r;k=
g.pop();)if("function"==typeof k.destroy)try{k.destroy()}catch(a){}else for(var t in k)k[t]=null;g.clear()}var g=[];if("attachEvent"in h)h.attachEvent("onunload",b);else if("addEventListener"in h)h.addEventListener("unload",b,!1);else return{add:r,remove:r};var d={add:function(b){null!=b&&g.push(b)},remove:function(b){g.remove(b)}};return d}(),v=y("basis").extend({filename_:c,NODE_ENV:m,config:l,platformFeature:{},namespace:y,require:k,resource:M,asset:function(b){return b},getter:C,ready:d,setImmediate:u,
clearImmediate:w,nextTick:function(){u.apply(null,arguments)},Class:A,Token:D,DeferredToken:f,cleaner:b,console:H,object:{extend:K,complete:a,keys:function(b){var g=[],d;for(d in b)g.push(d);return g},values:function(b){var g=[],d;for(d in b)g.push(b[d]);return g},slice:p,splice:function(b,g){var d={};if(!g)return K(d,b);for(var k=0,a;a=g[k++];)a in b&&(d[a]=b[a],delete b[a]);return d},merge:function(){return n(arguments).reduce(K,{})},iterate:J,coalesce:function(){for(var b=0;b<arguments.length;b++)if(null!=
arguments[b])return arguments[b]}},fn:{$undefined:function(b){return void 0==b},$defined:function(b){return void 0!=b},$isNull:z,$isNotNull:function(b){return null!=b&&void 0!=b},$isSame:function(b){return b===this},$isNotSame:function(b){return b!==this},$self:s,$const:B,$false:function(){return!1},$true:function(){return!0},$null:function(){return null},$undef:r,getter:C,nullGetter:N,def:function(b,g,d){d=d||z;return function(k){k=b(k);return d(k)?g:k}},wrapper:function(b){return function(g){var d=
{};d[b]=g;return d}},lazyInit:function(b,g){var d=0,k,a;return k=function(){d++||(k.inited=!0,k.data=a=b.apply(g||this,arguments));return a}},lazyInitAndRun:function(b,g,d){var k=0,a,t;return a=function(){k++||(a.inited=!0,a.data=t=b.call(d||this));g.apply(t,arguments);return t}},runOnce:function(b,g){var d=0;return function(){if(!d++)return b.apply(g||this,arguments)}},body:function(b){return b.toString().replace(/^\s*\(?\s*function[^(]*\([^\)]*\)[^{]*\{|\}\s*\)?\s*$/g,"")}},array:K(n,{from:n,create:x}),
string:{entity:{laquo:"«",raquo:"»",nbsp:" ",quot:'"',quote:'"',copy:"©",shy:"­",para:"¶",sect:"§",deg:"°",mdash:"—",hellip:"…"},isEmpty:function(b){return null==b||""==String(b)},isNotEmpty:function(b){return null!=b&&""!=String(b)},format:String.prototype.format},bool:{invert:function(b){return!b}}});y("basis.dev").extend(H);v.path=e;l.extClass&&(K(Object,v.object),K(Function,v.fn),K(Array,v.array),K(String,v.string));l.autoload&&k(l.autoload)})(this);[["basis.app",function(h,K,a,p,J,z,s){function B(a){r.title=
a}var r=p.document||{title:"unknown"},n=r.title,x=a.fn.$undef,G,F,L=a.fn.lazyInit(function(h){var p={setTitle:function(w){w!=n&&(n instanceof a.Token&&n.detach(B),w instanceof a.Token?(w.attach(B),B(w.get())):B(w),n=w)},setElement:function(a){a="string"==typeof a?r.getElementById(a):a;F!=a&&(F?F.parentNode.replaceChild(a,F):(F=a,G||(G={type:"container",node:r.body}),(a="string"==typeof G.node?r.getElementById(G.node):G.node)&&("container"==G.type?a.appendChild(F):a.parentNode.replaceChild(F,a))))}},
H;for(H in h){var u=h[H];switch(H){case "title":p.setTitle(u);break;case "container":G={type:"insert",node:u};break;case "replace":G={type:"replace",node:u};break;case "element":F=u;break;case "init":x="function"==typeof u?u:x}}a.ready(function(){var a=F,m=x.call(p);m&&(a=m.element?m.element:m);F=null;p.setElement(a)});return p});K.setWrapper(function(){return L.apply(this,arguments)});K.exports={create:L}}],["basis.timer",function(h,K,a,p,J,z,s){var B=a.cleaner,r=a.getter,n=a.setImmediate,x=a.clearImmediate;
p.setImmediate||(p.setImmediate=n,p.clearImmediate=x);p.nativeSetTimeout_=p.setTimeout;p.nativeClearTimeout_=p.clearTimeout;p.setTimeout=function(a,h){return isNaN(h)||0>=h?"basisjs.setImmediate"+n(a):p.nativeSetTimeout_(a,h)};p.clearTimeout=function(a){var h=String(a).split("basisjs.setImmediate")[1];return h?x(h):p.nativeClearTimeout_(a)};h=function(){function a(){if(!e)if(H.length){var c=Date.now(),l=Math.max(H[0].eventTime,c);l<w&&(clearTimeout(m),m=setTimeout(n,(w=l)-c))}else m=clearTimeout(m),
w=C}function h(c,e){var m=c.basisObjectId,y=u[e]&&u[e][m];y&&(H.remove(y),delete u[e][m],a())}function n(){var c=Date.now(),c=H.binarySearchPos(c+15,x);e=!0;H.splice(0,c).forEach(function(a){delete u[a.eventName][a.object.basisObjectId];a.callback.call(a.object)});e=!1;w=C;a()}var C=2E12,x=r("eventTime"),H=[],u={},w=C,m=null,e=!1;B.add({destroy:function(){e=!0;clearTimeout(m);H.length=0;u=null}});return{add:function(c,e,m){var y=c.basisObjectId,A=u[e];A||(A=u[e]={});var D=A[y];if(D){if(isNaN(m)){h(c,
e);return}if(D.eventTime==m)return;H.remove(D);D.eventTime=m}else{if(isNaN(m))return;D=A[y]={eventName:e,object:c,eventTime:m,callback:c[e]}}H.splice(H.binarySearchPos(m,x),0,D);a()},remove:h}}();K.exports={nextTick:a.nextTick,setImmediate:n,clearImmediate:x,add:h.add,remove:h.remove};K.exports.TimeEventManager=h}],["basis.l10n",function(h,K,a,p,J,z,s){function B(a){1<arguments.length&&(a=L(arguments).join("."));if("#"==a.charAt(0))return C[parseInt(a.substr(1),36)];var c=a.lastIndexOf(".");return n(a.substr(0,
c),!0).getToken(a.substr(c+1))}function r(a){return function(c){for(var e=0,f;f=a[e++];)if(f=this.getCultureValue(f,c))return f;return this.getCultureValue("base",c)}}function n(a,c){var e=u[a];!e&&c&&(e=u[a]=new m(a));return e}function x(a,c,e){n(a,!0).update(c,e)}function G(a,c,e){if(a)if(Array.isArray(a)){e=0;for(var f,q,E=0;E<a.length;E++,e++)q=a[E],"number"==typeof q?e+=q:(f=C[e])&&f.dictionary.setCultureValue(c,f.name,q)}else if(e)a[e]&&x(e,c,a[e]);else for(e in a)x(e,c,a[e])}function F(e,l){function m(f){if("base"!=
f&&(!c||-1!=c.indexOf(f))&&e.location){var q=e.location+"/"+f,l=a.resource(q+".json");H[q]||(H[q]=!0,l.attach(function(a){G(a,f)}));G(l(),f,e.name)}}if(Q[l])for(var f=0,q;q=Q[l][f];f++)m(q);m(l)}h=this.path;p=a.Class;var L=a.array.from,C=[],N=p(a.Token,{className:h+".Token",init:function(c,e){a.Token.prototype.init.call(this,null);this.dictionary=c;this.name=e;C.push(this)},toString:function(){return this.value}}),H={},u={},w=[],m=p(null,{className:h+".Dictionary",name:"[noname]",tokens:null,resources:null,
init:function(a){this.name=a;this.tokens={};this.resources={}},update:function(a,c){for(var e in this.tokens)c[e]||this.setCultureValue(a,e,"");for(e in c)this.setCultureValue(a,e,c[e])},setCulture:function(a){for(var c in this.tokens)this.setTokenValue(a,c)},getTokenValue:function(a,c){return this.getCultureValue(a,c)||this.getCultureValue("base",c)},setTokenValue:function(a,c){this.tokens[c].set(l[a]?l[a].call(this,c):this.getTokenValue(a,c))},getCultureValue:function(a,c){return this.resources[a]&&
this.resources[a][c]},setCultureValue:function(a,c,l){var f=this.resources[a];f||(f=this.resources[a]={});f[c]=l;this.tokens[c]&&("base"==a||a==e)&&this.setTokenValue(e,c)},getToken:function(a){!1==a in this.tokens&&(this.tokens[a]=new N(this,a),this.setTokenValue(e,a));return this.tokens[a]},destroy:function(){this.resources=this.tokens=null}}),e="base",c=[],l={},Q={},y=[];K.exports={Token:N,token:B,getToken:function(){return B.apply(this,arguments)},getDictionary:n,createDictionary:function(a,c,
l){var f=n(a),f=n(a,!0);f.location=c;if(Array.isArray(l)){c=0;for(var q,E,m=0;m<l.length;m++,c++)E=l[m],"number"==typeof E?c+=E:(q=C[c])&&q.dictionary.setCultureValue("base",q.name,E)}else f.update("base",l);F(f,e);for(l=0;f=w[l];l++)f.handler.call(f.context,a)},updateDictionary:x,getDictionaries:function(){return u},addCreateDictionaryHandler:function(a,c){for(var e=0,f;f=w[e];e++)if(f.handler==a&&f.context==c)return!1;w.push({handler:a,context:c});return!0},removeCreateDictionaryHandler:function(a,
c){for(var e=0,f;f=w[e];e++)if(f.handler==a&&f.context==c)return w.splice(e,1),!0;return!1},getCulture:function(){return e},setCulture:function(a){a||(a="base");if(e!=a){e=a;for(var c in u){var l=u[c],f=e;F(l,f);l.setCulture(f)}for(c=0;l=y[c];c++)l.fn.call(l.context,a)}},getCultureList:function(){return c},setCultureList:function(a){"string"==typeof a&&(a=a.qw());for(var e=[],m,f=0;m=a[f];f++)m=m.split("/"),e.push(m[0]),l[m[0]]=r(m),Q[m[0]]=m.slice(1);c=e},loadCultureForDictionary:F,onCultureChange:function(a,
c,l){y.push({fn:a,context:c});l&&a.call(c,e)}};(function(){for(var c=a.resource("_l10nIndex_").fetch().split(/([\<\>\#])/),e=[],l=0;l<c.length;l++)switch(c[l]){case "#":e.length=0;break;case "<":e.pop();break;case ">":break;default:c[l]&&(e.push(c[l]),B(e.join(".")))}})()}],["basis.event",function(h,K,a,p,J,z,s){function B(a){var h=F[a];h||(h=function(){for(var h=this,r,w;h=h.handler;)w=h.callbacks[a],"function"==typeof w&&w.apply(h.context||this,r||(r=[this].concat(n.call(arguments)))),w=h.callbacks["*"],
"function"==typeof w&&w.call(h.context||this,{sender:this,type:a,args:arguments});x&&this.emit_debug&&this.emit_debug({sender:this,type:a,args:arguments})},x&&(h=(new Function("slice, DEVMODE",'return {"'+r+".events."+a+'":\n\n      function('+n.call(arguments,1).join(", ")+"){"+h.toString().replace(/\beventName\b/g,"'"+a+"'").replace(/^function[^(]*\(\)[^{]*\{|\}$/g,"")+'}\n\n}["'+r+".events."+a+'"];'))(n,x)),F[a]=h);return h}var r=this.path;h=a.Class;var n=Array.prototype.slice,x=!1,G={},F={},L=
function(){throw 7;};h=h(null,{className:r+".Emitter",extendConstructor_:!0,handler:null,emit_destroy:B("destroy"),listen:h.nestedExtendProperty(),init:function(){this.handler&&!this.handler.callbacks&&(x&&"handlerContext"in this&&a.dev.warn(this.constructor.className+": handlerContext is obsolete. Use # handler: { callbacks: {..}, context: <handlerContext> } # instead."),this.handler={callbacks:this.handler,context:this,handler:null})},addHandler:function(h,n){x&&!h&&a.dev.warn(this.constructor.className+
"#addHandler: callbacks is not an object (",h,")");n=n||this;if(x)for(var r=this;r=r.handler;)if(r.callbacks===h&&r.context===n){a.dev.warn(this.constructor.className+"#addHandler: add duplicate event callbacks",h,"to Emitter instance:",this);break}this.handler={callbacks:h,context:n,handler:this.handler}},removeHandler:function(h,n){var r=this,u;for(n=n||this;u=r,r=r.handler;)if(r.callbacks===h&&r.context===n){r.callbacks=G;u.handler=r.handler;return}x&&u!==this&&a.dev.warn(this.constructor.className+
"#removeHandler: no handler removed")},destroy:function(){x&&(this.destroy=L);this.emit_destroy();this.handler=null}});x&&h.extend({handler_list:function(){for(var a=[],h=this;h=h.handler;)a.push([h.callbacks,h.context]);return a},emit_debug:null});K.exports={create:B,createHandler:function(a,h){var n={events:[]};if(a){a=String(a).trim().split(/\s+|\s*,\s*/).sort();for(var n={events:a},r=0,w;w=a[r];r++)"destroy"!=w&&(n[w]=h)}return n},events:F,Emitter:h}}],["basis.data",function(h,K,a,p,J,z,s){function B(a,
f){return function(){a.apply(this,arguments);f.apply(this,arguments)}}function r(a){var f=D[a];if(!f)for(var c=[],e={},q=1,f=D[a]={actions:c,handler:e};a;){if(a&1){var l=Q[q],g;for(g in l.handler)c.push(l.action),e[g]=e[g]?B(e[g],l.handler[g]):l.handler[g]}q<<=1;a>>=1}return f}function n(a,f){for(;f&&f!==a&&f!==f.delegate;)f=f.delegate;return f===a}function x(a,f){var c={},e;a&&a.length&&(e=c.inserted=a);f&&f.length&&(e=c.deleted=f);if(e)return c}function G(a,f){var c=[],e=[];if(!a||!a.itemCount)c=
f.getItems();else if(!f||!f.itemCount)e=a.getItems();else{for(var q in a.items_){var l=a.items_[q];!1==l.basisObjectId in f.items_&&e.push(l)}for(q in f.items_)l=f.items_[q],!1==l.basisObjectId in a.items_&&c.push(l)}return x(c,e)}function F(a){return Array.isArray(a)?a.map(function(a){return{data:a}}):{data:a}}function L(a){if(!a||a.constructor!==Object)a={value:a};return new E({data:a})}J=this.path;z=a.Class;var C=a.cleaner,N=a.object.values,H=a.fn.$self,u=a.event.Emitter;s=a.event.create;var w=
a.event.events,m={},e=[],c={},l={priority:[],values:{},add:function(a,f){var e=a.toLowerCase();l[a]=e;c[e]=a;this.values[e]=a;f=f?this.priority.indexOf(f):-1;-1==f?this.priority.push(e):this.priority.splice(f,0,e)},getList:function(){return N(c)}};l.add("READY");l.add("DEPRECATED");l.add("UNDEFINED");l.add("ERROR");l.add("PROCESSING");var Q={},y=1,A={NONE:0,ALL:0,link:function(a,f,c){a+=f.basisObjectId;var e=c.subscribers_;e||(e=c.subscribers_={});e[a]||(e[a]=f,1==(c.subscriberCount+=1)&&c.emit_subscribersChanged(1))},
unlink:function(a,f,c){a+=f.basisObjectId;if((f=c.subscribers_)&&f[a])if(delete f[a],0==(c.subscriberCount-=1))c.emit_subscribersChanged(-1),c.subscribers_=null},add:function(a,f,c){Q[y]={handler:f,action:c};A[a]=y;A.ALL|=y;y<<=1},addProperty:function(a,f){var c={};c[f||a+"Changed"]=function(f,c){c&&A.unlink(a,f,c);f[a]&&A.link(a,f,f[a])};this.add(a.toUpperCase(),c,function(f,c){c[a]&&f(a,c,c[a])})}},D={};A.addProperty("delegate");A.addProperty("target");A.addProperty("dataset");var I=z(u,{className:J+
".AbstractData",state:l.UNDEFINED,emit_stateChanged:s("stateChanged","oldState"),active:!1,emit_activeChanged:s("activeChanged"),subscribeTo:A.NONE,subscriberCount:0,subscribers_:null,emit_subscribersChanged:s("subscribersChanged","delta"),syncEvents:z.oneFunctionProperty(function(){this.isSyncRequired()&&this.syncAction()},{stateChanged:!0,subscribersChanged:!0}),syncAction:null,init:function(){u.prototype.init.call(this);this.active&&this.addHandler(r(this.subscribeTo).handler);var a=this.syncAction;
a&&(this.syncAction=null,this.setSyncAction(a))},setState:function(a,f){var e=String(a);if(!c[e])throw 6;if(this.state!=e||this.state.data!=f){var q=this.state;this.state=Object(e);this.state.data=f;this.emit_stateChanged(q);return!0}return!1},deprecate:function(){this.state!=l.PROCESSING&&this.setState(l.DEPRECATED)},setActive:function(a){a=!!a;if(this.active!=a){this.active=a;this.emit_activeChanged();if(a){a=r(this.subscribeTo);for(var f=0,c;c=a.actions[f];f++)c(A.link,this);this.addHandler(a.handler)}else{a=
r(this.subscribeTo);for(f=0;c=a.actions[f++];)c(A.unlink,this);this.removeHandler(a.handler)}return!0}return!1},setSubscription:function(a){var f=this.subscribeTo,c=a&A.ALL;if(a=f^c){this.subscribeTo=c;if(this.active){var e=r(f),c=r(c);this.removeHandler(e.handler);this.addHandler(c.handler);for(e=1;a;)a&1&&(c=Q[e],f&e?c.action(A.unlink,this):c.action(A.link,this)),e<<=1,a>>=1}return!0}return!1},isSyncRequired:function(){return 0<this.subscriberCount&&(this.state==l.UNDEFINED||this.state==l.DEPRECATED)},
setSyncAction:function(a){var f=this.syncAction;"function"!=typeof a&&(a=null);(this.syncAction=a)?(f||this.addHandler(this.syncEvents),this.isSyncRequired()&&this.syncAction()):f&&this.removeHandler(this.syncEvents)},destroy:function(){if(this.active)for(var a=r(this.subscribeTo),f=0,c;c=a.actions[f];f++)c(A.unlink,this);u.prototype.destroy.call(this);this.state=l.UNDEFINED}}),f={},q={change:function(a){for(var f=this;f=f.tokens_;)f.token.set(f.fn(a.value))}};h=z(I,{className:J+".Value",emit_change:s("change",
"curValue","oldValue"),value:null,initValue:null,proxy:null,locked:!1,lockedValue_:null,tokens_:null,init:function(){I.prototype.init.call(this);this.proxy&&(this.value=this.proxy(this.value));this.initValue=this.value},set:function(a){var f=this.value;a=this.proxy?this.proxy(a):a;var c=a!==f;c&&(this.value=a,this.locked||this.emit_change(a,f));return c},reset:function(){this.set(this.initValue)},lock:function(){this.locked||(this.locked=!0,this.lockedValue_=this.value)},unlock:function(){this.locked&&
(this.locked=!1,this.value!==this.lockedValue_&&(this.emit_change(this.value,this.lockedValue_),this.lockedValue_=null))},compute:function(k,c){c||(c=k,k=null);var e=this,q=a.event.createHandler(k,function(g){this.set(c(g,e.value))}),l=q.events.concat(String(c),this.basisObjectId).join("_"),m=f[l];if(!m){var g={};q.destroy=function(d){delete g[d.basisObjectId];this.destroy()};this.addHandler({change:function(){for(var d in g){var b=g[d];b.token.set(c(b.object,this.value))}},destroy:function(){for(var d in g){var b=
g[d];b.object.removeHandler(q,b.token);b.token.destroy()}e=g=null}});m=f[l]=function(d){var b=d.basisObjectId,f=g[b];f||(f=new a.Token(c(d,e.value)),d.addHandler(q,f),f=g[b]={token:f,object:d});return f.token};m.deferred=function(){return function(g){return m(g).deferred()}}}return m},as:function(f,c){"function"!=typeof f&&(f=a.fn.$self);if(this.tokens_)for(var e=this;e=e.tokens_;){if(e.fn==String(f))return c?e.token.deferred():e.token}else this.addHandler(q);e=new a.Token(f(this.value));this.tokens_=
{fn:f,token:e,tokens_:this.tokens_};return c?e.deferred():e},deferred:function(a){return this.as(a,!0)},destroy:function(){I.prototype.destroy.call(this);this.tokens_=this.lockedValue_=this.value=this.initValue=this.proxy=null}});var E=z(I,{className:J+".Object",subscribeTo:A.DELEGATE+A.TARGET,data:null,emit_update:s("update","delta"),delegate:null,canSetDelegate:!0,emit_delegateChanged:s("delegateChanged","oldDelegate"),isTarget:!1,target:null,emit_targetChanged:s("targetChanged","oldTarget"),root:null,
emit_rootChanged:s("rootChanged","oldRoot"),cascadeDestroy:!1,listen:{delegate:{update:function(a,f){this.data=a.data;this.emit_update(f)},stateChanged:function(a,f){this.state=a.state;this.emit_stateChanged(f)},targetChanged:function(a,f){this.target=a.target;var c=this.listen.target;c&&(f&&f.removeHandler(c,this),this.target&&this.target.addHandler(c,this));this.emit_targetChanged(f)},rootChanged:function(a,f){this.data=a.data;this.root=a.root;this.emit_rootChanged(f)},destroy:function(){this.cascadeDestroy?
this.destroy():this.setDelegate()}}},init:function(){I.prototype.init.call(this);var a=this.delegate;a?(this.delegate=null,this.data=a.data,this.state=a.state,this.setDelegate(a)):(this.root=this,this.data||(this.data={}),this.isTarget&&(this.target=this))},getRootDelegate:function(){for(var a=this;a.delegate&&a.delegate!==a;)a=a.delegate;return a},setDelegate:function(a){if(!this.canSetDelegate)return!1;if(a&&a instanceof E){if(a.delegate&&n(this,a))return!1}else a=null;if(this.delegate!==a){var f=
this.state,c=this.data,e=this.delegate,q=this.target,l=this.root,g={},d=this.listen.delegate,b=(q||a)&&(!a||a.target!==q)&&this.listen.target;e&&d&&e.removeHandler(d,this);q&&b&&q.removeHandler(b,this);if(a){this.delegate=a;this.root=a.root;this.data=a.data;this.state=a.state;this.target=a.target;for(var v in a.data)!1===v in c&&(g[v]=void 0);for(v in c)c[v]!==a.data[v]&&(g[v]=c[v]);d&&a.addHandler(d,this);a.target&&b&&a.target.addHandler(b,this);for(v in g){this.emit_update(g);break}f!==this.state&&
(String(f)!=this.state||f.data!==this.state.data)&&this.emit_stateChanged(f)}else for(v in this.target=this.delegate=null,this.root=this,this.data={},c)this.data[v]=c[v];this.root!==l&&this.emit_rootChanged(l);this.target!==q&&this.emit_targetChanged(q);this.emit_delegateChanged(e);return!0}return!1},setState:function(a,f){var c=this.target||this.getRootDelegate();return c!==this?c.setState(a,f):I.prototype.setState.call(this,a,f)},update:function(a){var f=this.target||this.getRootDelegate();if(f!==
this)return f.update(a);if(a){var f={},c=!1,e;for(e in a)this.data[e]!==a[e]&&(c=!0,f[e]=this.data[e],this.data[e]=a[e]);if(c)return this.emit_update(f),f}return!1},destroy:function(){this.delegate&&this.setDelegate();I.prototype.destroy.call(this);this.data=m;this.target=this.root=null}});p=z(E,{className:J("Slot")});var P={destroy:function(){delete this.map[this.itemId]}},H=z(null,{className:J("KeyObjectMap"),itemClass:E,keyGetter:H,map_:null,extendConstructor_:!0,init:function(){this.map_={};C.add(this)},
resolve:function(a){return this.get(this.keyGetter(a),a)},create:function(a,f){var c={};a instanceof E?c.delegate=a:c.data={id:a,title:a};return new this.itemClass(c)},get:function(a,f){var c=a instanceof E?a.basisObjectId:a,e=this.map_[c];!e&&f&&(e=this.map_[c]=this.create(a,f),e.addHandler(P,{map:this.map_,itemId:c}));return e},destroy:function(){C.remove(this);for(var a=N(this.map_),f=0,c;c=a[f++];)c.destroy()}}),M=z(E,{className:J+".DatasetWrapper",subscribeTo:E.prototype.subscribeTo+A.DATASET,
listen:{dataset:{itemsChanged:function(a,f){this.itemCount=a.itemCount;this.emit_itemsChanged(f)},destroy:function(){this.setDataset()}}},dataset:null,emit_datasetChanged:s("datasetChanged","oldDataset"),emit_itemsChanged:s("itemsChanged","delta"),init:function(){var a=this.dataset;a&&(this.dataset=null,this.setDataset(a));E.prototype.init.call(this)},setDataset:function(a){!1==a instanceof O&&(a=null);if(this.dataset!==a){var f=this.listen.dataset,c=this.dataset,e;f&&(c&&c.removeHandler(f,this),
a&&a.addHandler(f,this));this.itemCount=a?a.itemCount:0;(e=G(c,a))&&this.emit_itemsChanged(e);this.dataset=a;this.emit_datasetChanged(c)}},destroy:function(){this.dataset&&this.setDataset();E.prototype.destroy.call(this)}}),O=z(E,{className:J("AbstractDataset"),itemCount:0,items_:null,members_:null,cache_:null,emit_itemsChanged:s("itemsChanged","delta")&&function(a){var f,c=0,e=0,q;if(f=a.inserted)for(;q=f[c];)this.items_[q.basisObjectId]=q,c++;if(f=a.deleted)for(;q=f[e];)delete this.items_[q.basisObjectId],
e++;this.itemCount+=c-e;this.cache_=null;w.itemsChanged.call(this,a)},init:function(){E.prototype.init.call(this);this.members_={};this.items_={}},has:function(a){return!(!a||!this.items_[a.basisObjectId])},getItems:function(){this.cache_||(this.cache_=N(this.items_));return this.cache_},pick:function(){for(var a in this.items_)return this.items_[a];return null},top:function(a){var f=[];if(a)for(var c in this.items_)if(f.push(this.items_[c])>=a)break;return f},forEach:function(a){for(var f=this.getItems(),
c=0;c<f.length;c++)a(f[c])},clear:function(){},destroy:function(){this.clear();E.prototype.destroy.call(this);this.cache_=e;this.itemCount=0;this.items_=this.members_=null}});J=z(O,{className:J("Dataset"),listen:{item:{destroy:function(a){this.remove([a])}}},init:function(){O.prototype.init.call(this);var a=this.items;a&&(this.items=null,this.set(a))},add:function(a){var f=this.members_,c=this.listen.item,e=[],q;a&&!Array.isArray(a)&&(a=[a]);for(var l=0;l<a.length;l++){var g=a[l];if(g instanceof E){var d=
g.basisObjectId;f[d]||(f[d]=g,c&&g.addHandler(c,this),e.push(g))}}e.length&&this.emit_itemsChanged(q={inserted:e});return q},remove:function(a){var f=this.members_,c=this.listen.item,e=[],q;a&&!Array.isArray(a)&&(a=[a]);for(var l=0;l<a.length;l++){var g=a[l];if(g instanceof E){var d=g.basisObjectId;f[d]&&(c&&g.removeHandler(c,this),delete f[d],e.push(g))}}e.length&&this.emit_itemsChanged(q={deleted:e});return q},set:function(a){if(!this.itemCount)return this.add(a);if(!a||!a.length)return this.clear();
for(var f=this.members_,c=this.listen.item,e={},q=[],l=[],g,d,b,v=0;v<a.length;v++)g=a[v],g instanceof E&&(d=g.basisObjectId,e[d]=g,f[d]||(f[d]=g,c&&g.addHandler(c,this),l.push(g)));for(d in f)e[d]||(g=f[d],c&&g.removeHandler(c,this),delete f[d],q.push(g));(b=x(l,q))&&this.emit_itemsChanged(b);return b},sync:function(a){a=this.set(a)||{};var f=a.deleted;if(f)for(var c=0,e;e=f[c];c++)e.destroy();return a.inserted},clear:function(){var a=this.getItems(),f=this.listen.item,c;if(a.length){if(f)for(c=
0;c<a.length;c++)a[c].removeHandler(f,this);this.emit_itemsChanged(c={deleted:a});this.members_={}}return c}});J.setAccumulateState=function(){function f(){var b=d;d={};for(var a in b){var g=b[a];l.call(g.dataset,g)}}function c(b){var a=this.basisObjectId,g=b.inserted,f=b.deleted,e=d[a];if(g&&f)e&&(delete d[a],l.call(e.dataset,e)),l.call(this,b);else{if(e){var k=e[g?"inserted":"deleted"];if(k){k.push.apply(k,g||f);return}l.call(e.dataset,e)}d[a]=b;b.dataset=this}}function e(){g=null;m&&(m=0,q.emit_itemsChanged=
l,f())}var q=O.prototype,l=q.emit_itemsChanged,m=0,g,d={};return function(b){b?(0==m&&(q.emit_itemsChanged=c,g||(g=a.setImmediate(e))),m++):(m-=0<m,0==m&&(q.emit_itemsChanged=l,f()))}}();K.setWrapper(function(a){return F(a)});K.exports={STATE:l,SUBSCRIPTION:A,AbstractData:I,Value:h,Object:E,Slot:p,KeyObjectMap:H,AbstractDataset:O,Dataset:J,DatasetWrapper:M,isConnected:n,getDatasetDelta:G,wrapData:F,wrapObject:L,wrap:function(a,f){var c=f?L:F;return Array.isArray(a)?a.map(c):c(a)}}}],["basis.dom.wrapper",
function(h,K,a,p,J,z,s){function B(a){return a.sortingValue||0}function r(a,d){a=a.sortingValue||0;d=d.sortingValue||0;return+(a>d)||-(a<d)}function n(a,d){a=a.sortingValue||0;d=d.sortingValue||0;return-(a>d)||+(a<d)}function x(a){return a.childNodes.sort(a.sortingDesc?n:r)}function G(a,d,b,f,c){if(d!==b){var e=a,k=[];f&&(a.contextSelection=b,a.selected&&k.push(a));for(;e;){if((f=!e.selection||c&&e===a?e.firstChild:null)&&f.contextSelection!==d)throw 8;for(;!f;){if(e===a){k.length&&(d&&d.remove(k),
b&&b.add(k));return}f=e.nextSibling;f||(e=e.parentNode)}e=f;e.selected&&k.push(e);e.contextSelection=b}}}function F(a,d){a.contextDisabled!=d&&(a.contextDisabled=d,a.disabled||(d?a.emit_disable():a.emit_enable()))}function L(a,d){var b=d.length-1;a.childNodes=d;a.firstChild=d[0]||null;a.lastChild=d[b]||null;for(var f=b;b=d[f];f--)b.nextSibling=d[f+1]||null,b.previousSibling=d[f-1]||null,a.insertBefore(b,b.nextSibling)}function C(a,d){var b;if("function"==typeof a.childFactory&&(b=a.childFactory(d),
b instanceof a.childClass))return b;if(!b)throw 11;throw 12;}h=this.path;var N=a.Class,H=a.object.complete,u=a.array.from,w=a.fn.$undef,m=a.getter,e=a.fn.nullGetter;p=N.oneFunctionProperty;J=a.event.create;var c=a.event.events;z=a.data.SUBSCRIPTION;var l=a.data.STATE,Q=a.data.AbstractData,y=a.data.Object,A=a.data.AbstractDataset,D=a.data.Dataset,I={ANY:!0,NONE:!1,PARENT:"parent",OWNER:"owner"},f={};z.addProperty("owner");z.addProperty("dataSource");var q=N.customExtendProperty({},function(a,d){for(var b in d){var f=
d[b];N.isClass(f)&&(f={instanceOf:f});if(f&&"object"==typeof f){var c=!1,e={instanceOf:f.instanceOf},k={key:b,config:e};typeof f.config&&(e.config=f.config);"function"==typeof f.existsIf&&(c=e.existsIf=f.existsIf);"function"==typeof f.delegate&&(c=e.delegate=f.delegate);"function"==typeof f.dataSource&&(c=e.dataSource=f.dataSource);if(c){var f=P.__extend__(f.hook||{update:!0}),q;for(q in f)if(f[q]===E){k.hook=f;break}}a[b]=k}else a[b]=null}}),E=function(){var a=this.owner,d=this.context.key,b=this.context.config,
f=!b.existsIf||b.existsIf(a),c=a.satellite[d];f?c?(b.delegate&&c.setDelegate(b.delegate(a)),b.dataSource&&c.setDataSource(b.dataSource(a))):(f=("function"==typeof b.config?b.config(a):b.config)||{},f.owner=a,b.delegate&&(f.delegate=b.delegate(a)),b.dataSource&&(f.dataSource=b.dataSource(a)),c=new b.instanceOf(f),a.satellite[d]=c,a.emit_satelliteChanged(d,null),a.listen.satellite&&c.addHandler(a.listen.satellite,a)):c&&(delete a.satellite[d],a.emit_satelliteChanged(d,c),c.destroy())},P=p(E,{}),M=N(y,
{className:h+".AbstractNode",subscribeTo:y.prototype.subscribeTo+z.DATASOURCE,isSyncRequired:function(){return this.state==l.UNDEFINED||this.state==l.DEPRECATED},syncEvents:{activeChanged:!1},emit_update:function(a){y.prototype.emit_update.call(this,a);if(a=this.parentNode)a.matchFunction&&this.match(a.matchFunction),a.insertBefore(this,this.nextSibling)},listen:{owner:{destroy:function(){this.setOwner()}}},autoDelegate:I.NONE,nodeType:"DOMWrapperNode",name:null,childNodes:null,emit_childNodesModified:J("childNodesModified",
"delta")&&function(a){c.childNodesModified.call(this,a);var d=this.listen.childNode,b;if(d){if(b=a.inserted)for(var f=0,e;e=b[f];f++)e.addHandler(d,this);if(b=a.deleted)for(f=0;e=b[f];f++)e.removeHandler(d,this)}},childNodesState:l.UNDEFINED,emit_childNodesStateChanged:J("childNodesStateChanged","oldState"),childClass:M,dataSource:null,emit_dataSourceChanged:J("dataSourceChanged","oldDataSource"),dataSourceMap_:null,destroyDataSourceMember:!0,parentNode:null,nextSibling:null,previousSibling:null,
firstChild:null,lastChild:null,sorting:e,sortingDesc:!1,emit_sortingChanged:J("sortingChanged","oldSorting","oldSortingDesc"),grouping:null,emit_groupingChanged:J("groupingChanged","oldGrouping"),groupingClass:null,groupNode:null,groupId:NaN,satelliteConfig:q,satellite:null,emit_satelliteChanged:J("satelliteChanged","key","oldSatellite"),owner:null,emit_ownerChanged:J("ownerChanged","oldOwner"),init:function(){y.prototype.init.call(this);var a=this.childNodes,d=this.dataSource;a&&(this.childNodes=
null);d&&(this.dataSource=null);var b=this.grouping;b&&(this.grouping=null,this.setGrouping(b));this.childClass&&(this.childNodes=[],d?this.setDataSource(d):a&&this.setChildNodes(a));a=this.satellite;this.satellite={};if(a)for(var f in a)this.setSatellite(f,a[f]);if(this.satelliteConfig!==q)for(f in this.satelliteConfig)if((a=this.satelliteConfig[f])&&"object"==typeof a)d={context:a,owner:this},a.hook&&this.addHandler(a.hook,d),E.call(d);if(f=this.owner)this.owner=null,this.setOwner(f)},setChildNodesState:function(a,
d){var b=String(a),f=this.childNodesState;if(!l.values[b])throw 9;if(f!=b||f.data!=d)this.childNodesState=Object(b),this.childNodesState.data=d,this.emit_childNodesStateChanged(f)},appendChild:function(a){},insertBefore:function(a,d){},removeChild:function(a){},replaceChild:function(a,d){},clear:function(a){},setChildNodes:function(a){},setGrouping:function(a,d){},setSorting:function(a,d){},setDataSource:function(a){},setOwner:function(a){if(!a||!1==a instanceof M)a=null;if(a&&this.parentNode)throw 10;
var d=this.owner;if(d!==a){var b=this.listen.owner;b&&(d&&d.removeHandler(b,this),a&&a.addHandler(b,this));this.owner=a;this.emit_ownerChanged(d);(this.autoDelegate==I.OWNER||this.autoDelegate===I.ANY)&&this.setDelegate(a)}},setSatellite:function(a,d){var b=this.satellite[a];!1==d instanceof Q&&(d=null);if(b!=d&&!this.satelliteConfig[a]){var f=this.listen.satellite;b&&(b instanceof M&&b.setOwner(null),f&&b.removeHandler(f,this));d?this.satellite[a]=d:delete this.satellite[a];d&&(d instanceof M&&d.setOwner(this),
f&&d.addHandler(f,this));this.emit_satelliteChanged(a,b)}},getChildNodesDataset:function(){return f[this.basisObjectId]||new S({sourceNode:this})},destroy:function(){y.prototype.destroy.call(this);this.dataSource?this.setDataSource():this.firstChild&&this.clear();this.parentNode&&this.parentNode.removeChild(this);this.grouping&&(this.grouping.setOwner(),this.grouping=null);this.owner&&this.setOwner();if(this.satellite){for(var a in this.satellite){var d=this.satellite[a];d.owner=null;d.destroy()}this.satellite=
null}this.lastChild=this.firstChild=this.nextSibling=this.previousSibling=this.parentNode=this.childNodes=null}}),O=N(M,{className:h+".PartitionNode",autoDestroyIfEmpty:!1,nodes:null,first:null,last:null,init:function(){this.nodes=[];M.prototype.init.call(this)},insert:function(a,d){var b=this.nodes,f=d?b.indexOf(d):-1;-1==f?(b.push(a),this.last=a):b.splice(f,0,a);this.first=b[0];a.groupNode=this;this.emit_childNodesModified({inserted:[a]})},remove:function(a){var d=this.nodes;d.remove(a)&&(this.first=
d[0]||null,this.last=d[d.length-1]||null,a.groupNode=null,this.emit_childNodesModified({deleted:[a]}));!this.first&&this.autoDestroyIfEmpty&&this.destroy()},clear:function(){if(this.first){for(var a=this.nodes,d=a.length;0<d--;)a[d].groupNode=null;this.nodes=[];this.last=this.first=null;this.emit_childNodesModified({deleted:a});this.autoDestroyIfEmpty&&this.destroy()}},destroy:function(){M.prototype.destroy.call(this);this.last=this.first=this.nodes=null}}),k={childClass:M,childFactory:null,listen:{dataSource:{itemsChanged:function(a,
d){var b={},f=[];if(d.deleted)if(b.deleted=f,this.childNodes.length==d.deleted.length){for(var f=u(this.childNodes),c=0,e;e=f[c];c++)e.canSetDelegate=!0;c=this.dataSource;this.dataSource=null;this.clear(!0);this.dataSource=c;this.dataSourceMap_={}}else for(c=0;e=d.deleted[c];c++){e=e.basisObjectId;var k=this.dataSourceMap_[e];delete this.dataSourceMap_[e];k.canSetDelegate=!0;this.removeChild(k);f.push(k)}if(d.inserted){b.inserted=[];for(c=0;e=d.inserted[c];c++)k=C(this,{cascadeDestroy:!1,delegate:e}),
k.canSetDelegate=!1,this.dataSourceMap_[e.basisObjectId]=k,b.inserted.push(k),this.firstChild&&this.insertBefore(k)}this.firstChild?this.emit_childNodesModified(b):this.setChildNodes(b.inserted);if(this.destroyDataSourceMember&&f.length)for(c=0;e=f[c];c++)e.destroy()},stateChanged:function(a){this.setChildNodesState(a.state)},destroy:function(a){this.dataSource===a&&this.setDataSource()}}},getChild:function(a,d){return this.childNodes.search(a,d)},getChildByName:function(a){return this.getChild(a,
"name")},getChildren:function(a,d){return this.childNodes.filter(function(b){return d(b)==a})},appendChild:function(a){return this.insertBefore(a)},insertBefore:function(a,d){if(!this.childClass)throw 13;if(a.firstChild)for(var b=this;b=b.parentNode;)if(b===a)throw 14;var f=a&&a instanceof this.childClass;if(this.dataSource&&(!f||this.dataSourceMap_[a.delegate.basisObjectId]!==a))throw 15;f||(a=C(this,a instanceof y?{delegate:a}:a));if(a.owner)throw 16;var f=a.parentNode===this,c=this.childNodes,
k=this.grouping,q=a.groupNode,l=null,m=this.sorting,t,E=!1,O,b=-1,A,h;f&&(A=a.nextSibling,h=a.previousSibling);if(m!==e&&(d=null,t=this.sortingDesc,O=m(a)||0,f))if(O===a.sortingValue)E=!0;else if((!A||(t?A.sortingValue<=O:A.sortingValue>=O))&&(!h||(t?h.sortingValue>=O:h.sortingValue<=O)))a.sortingValue=O,E=!0;if(k){l=k.getGroupNode(a,!0);k=l.nodes;if(q===l&&(E||m===e&&A===d))return a;m!==e?q===l&&E?b=A&&A.groupNode===l?k.indexOf(A):k.length:(b=k.binarySearchPos(O,B,t),a.sortingValue=O):b=d&&d.groupNode===
l?k.indexOf(d):k.length;if(b<k.length)d=k[b];else if(l.last)d=l.last.nextSibling;else{b=l;for(d=null;(b=b.nextSibling)&&!(d=b.first););}if(a===d||f&&A===d)return q!==l&&(q&&q.remove(a),l.insert(a,d)),a;b=-1}else if(m!==e){if(E)return a;b=c.binarySearchPos(O,B,t);d=c[b];a.sortingValue=O;if(a===d||f&&A===d)return a}else{if(d&&d.parentNode!==this)throw 17;if(f){if(A===d)return a;if(a===d)throw 18;}}f?(A?(A.previousSibling=h,a.nextSibling=null):this.lastChild=h,h?(h.nextSibling=A,a.previousSibling=null):
this.firstChild=A,-1==b?c.remove(a):(t=c.indexOf(a),c.splice(t,1),b-=t<b),q&&(q.remove(a),q=null)):a.parentNode&&a.parentNode.removeChild(a);q!=l&&l.insert(a,d);if(d){-1==b&&(b=c.indexOf(d));if(-1==b)throw 19;a.nextSibling=d;c.splice(b,0,a)}else b=c.length,c.push(a),d={previousSibling:this.lastChild},this.lastChild=a;a.parentNode=this;a.previousSibling=d.previousSibling;0==b?this.firstChild=a:d.previousSibling.nextSibling=a;d.previousSibling=a;f||(G(a,a.contextSelection,this.selection||this.contextSelection,
!0),F(a,this.disabled||this.contextDisabled),a.match&&a.match(this.matchFunction),(a.autoDelegate==I.PARENT||a.autoDelegate===I.ANY)&&a.setDelegate(this),this.dataSource||this.emit_childNodesModified({inserted:[a]}),a.listen.parentNode&&this.addHandler(a.listen.parentNode,a));return a},removeChild:function(a){if(!a||a.parentNode!==this)throw 20;if(!1==a instanceof this.childClass)throw 21;if(this.dataSource&&this.dataSource.has(a.delegate))throw 22;var d=this.childNodes.indexOf(a);if(-1==d)throw 23;
this.childNodes.splice(d,1);a.parentNode=null;a.nextSibling?a.nextSibling.previousSibling=a.previousSibling:this.lastChild=a.previousSibling;a.previousSibling?a.previousSibling.nextSibling=a.nextSibling:this.firstChild=a.nextSibling;a.nextSibling=null;a.previousSibling=null;a.listen.parentNode&&this.removeHandler(a.listen.parentNode,a);G(a,a.contextSelection,null,!0);a.groupNode&&a.groupNode.remove(a);this.dataSource||this.emit_childNodesModified({deleted:[a]});(a.autoDelegate==I.PARENT||a.autoDelegate===
I.ANY)&&a.setDelegate();return a},replaceChild:function(a,d){if(this.dataSource)throw 24;if(null==d||d.parentNode!==this)throw 25;this.insertBefore(a,d);return this.removeChild(d)},clear:function(a){if(this.dataSource&&this.dataSource.itemCount)throw 26;if(this.firstChild){a&&G(this,this.selection||this.contextSelection,null,!1,!0);var d=this.childNodes;this.lastChild=this.firstChild=null;this.childNodes=[];this.emit_childNodesModified({deleted:d});for(var b=d.length;0<b--;){var f=d[b];f.listen.parentNode&&
f.parentNode.removeHandler(f.listen.parentNode,f);f.parentNode=null;f.groupNode=null;a?(f.nextSibling=null,f.previousSibling=null,(f.autoDelegate==I.PARENT||f.autoDelegate===I.ANY)&&f.setDelegate()):f.destroy()}if(this.grouping){d=this.grouping.childNodes;for(b=d.length-1;a=d[b];b--)a.clear()}}},setChildNodes:function(a,d){this.dataSource||this.clear(d);if(a&&(!1=="length"in a&&(a=[a]),a.length)){var b=this.emit_childNodesModified;this.emit_childNodesModified=w;for(var f=0,c=a.length;f<c;f++)this.insertBefore(a[f]);
this.emit_childNodesModified=b;this.emit_childNodesModified({inserted:this.childNodes})}},setDataSource:function(a){if(!a||!this.childClass||!1==a instanceof A)a=null;if(this.dataSource!==a){var d=this.dataSource,b=this.listen.dataSource;d&&(this.dataSource=this.dataSourceMap_=null,b&&d.removeHandler(b,this));if(this.firstChild){if(d)for(var f=0,c;c=this.childNodes[f];f++)c.canSetDelegate=!0;this.clear()}(this.dataSource=a)?(this.dataSourceMap_={},this.setChildNodesState(a.state),b&&(a.addHandler(b,
this),a.itemCount&&b.itemsChanged&&b.itemsChanged.call(this,a,{inserted:a.getItems()}))):this.setChildNodesState(l.UNDEFINED);this.emit_dataSourceChanged(d)}},setGrouping:function(a,d){if("function"==typeof a||"string"==typeof a)a={groupGetter:a};!1==a instanceof X&&(a=a&&"object"==typeof a?new this.groupingClass(a):null);if(this.grouping!==a){var b=this.grouping,f;if(b){this.grouping=null;if(!a&&this.firstChild){f=this.sorting!==e?x(this):this.childNodes;for(var c=f.length;0<c--;)f[c].groupNode=
null;L(this,f)}b.setOwner()}if(a&&(this.grouping=a,a.setOwner(this),this.firstChild)){f=this.sorting!==e?x(this):this.childNodes;for(var c=0,k;k=f[c];c++)k.groupNode=this.grouping.getGroupNode(k,!0);for(c=0;k=f[c];c++)k.groupNode.nodes.push(k);f.length=0;for(c=this.grouping.nullGroup;c;c=c.nextSibling)k=c.nodes,c.first=k[0]||null,c.last=k[k.length-1]||null,f.push.apply(f,k),c.emit_childNodesModified({inserted:k});L(this,f)}this.emit_groupingChanged(b)}},setSorting:function(a,d){a=m(a);d=!!d;if(this.sorting!==
a||this.sortingDesc!=!!d){var b=this.sorting,f=this.sortingDesc;this.sorting=a;this.sortingDesc=!!d;if(a!==e&&this.firstChild){var c=[],k;for(k=this.firstChild;k;k=k.nextSibling)k.sortingValue=a(k)||0;if(this.grouping)for(var q=this.grouping.nullGroup;q;q=q.nextSibling)k=q.nodes=x({childNodes:q.nodes,sortingDesc:this.sortingDesc}),q.first=k[0]||null,q.last=k[k.length-1]||null,c.push.apply(c,k);else c=x(this);L(this,c)}this.emit_sortingChanged(b,f)}},setMatchFunction:function(a){if(this.matchFunction!=
a){var d=this.matchFunction;this.matchFunction=a;for(var b=this.lastChild;b;b=b.previousSibling)b.match(a);this.emit_matchFunctionChanged(d)}}},U=N(M,k,{className:h+".Node",emit_enable:J("enable")&&function(){for(var a=this.firstChild;a;a=a.nextSibling)F(a,!1);c.enable.call(this)},emit_disable:J("disable")&&function(){for(var a=this.firstChild;a;a=a.nextSibling)F(a,!0);c.disable.call(this)},emit_satelliteChanged:function(a,d){M.prototype.emit_satelliteChanged.call(this,a,d);this.satellite[a]instanceof
U&&F(this.satellite[a],this.disabled||this.contextDisabled)},emit_select:J("select"),emit_unselect:J("unselect"),emit_match:J("match"),emit_unmatch:J("unmatch"),emit_matchFunctionChanged:J("matchFunctionChanged","oldMatchFunction"),selectable:!0,selected:!1,selection:null,contextSelection:null,matchFunction:null,matched:!0,disabled:!1,contextDisabled:!1,listen:{owner:{enable:function(){F(this,!1)},disable:function(){F(this,!0)}}},init:function(){this.selection&&(!1==this.selection instanceof A&&(this.selection=
new T(this.selection)),this.listen.selection&&this.selection.addHandler(this.listen.selection,this));M.prototype.init.call(this);this.disabled&&this.emit_disable();this.selected&&(this.selected=!1,this.select(!0))},setSelection:function(a){if(this.selection!==a)return G(this,this.selection||this.contextSelection,a||this.contextSelection,!1,!0),this.selection&&this.listen.selection&&this.selection.removeHandler(this.listen.selection,this),(this.selection=a)&&this.listen.selection&&a.addHandler(this.listen.selection,
this),!0},hasOwnSelection:function(){return!!this.selection},select:function(a){var d=this.selected,b=this.contextSelection;b?a?d?b.remove([this]):b.add([this]):this.selectable&&b.set([this]):!d&&this.selectable&&(this.selected=!0,this.emit_select());return this.selected!=d},unselect:function(){var a=this.selected;if(a){var d=this.contextSelection;d?d.remove([this]):(this.selected=!1,this.emit_unselect())}return this.selected!=a},setSelected:function(a,d){return a?this.select(d):this.unselect()},
enable:function(){var a=this.disabled;a&&(this.disabled=!1,this.contextDisabled||this.emit_enable());return this.disabled!=a},disable:function(){var a=this.disabled;a||(this.disabled=!0,this.contextDisabled||this.emit_disable());return this.disabled!=a},setDisabled:function(a){return a?this.disable():this.enable()},isDisabled:function(){return this.disabled||this.contextDisabled},match:function(a){"function"!=typeof a&&(a=null);this.underMatch_&&!a&&this.underMatch_(this,!0);this.underMatch_=a;a=
!a||a(this);this.matched!=a&&((this.matched=a)?this.emit_match():this.emit_unmatch())},destroy:function(){this.unselect();this.contextSelection=null;this.selection&&this.setSelection();M.prototype.destroy.call(this)}}),X=N(M,k,{className:h+".GroupingNode",emit_childNodesModified:function(a){c.childNodesModified.call(this,a);this.nullGroup.nextSibling=this.firstChild;var d;if(d=a.inserted){a=0;for(var b;b=d[a++];)b.groupId_=b.delegate?b.delegate.basisObjectId:b.data.id,this.map_[b.groupId_]=b;if(this.dataSource&&
this.nullGroup.first){d=this.owner;b=u(this.nullGroup.nodes);for(a=b.length;0<a--;)d.insertBefore(b[a],b[a].nextSibling)}}},emit_ownerChanged:function(a){a&&a.grouping===this&&a.setGrouping(null,!0);this.owner&&this.owner.grouping!==this&&this.owner.setGrouping(this);c.ownerChanged.call(this,a);!this.owner&&this.autoDestroyWithNoOwner&&this.destroy()},map_:null,autoDestroyWithNoOwner:!0,autoDestroyEmptyGroups:!0,groupGetter:e,childClass:O,childFactory:function(a){return new this.childClass(H({autoDestroyIfEmpty:this.dataSource?
!1:this.autoDestroyEmptyGroups},a))},init:function(){this.map_={};this.nullGroup=new O;M.prototype.init.call(this)},getGroupNode:function(a,d){var b=this.groupGetter(a),f=b instanceof y,c=this.map_[f?b.basisObjectId:b];this.dataSource&&(d=!1);!c&&d&&(c=this.appendChild(f?b:{data:{id:b,title:b}}));return c||this.nullGroup},setDataSource:function(a){var d=this.dataSource;k.setDataSource.call(this,a);if((a=this.owner)&&this.dataSource!==d)for(var d=u(a.childNodes),b=d.length-1;0<=b;b--)a.insertBefore(d[b],
d[b+1])},insertBefore:function(a,d){a=k.insertBefore.call(this,a,d);var b=a.first;if(b){for(var f=b.parentNode,c=a.last,e,q,l,m=null,t=a;(t=t.nextSibling)&&!(m=t.first););l=m?m.previousSibling:f.lastChild;e=b.previousSibling;q=c.nextSibling;if(q!==m){var E=f.childNodes,t=a.nodes,A=t.length;e&&(e.nextSibling=q);q&&(q.previousSibling=e);l&&(l.nextSibling=b);m&&(m.previousSibling=c);b.previousSibling=l;c.nextSibling=m;var c=E.indexOf(b),y=m?E.indexOf(m):E.length;y>c&&(y-=A);E.splice(c,A);E.splice.apply(E,
[y,0].concat(t));if(!l||!e)f.firstChild=E[0];if(!m||!q)f.lastChild=E[E.length-1];if(b instanceof O)for(b=A;0<b--;)f.insertBefore(t[b],m),m=t[b]}}return a},removeChild:function(a){if(a=k.removeChild.call(this,a)){delete this.map_[a.groupId_];for(var d=0,b;b=a.nodes[d];d++)b.parentNode.insertBefore(b)}return a},clear:function(a){var d=[],b=this.getGroupNode,f=this.nullGroup;this.getGroupNode=function(){return f};for(var c=this.firstChild;c;c=c.nextSibling)d.push.apply(d,c.nodes);for(var c=0,e;e=d[c];c++)e.parentNode.insertBefore(e);
this.getGroupNode=b;k.clear.call(this,a);this.map_={}},destroy:function(){this.autoDestroyWithNoOwner=!1;M.prototype.destroy.call(this);this.nullGroup.destroy();this.map_=this.nullGroup=null}});M.prototype.groupingClass=X;var W={childNodesModified:function(a,d){var b=this.members_,f={},c,e=0,k=0,q=d.inserted,l=d.deleted;if(q&&q.length)for(f.inserted=q;c=q[e];)b[c.basisObjectId]=c,e++;if(l&&l.length)for(f.deleted=l;c=l[k];)delete b[c.basisObjectId],k++;(e||k)&&this.emit_itemsChanged(f)},destroy:function(){this.destroy()}},
S=N(A,{className:h+".ChildNodesDataset",sourceNode:null,init:function(){A.prototype.init.call(this);var a=this.sourceNode;f[a.basisObjectId]=this;a.firstChild&&W.childNodesModified.call(this,a,{inserted:a.childNodes});a.addHandler(W,this)},destroy:function(){this.sourceNode.removeHandler(W,this);delete f[this.sourceNode.basisObjectId];A.prototype.destroy.call(this)}}),T=N(D,{className:h+".Selection",multiple:!1,emit_itemsChanged:function(a){D.prototype.emit_itemsChanged.call(this,a);if(a.inserted)for(var d=
0,b;b=a.inserted[d];d++)b.selected||(b.selected=!0,b.emit_select());if(a.deleted)for(d=0;b=a.deleted[d];d++)b.selected&&(b.selected=!1,b.emit_unselect())},add:function(a){if(!this.multiple){if(this.itemCount)return this.set(a);a=[a[0]]}for(var d=[],b=0,f;f=a[b];b++)f.contextSelection==this&&f.selectable&&d.push(f);return D.prototype.add.call(this,d)},set:function(a){for(var d=[],b=0,f;f=a[b];b++)f.contextSelection==this&&f.selectable&&d.push(f);this.multiple||d.splice(1);return D.prototype.set.call(this,
d)}});K.exports={DELEGATE:I,AbstractNode:M,Node:U,GroupingNode:X,PartitionNode:O,Selection:T,nullSelection:new A,ChildNodesDataset:S}}],["basis.ua",function(h,K,a,p,J,z,s){function B(a){var h=1E6;a=String(a).split(".");for(var n=0,m=0;4>n&&n<a.length;n++,h/=100)m+=a[n]*h;return m}function r(a){a=a.toLowerCase();if(a in G)return G[a];var h=a.match(/^([a-z]+)(([\d\.]+)([+-=]?))?$/i);if(h){G[a]=!1;var n=h[1].toLowerCase(),m=B(h[3]),h=h[4]||"=";if(n=x[n])return G[a]=!m||"="==h&&n==m||"+"==h&&n>=m||"-"==
h&&n<m}return!1}var n=p.document;h=p.navigator&&p.navigator.userAgent||"";p=p.opera;var x={},G={},F="unknown";J={MSIE:["Internet Explorer","msie","ie"],Gecko:["Gecko","gecko"],Safari:["Safari","safari"],"iPhone OS":["iPhone","iphone"],AdobeAir:["AdobeAir","air"],AppleWebKit:["WebKit"],Chrome:["Chrome","chrome"],FireFox:["FireFox","firefox","ff"],Iceweasel:["FireFox","firefox","ff"],Shiretoko:["FireFox","firefox","ff"],Opera:["Opera","opera"]};for(var L in J)if(!("MSIE"==L&&p)&&!("Safari"==L&&/chrome/i.test(h))&&
!("AppleWebKit"==L&&/iphone/i.test(h))&&h.match(RegExp(L+".(\\d+(\\.\\d+)*)","i"))){z=J[L];F=p&&"function"==typeof p.version?p.version():RegExp.$1;s=B(F);for(var F=z[0]+" "+F,C=0;C<z.length;C++)x[z[C].toLowerCase()]=s}a.platformFeature.datauri=!1;"undefined"!=typeof Image&&function(){var h=new Image;h.onload=function(){a.platformFeature.datauri=!0};h.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=="}();if(r("IE7-"))try{n.execCommand("BackgroundImageCache",!1,!0)}catch(N){}K.exports=
{prettyName:F,test:function(){return a.array(arguments).some(r)},is:r,cookies:{set:function(a,h,r,m){n.cookie=a+"="+(null==h?"":escape(h))+";path="+(m||(0==location.pathname.indexOf("/")?"":"/")+location.pathname)+(r?";expires="+(new Date(Date.now()+1E3*r)).toGMTString():"")},get:function(a){return(a=n.cookie.match(RegExp("(^|;)\\s*"+a+"\\s*=\\s*(.*?)\\s*(;|$)")))&&unescape(a[2])},remove:function(a,h){n.cookie=a+"=;expires="+(new Date(0)).toGMTString()+";path="+(h||(0==location.pathname.indexOf("/")?
"":"/")+location.pathname)}}}}],["basis.dom",function(h,K,a,p,J,z,s){function B(a,b,d){return null!=b?a.insertBefore(v(b)?b:F(b),d||null):null}function r(a,b){return a.outerHTML||C("",b?a:a.cloneNode(!0)).innerHTML}function n(a){return a&&(v(a)||a.nodeType)?a:"string"==typeof a?m.getElementById(a):null}function x(a,b){var d=n(a)||m;return"*"==b&&d.all?e(d.all):e(d.getElementsByTagName(b||"*"))}function G(b,d,e){var g,l=[];e="string"==typeof e?c(e):e||a.fn.$true;d&(I|y|D)&&e(b)&&l.push(b);switch(d){case Q:case y:for(g=
b;(g=g[k])&&g!==b.document;)e(g)&&l.push(g);break;case q:for(g=b[U];g;)e(g)&&l.push(g),g=g[X];break;case A:case D:b[U]&&(d=new R(b),d.nodes(e,l));break;case E:d=new R(b,e);for(d.cursor_=b[X]||b[k];g=d.next();)l.push(g);break;case P:for(g=b;g=g[X];)e(g)&&l.push(g);break;case f:e(b[k])&&l.push(b[k]);break;case M:d=new R(b,e,R.BACKWARD);for(d.cursor_=b[W]||b[k];g=d.next();)l.push(g);break;case O:for(g=b;g=g[W];)e(g)&&l.push(g)}return l}function F(a){return m.createTextNode(null!=a?a:"")}function L(){for(var a=
m.createDocumentFragment(),b=arguments.length,d=L.array=[],f=0;f<b;f++)d.push(B(a,arguments[f]));return a}function C(b){var d=void 0!=b&&"string"!=typeof b,f=(d?b.description:b)||"",c="div",g=f.match(/^([a-z0-9_\-]+)(.*)$/i);g&&(c=g[1],f=g[2]);if(""!=f){for(var k=[],q={},l;g=ea.exec(f);){if(g[8])throw 27;l=g[1]||g[2]||g[3];g[1]?q.id=l:g[2]?k.push(l):"class"!=l&&(q[l]=g[4]?g[5]||g[6]||g[7]||"":l)}ba&&(q.name&&/^(input|textarea|select)$/i.test(c))&&(c="<"+c+" name="+q.name+">")}f=m.createElement(c);
if(q){q.style&&aa&&(f.style.cssText=q.style);for(var E in q)f.setAttribute(E,q[E],0)}k&&k.length&&(f.className=k.join(" "));1<arguments.length&&B(f,L.apply(0,e(arguments,1).flatten()));if(d&&(b.css&&a.cssom&&a.cssom.setStyle(f,b.css),a.dom.event))for(var v in b)"function"==typeof b[v]?a.dom.event.addHandler(f,v,b[v],f):b[v]instanceof a.dom.event.Handler&&a.dom.event.addHandler(f,v,b[v].handler,b[v].thisObject);return f}function N(a,b,f,c){a=n(a);if(!a)throw 28;switch(f){case void 0:case T:c=null;
break;case S:c=a[U];break;case g:break;case d:c=c[X];break;default:c=Number(f).between(0,a.childNodes.length)?a.childNodes[f]:null}f=!v(a);if(!b||!Array.isArray(b))f=f?b&&a.insertBefore(b,c):B(a,b,c);else if(f){f=[];for(var e=0,k=b.length;e<k;e++)f[e]=a.insertBefore(b[e],c)}else a.insertBefore(L.apply(0,b),c),f=L.array;return f}function H(a,b){return a[k]?a[k].replaceChild(b,a):a}function u(a){if(m.selection){var b=m.selection.createRange();0!=b.compareEndPoints("StartToEnd",b)&&b.collapse(a);return b.getBookmark().charCodeAt(2)-
2}return 0}function w(a){a||(a=m||{head:null});return a.head||x(a,"head")[0]}h=this.path;var m=p.document;p=a.Class;var e=a.array.from,c=a.getter,l=m.createElement("div"),Q=1,y=2,A=4,D=8,I=16,f=32,q=64,E=128,P=256,M=512,O=1024,k="parentNode",U="firstChild",X="nextSibling",W="previousSibling",S="begin",T="end",g="before",d="after",b;b="function"==typeof l.compareDocumentPosition?function(a,b){return a.compareDocumentPosition(b)}:function(a,b){return a==b?0:a.document!=b.document?33:a.sourceIndex>b.sourceIndex?
2|8*b.contains(a):4|16*a.contains(b)};var v;"undefined"!=typeof Node?(v=function(a){return a instanceof Node},Node.prototype.contains||(Node.prototype.contains=function(a){return!!(this.compareDocumentPosition(a)&16)})):v=function(a){return a&&a.ownerDocument===m};var R=p(null,{className:h+".TreeWalker",root_:null,cursor_:null,filter:a.fn.$true,init:function(a,b,d){this.setRoot(a);this.setDirection(d);"function"==typeof b&&(this.filter=b)},setDirection:function(b){a.object.extend(this,b?{a:"lastChild",
b:W,c:X,d:U}:{a:U,b:X,c:W,d:"lastChild"})},setRoot:function(a){this.root_=a||m;this.reset()},reset:function(){this.cursor_=null},first:function(a){this.reset();return this.next(a)},last:function(a){this.reset();return this.prev(a)},nodes:function(a,b){var d;b||(b=[]);for(this.reset();d=this.next(a);)b.push(d);return b},next:function(a){a=a||this.filter;var b=this.cursor_||this.root_;do for(var d=b[this.a];!d;){if(b===this.root_)return this.cursor_=null;(d=b[this.b])||(b=b[k])}while(!a(b=d));return this.cursor_=
b},prev:function(a){a=a||this.filter;var b=this.cursor_,d=this.c,f=this.d;do{var c=b?b[d]:this.root_[f];if(c){for(;c[f];)c=c[f];b=c}else b&&(b=b[k]);if(!b||b===this.root_){b=null;break}}while(!a(b));return this.cursor_=b},destroy:function(){this.cursor_=this.root_=null}});R.BACKWARD=!0;var $="textContent innerText nodeValue".qw(),ba=function(){var a=m.createElement("input");a.name="a";return!/name/.test(r(a))}(),aa;l.setAttribute("style","color: red");aa="red"!==l.style.color;var ea=/#([a-z0-9_:\-]+)|\.([a-z0-9_:\-]+)|\[([a-z0-9_:\-]+)(="((?:\\.|[^"])*)"|='((?:\\.|[^'])*)'|=((?:\\.|[^\]])*))?\s*\]|\s*(\S)/gi;
K.exports={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_TYPE_NODE:10,DOCUMENT_NODE:9,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12,AXIS_ANCESTOR:Q,AXIS_ANCESTOR_OR_SELF:y,AXIS_DESCENDANT:A,AXIS_DESCENDANT_OR_SELF:D,AXIS_SELF:I,AXIS_PARENT:f,AXIS_CHILD:q,AXIS_FOLLOWING:E,AXIS_FOLLOWING_SIBLING:P,AXIS_PRECEDING:M,AXIS_PRECEDING_SIBLING:O,INSERT_BEGIN:S,INSERT_END:T,INSERT_BEFORE:g,INSERT_AFTER:d,
TreeWalker:R,outerHTML:r,textContent:function(a){for(var b=0,d;d=$[b++];)if(null!=a[d])return a[d];return G(a,A,function(a){return 3==a.nodeType}).map(c("nodeValue")).join("")},get:n,tag:x,axis:G,findAncestor:function(a,b,d){for(;a&&a!==d&&!b(a);)a=a.parentNode;return a||null},createElement:C,createText:F,createFragment:L,insert:N,remove:function(a){return a[k]?a[k].removeChild(a):a},replace:H,swap:function(a,d){if(a===d||b(a,d)&25)return!1;H(a,l);H(d,a);H(l,d);return!0},clone:function(a,b){var d=
a.cloneNode(!b);d.attachEvent&&G(d,D).forEach(Event.clearHandlers);return d},clear:function(a){for(a=n(a);a.lastChild;)a.removeChild(a.lastChild);return a},wrap:function(b,d,f){var c=[];f=a.getter(f||a.fn.$self);for(var e in d)for(var g=0;g<b.length;g++){var k=f(b[g]);c[g]=d[e](b[g],g,k)?C(e,k):b[g]}return c},setAttribute:function(a,b,d){null==d?a.removeAttribute(b):a.setAttribute(b,d)},parentOf:function(a,b){return a.contains(b)},isInside:function(a,b){return a==b||b.contains(a)},focus:function(a,
b){try{a=n(a),a.focus(),b&&a.select&&a.select()}catch(d){}},setSelectionRange:function(a,b,d){3>arguments.length&&(d=b);if(a.setSelectionRange)a.setSelectionRange(b,d);else if(a.createTextRange){var f=a.createTextRange();f.collapse(!0);f.moveStart("character",b);f.moveEnd("character",d-b);f.select()}},getSelectionStart:function(a){return"undefined"!=typeof a.selectionStart?a.selectionStart:u(!0)},getSelectionEnd:function(a){return"undefined"!=typeof a.selectionEnd?a.selectionEnd:u(!1)},head:w,body:function(a){a||
(a=m||{body:null});return a.body||x(a,"body")[0]},appendHead:function(a){m&&N(w(),a)}}}],["basis.cssom",function(h,K,a,p,J,z,s){function B(a,b){return x(b,!0).createRule(a)}function r(a,b){var d=a.match(/^([^{]+)\{(.*)\}\s*$/);if(d){for(var f=d[1].trim().split(/\s*,\s*/),c=0;c<f.length;c++)this.addRule(f[c],d[2]||null,b++);return b-1}}function n(a,b){var d=y.createElement(!a?'style[type="text/css"]':'link[type="text/css"][rel="{alt}stylesheet"][href={url}]'.format({alt:b?"alternate ":"",url:a.quote('"')}));
y.appendHead(d);d=d.sheet||d.styleSheet;try{d.cssRules||(d.cssRules=d.rules)}catch(f){}d.insertRule||(d.insertRule=r);d.deleteRule||(d.deleteRule=d.removeRule);return d}function x(a,b){a||(a="DefaultGenericStyleSheet");f[a]||b&&(f[a]=new M(n()));return f[a]}function G(b,d,f,c){c=c||{};d=d.qw();for(var e=0,g;g=d[e];e++)if("undefined"!=typeof P.style[g]){f&&(a.platformFeature["css-"+b]=g);E[b]={key:g,getter:c[g]};break}}function F(a,b,d){var f;var c=b;f=(c=(f=E[c])?f.key:c.replace(/^-ms-/,"ms-").camelize())?
{key:c,value:f&&f.getter?f.getter(d):d}:null;if(f){var c=f.key,e=!!A.test(d);d=a.style;var g;if(!(g=e))g=d.getPropertyPriority?d.getPropertyPriority(b)==D:!1;if(g)if(f.value=f.value.replace(A,""),d.setProperty)e||d.removeProperty(c),d.setProperty(c,f.value,e?D:"");else{a=c+": "+f.value+(e?" !"+D:"")+";";b=d[c]?c+"\\s*:\\s*"+d[c]+"(\\s*!"+D+")?\\s*;?":"^";try{d.cssText=d.cssText.replace(RegExp(b,"i"),a)}catch(k){}}else{if(q)try{a.style[f.key]=f.value}catch(l){}else a.style[f.key]=f.value;return a.style[f.key]}}}
function L(a,b){return F(a,"display","string"==typeof b?b:b?"":"none")}function C(a,b){return F(a,"visibility",b?"":"hidden")}function N(a){return function(){for(var b=0,d;d=this.rules[b];b++)d[a].apply(d,arguments)}}function H(a){return X[a]||(X[a]=RegExp("\\s*\\b"+a+"\\b"))}function u(a,b){var d=(b?"g":"s")+a;return S[d]||(S[d]=RegExp((b?"":"\\s*")+"\\b"+a+"\\S*\\b"))}function w(a){R.setAttribute("href",a);y.insert($,R,0)}function m(){R.setAttribute("href",c.href);y.remove(R)}function e(a){return function(b){return 0==
b||isNaN(b)?"0":b+a}}z=this.path;s=p.document;var c=p.location,l=a.path,Q=a.array.from;h=a.Class;J=a.cleaner;var y=a.dom;s=(p=p.DOMTokenList)&&s&&s.documentElement.classList instanceof p;var A=/\s*!important/i,D="important",I=1,f={},q=function(){var a=y.createElement();try{a.style.width="badvalue"}catch(b){return!0}return!1}(),E={},P=y.createElement("DIV");G("opacity","opacity filter",!0,{filter:function(a){return"alpha(opacity:"+parseInt(100*a,10)+")"}});G("float","cssFloat styleFloat");var M=h(null,
{className:z+".StyleSheet",styleSheet:null,rules:null,init:function(a){this.styleSheet=a;this.rules=[]},createRule:function(a){var b=this.styleSheet,d=this.rules.length;b.insertRule(a+"{}",d);a=Q(b.cssRules,d);a=a[1]?new k(a,this):new O(a[0],this);this.rules.push.apply(this.rules,a.rules||[a]);return a},deleteRule:function(a){if(a instanceof k)a.rules.forEach(this.deleteRule,this);else{var b=this.rules.indexOf(a);-1!=b&&(this.rules.splice(b,1),this.styleSheet.deleteRule(b))}a.owner=null;a.destroy()},
destroy:function(){this.rules.forEach(function(a){a.destroy()});this.rules=this.styleSheet=null}}),O=h(null,{className:z+".Rule",rule:null,selector:"",init:function(a,b){this.owner=b;this.rule=a;this.selector=a.selectorText},setProperty:function(a,b){F(this.rule,a,b)},setStyle:function(b){a.object.iterate(b,this.setProperty,this)},clear:function(){this.rule.style.cssText=""},destroy:function(){this.owner&&this.owner.deleteRule(this);this.rule=this.owner=null}}),k=h(null,{className:z+".RuleSet",rules:null,
init:function(a,b){this.owner=b;this.rules=a.map(function(a){return new O(a,this)},this)},createRule:function(a){a=this.owner.createRule(a);this.rules.push(a);a.owner=this;return a},deleteRule:function(a){var b=this.rules.indexOf(a);-1!=b&&(this.rules.splice(b,1),this.owner.deleteRule(a))},setProperty:N("setProperty"),setStyle:N("setStyle"),clear:N("clear"),destroy:function(){this.owner&&this.owner.deleteRule(this);this.rules=this.owner=null}}),U,X={},W=h(null,{className:z+".ClassList",init:function(a){this.element=
a},set_:function(a){var b=this.element.className;return"string"==typeof b?this.element.className=a:b.baseVal=a},toString:function(){var a=this.element.className;return"string"==typeof a?a:a.baseVal},set:function(a){this.clear();a.qw().forEach(this.add,this)},replace:function(a,b,d){d=d||"";"undefined"!=typeof a&&this.remove(d+a);"undefined"!=typeof b&&this.add(d+b)},bool:function(a,b){b?this.add(a):this.remove(a)},clear:function(){this.set_("")},contains:function(a){return!!this.toString().match(H(a))},
item:function(a){return this.toString().qw()[a]},add:function(a){var b=this.toString();b.match(H(a))||this.set_(b+" "+a)},remove:function(a){var b=this.toString();a=b.replace(H(a),"");a!=b&&this.set_(a)},toggle:function(a){var b=this.contains(a);b?this.remove(a):this.add(a);return!b}}),S={},T=h(null,{className:z+".ClassListNS",delim:"-",init:function(a,b){this.classList=b;this.prefix=a+this.delim},add:function(a){this.classList.add(this.prefix+a)},remove:function(a){this.classList.remove(this.prefix+
a)},items:function(){var a=this.classList.toString();return a?a.match(u(this.prefix,!0)):null},set:function(a){var b=this.items();a="undefined"!=typeof a?this.prefix+a:"";var d=this.classList;if(b)if(1==b.length){if(b[0]===a)return;d.remove(b[0])}else this.clear();a&&d.add(a)},clear:function(){this.items().forEach(this.classList.remove,this.classList)}});s?(z=W.prototype,a.object.extend(p.prototype,{set:z.set,replace:z.replace,bool:z.bool,clear:function(){for(var a=this.length;0<a;)this.remove(this[--a])},
setPrefixToken:z.setPrefixToken}),U=function(a){return("string"==typeof a?y.get(a):a).classList}):U=function(a){return new W("string"==typeof a?y.get(a):a)};var g={},d=!0,b;try{b=!y.createElement("style","")}catch(v){b=!0}var R=y.createElement("base"),$=y.head(),ba=h(null,{inUse:0,url:"",baseURI:"",cssText:"",resource:null,element:null,textNode:null,init:function(a){this.url=l.resolve(a);this.baseURI=l.dirname(a)+"/";g[a]=this},updateCssText:function(a){this.cssText!=a&&(this.cssText=a,this.inUse&&
(w(this.baseURI),this.syncCssText(),m()))},syncCssText:function(){this.textNode?this.textNode.nodeValue=this.cssText:this.element.styleSheet.cssText=this.cssText},startUse:function(){if(!this.inUse){if(!this.resource){var d=a.resource(this.url);this.resource=d;this.cssText=d.get(!0)}w(this.baseURI);this.element||(this.element=y.createElement('style[src="'+l.relative(this.url)+'"]'),b||(this.textNode=y.insert(this.element,"")));y.appendHead(this.element);this.syncCssText();m()}this.inUse+=1},stopUse:function(){this.inUse&&
((this.inUse-=1)||y.remove(this.element))},destroy:function(){this.element&&d&&y.remove(this.element);this.cssText=this.resource=this.textNode=this.element=null}});a.resource.extensions[".css"]=function(a,b){var d=g[b];d?d.updateCssText(a):d=new ba(b);return d};a.resource.extensions[".css"].updatable=!0;J.add({destroy:function(){d=!1;for(var a in g)g[a].destroy();g=null}});K.exports={setStyleProperty:F,setStyle:function(a,b){for(var d in b)F(a,d,b[d]);return a},classList:function(a,b){return b?new T(b,
U(a)):U(a)},uniqueRule:function(a){var b="genericRule-"+I++;a&&U(a).add(b);a=B("."+b);a.token=b;return a},createRule:B,getStyleSheet:x,addStyleSheet:n,StyleSheet:M,Rule:O,RuleSet:k,display:L,visibility:C,em:e("em"),ex:e("ex"),px:e("px"),percent:e("%"),show:function(a){return L(a,!0)},hide:function(a){return L(a)},visible:function(a){return C(a,!0)},invisible:function(a){return C(a)}}}],["basis.template",function(h,K,a,p,J,z,s){function B(b){ea[c.extname(b)]&&a.resource(b)().startUse()}function r(b){ea[c.extname(b)]&&
a.resource(b)().stopUse()}function n(){this.instances_&&C.call(this);for(var a=0,b;b=this.attaches_[a];a++)b.handler.call(b.context)}function x(a){for(var b=[],d=0;d<a.length;d++)b.push(Array.isArray(a[d])?x(a[d]):a[d]);return b}function G(b,d,f,c){var e=b;"function"==typeof e&&(d="baseURI"in b?b.baseURI:d,e=e());e instanceof a.Token&&(d="baseURI"in b?b.baseURI:d,e=e.get());if(Array.isArray(e))f&&(e=x(e)),e={tokens:e};else if("object"!=typeof e||!Array.isArray(e.tokens))e=String(e);"string"==typeof e&&
(e=aa(e,d,c));return e}function F(a,b){return function(){for(var d=0,f;f=a[d];d++)this.tmpl.set(f,b[f](this))}}function L(a){var b={};return function(d,f){var c="bindingId"in d?d.bindingId:null,e=b[c];if(!e){for(var e=[],g={},k={},q,l=0,t;t=a[l];l++){var m=d[t],E=m&&m.getter;if(E&&(g[t]=E,e.push(t),m.events)){m=m.events;Array.isArray(m)||(m=String(m).qw());for(var E=0,v;v=m[E];E++)k[v]?k[v].push(t):(q=q||{},k[v]=[t],q[v]=F(k[v],g))}}e={names:e,events:k,sync:F(e,g),handler:q};c&&(b[c]=e)}return e}}
function C(){var b=G(this.source,this.baseURI),d=this.instances_,f=this.builder(b.tokens),c=this.l10n_,e=this.deps_;if(e){this.deps_=null;for(var g=0,k;k=e[g];g++)k.bindingBridge.detach(k,C,this)}if(b.deps&&b.deps.length){this.deps_=e=b.deps;for(g=0;k=e[g];g++)k.bindingBridge.attach(k,C,this)}if(c){this.l10n_=null;for(g=0;e=c[g];g++)e.token.detach(e.handler,e)}this.createInstance=f.createInstance;this.getBinding=L(f.keys);this.instances_=f.map;var q=f.l10nProtoSync;if(c=b.resources&&0<b.resources.length)for(g=
0;e=b.resources[g];g++)B(e);if(this.resources)for(g=0;e=this.resources[g];g++)r(e);this.resources=c&&b.resources;if(d)for(var l in d)d[l].rebuild_();if(f.l10nKeys){this.l10n_=c=[];d=f.map;for(g=0;b=f.l10nKeys[g];g++)e={path:b,token:a.l10n.token(b),handler:function(a){q(this.path,a);for(var b in d)d[b].set(this.path,a)}},e.token.attach(e.handler,e),c.push(e)}}function N(a){return function(){var b;b=(b=document.getElementById(a))&&"SCRIPT"==b.tagName?"text/basis-template"==b.type?b.textContent||b.text:
"":"";return b}}function H(){var b=a.array(arguments).join("."),d=ca[b];d||(d=new ia("",b),ca[b]=d);return d}function u(a,b){for(var d=[],f={},c=[],e=0;e<b.length;e++)f[b[e]]||(f[b[e]]=!0,c.push(b[e]));d.source=c.join("/");f={base:!0};for(c=0;c<b.length;c++)e=b[c]||"base",e==a||f[e]||(m(e),f[e]=!0,d.push(e),b.splice.apply(b,[c+1,0].concat(Y[e].fallback)));d.unshift(a);"base"!=a&&d.push("base");d.value=d.join("/");return d}function w(a,b){for(var d=Y[a].sourcesList,f=0,c;c=d[f];f++)if(c.hasOwnProperty(b))return c[b];
return""}function m(b){b||(b="base");if(Y[b])return Y[b].theme;if(!/^([a-z0-9\_\-]+)$/.test(b))throw 32;var d={},f=[d],e=new ga;Y[b]={theme:e,sources:d,sourcesList:f,fallback:[]};var g=function(a,f){!1==a in d&&(d[a]=f,Y[da].fallback.has(b)&&H(a).set());return H(a)};a.object.extend(e,{name:b,fallback:function(a){if(e!==fa&&0<arguments.length){var d="string"==typeof a?a.split("/"):[],f={},d=u(b,d);if(Y[b].fallback.source!=d.source){Y[b].fallback.source=d.source;for(var c in Y){var g=Y[c].fallback,
d=u(c,(g.source||"").split("/"));if(d.value!=g.value){f[c]=!0;Y[c].fallback=d;g=Y[c].sourcesList;g.length=d.length;for(var k=0;k<g.length;k++)g[k]=Y[d[k]].sources}}}for(c in f)if(Y[da].fallback.has(c)){d=void 0;for(d in ca)H(d).set();break}}d=Y[b].fallback.slice(1);d.source=Y[b].fallback.source;return d},define:function(a,b){"function"==typeof a&&(a=a());if("string"==typeof a){if("object"==typeof b){var d=a,f=b,c={},k;for(k in f)f.hasOwnProperty(k)&&(c[k]=g(d+"."+k,f[k]));return c}return 1==arguments.length?
H(a):g(a,b)}if("object"==typeof a){f=a;for(d in f)f.hasOwnProperty(d)&&g(d,f[d]);return e}},apply:function(){if(b!=da){da=b;for(var a in ca)H(a).set();a=0;for(var d;d=ha[a];a++)d.fn.call(d.context,b)}return e},getSource:function(a){return a?w(b,c):d[c]},drop:function(a){d.hasOwnProperty(a)&&(delete d[a],Y[da].fallback.has(b)&&H(a).set())}});Y[b].fallback=u(b,[]);f.push(Y.base.sources);return e}h=this.path;p=a.Class;var e=a.cleaner,c=a.path,l=[],Q={},y=1,A=2,D=4,I=6,f=3,q=8,E=0,P=1,M=2,O=3,k=4,U={4:"class",
5:"style"},X={"class":D,style:5},W=4,S=/((?:.|[\r\n])*?)(\{(?:l10n:([a-zA-Z_][a-zA-Z0-9_\-]*(?:\.[a-zA-Z_][a-zA-Z0-9_\-]*)*)\})?|<(\/|!--(\s*\{)?)?|$)/g,T=/([a-z_][a-z0-9\-_]*)(:|\{|\s*(\/?>)?)/ig,g=/([a-z_][a-z0-9_\-]*)(:|\{|=|\s*)|(\/?>)/ig,d=/(.|[\r\n])*?--\x3e/g,b=/([a-z_][a-z0-9_\-]*(?::[a-z_][a-z0-9_\-]*)?)>/ig,v=/([a-z_][a-z0-9_]*)(\||\}\s*)/ig,R=/"((?:(\\")|[^"])*?)"\s*/g,$=/\\"/g,ba=function(a){var c=[],e=[],k={childs:c},l,t,m,E,O=!1,h=0,P,n=S,D=0,M;a=a.trim();try{for(;D<a.length||n!=S;)if(E=
n.lastIndex=D,M=n.exec(a),!M||M.index!==D)if(n==v&&t&&t.type==q)n=d;else{O&&(k=e.pop());t&&k.childs.pop();if(t=k.childs.pop())t.type==f&&!t.refs?h-="len"in t?t.len:t.value.length:k.childs.push(t);O=!1;n=S}else{D=n.lastIndex;switch(n){case S:P=E+M[1].length;h!=P&&(l=h==E?M[1]:a.substring(h,P),(t=l.replace(/\s*(\r\n?|\n\r?)\s*/g,""))&&k.childs.push({type:f,len:l.length,value:t}));h=P;M[3]?k.childs.push({type:f,refs:["l10n:"+M[3]],value:"{l10n:"+M[3]+"}"}):"{"==M[2]?(m=D-1,k.childs.push(t={type:f}),
n=v):M[4]?"/"==M[4]?(t=null,n=b):(k.childs.push(t={type:q}),M[5]?(m=D-M[5].length,n=v):(m=D,n=d)):M[2]&&(O=!0,e.push(k),k.childs.push(t={type:y,attrs:[],childs:[]}),k=t,n=T);break;case b:M[1]!==(k.prefix?k.prefix+":":"")+k.name?k.childs.push({type:f,value:"</"+M[0]}):k=e.pop();n=S;break;case T:case g:if(":"==M[2]){if(t.prefix)throw 29;t.prefix=M[1];break}M[1]&&(t.name=M[1],t.type==A&&k.attrs.push(t));if("{"==M[2]){n=v;break}if(M[3]){"/>"==M[3]&&(k=e.pop());O=!1;n=S;break}if("="==M[2]){n=R;break}t=
{type:A};n=g;break;case d:t.value=a.substring(m,D-3);n=S;break;case v:t.refs?t.refs.push(M[1]):t.refs=[M[1]];"|"!=M[2]&&(t.type==f?(D-=M[2].length-1,t.value=a.substring(m,D),n=S):t.type==q?n=d:t.type==A&&"="==a[D]?(D++,n=R):(t={type:A},n=g));break;case R:t.value=M[1].replace($,'"');t={type:A};n=g;break;default:throw 30;}n==S&&(h=D)}h!=D&&k.childs.push({type:f,value:a.substring(h,D)});if(1<e.length)throw 31;c.templateTokens=!0}catch(I){}return c},aa=function(){function b(a){return(a.prefix?a.prefix+
":":"")+a.name}function d(a,b){S[b]||("#"==b.charAt(0)?S[b]=String.fromCharCode("x"==b.charAt(1)||"X"==b.charAt(1)?parseInt(b.substr(2),16):b.substr(1)):V&&(V.innerHTML=a,S[b]=V.firstChild?V.firstChild.nodeValue:a));return S[b]||a}function e(a){a=a.refs;return!a||!a.length?0:a}function g(a,b){function f(a){for(var b,c=[],e=[],g={},k=0;k<a.length;k++)k%2?(b=a[k],g[b]||(g[b]=c.length,c.push(b)),e.push(g[b])):a[k]&&e.push(a[k].replace(B,d));return[c,e]}var c=0,e,k;if(b)switch(a){case "class":if(e=b.match(R)){for(var q=
[],c=[],l=0,t;t=e[l];l++)(k=t.match(C))?c.push([k[1]||"",k[2]]):q.push(t);b=q.join(" ")}break;case "style":q=[];c=[];if(e=b.match(p))for(l=0;t=e[l];l++)k=t.match(Z),t=k[1],b=k[2].trim(),k=b.split(u),1<k.length?(k=f(k),k.push(t),c.push(k)):q.push(t+": "+b.replace(B,d));q.push("");b=q.join(";");break;default:e=b.split(u),1<e.length?c=f(e):b=b.replace(B,d)}c&&!c.length&&(c=0);return{binding:c,value:b,type:X[a]||2}}function t(a,d,f){a=a.attrs;for(var c=[],k,q=0,l;l=a[q];q++)if("b"==l.prefix)switch(l.name){case "ref":l=
(l.value||"").trim().split(/\s+/);for(k=0;k<l.length;k++)m(d,l[k])}else if(k=l.name.match(/^event-(.+)$/))c.push(k[1]==l.value?[I,k[1]]:[I,k[1],l.value]);else{k=g(l.name,l.value);var E=[k.type,k.binding,e(l)];2==k.type&&E.push(b(l));k.value&&(!f||!k.binding||2!=k.type)&&E.push(k.value);c.push(E)}return c.length?c:0}function m(a,b){a[M]||(a[M]=[]);a[M].add(b);"element"!=b&&(a[P]=1==a[M].length?b:0)}function v(a,b){var d=a[M].indexOf(b);if(-1!=d){var f=a[P]&&"number"==typeof a[P];a[M].splice(d,1);f&&
d==a[P]-1&&(a[P]=b);a[M].length?f&&(a[P]-=d<a[P]-1):a[M]=0}}function h(a){var d={};if(a.attrs)for(var f=0,c;c=a.attrs[f];f++)d[b(c)]=c.value;return d}function n(a,b){for(var d=0;d<b.length;d++)a.add(b[d])}function r(M,D,I){function w(a,b,d){a=h(a);b&&(a.name=b);if(a.name&&x.test(a.name)){var f=T[a.ref||"element"];if(f&&f.token[E]==y){b=f.token;var c=X[a.name],e=k-!!c,q=b&&b.search(a.name,function(a){return c?U[a[E]]:a[O]});!q&&"remove"!=d&&(q=[c||A,0,0],c||q.push(a.name),q.push(""),b||(b=[],f.token.push(b)),
b.push(q));f="class"==a.name||"style"==a.name;switch(d){case "set":d=g(a.name,a.value);q[P]=d.binding;!I.optimizeSize||!q[P]||f?q[e]=d.value||"":q.length=e;if(f&&!q[P]&&!q[e]){b.remove(q);break}break;case "append":d=g(a.name,a.value);if(d.binding){var l=q[P];if(l){if("style"==a.name){for(var t={},m=0,v;v=d.binding[m];m++)t[v[2]]=!0;v=m=0;for(var n;n=l[m];m++)t[n[2]]||(l[v++]=n);l.length=v}l.push.apply(l,d.binding)}else q[P]=d.binding}d.value&&(q[e]+=(q[e]&&"class"==a.name?" ":"")+d.value);if(f&&!q[P]&&
!q[e]){b.remove(q);break}break;case "remove":q&&b.remove(q)}}}}for(var R=[],C=0,p,Z;p=M[C];C++){var u=e(p),S=u&&1==u.length?u[0]:0;switch(p.type){case y:if("b"==p.prefix){var V=h(p);switch(p.name){case "resource":case "style":V.src&&D.resources.push(c.resolve(D.baseURI+V.src));break;case "define":if("name"in V&&!D.defines[V.name])switch(V.type){case "bool":D.defines[V.name]=["true"==V["default"]?1:0];break;case "enum":p=V.values?V.values.qw():[],D.defines[V.name]=[p.indexOf(V["default"])+1,p]}break;
case "include":if(V.src&&(S=(u=/^#\d+$/.test(V.src))?V.src.substr(1):V.src,-1==F.indexOf(S))){F.push(S);u?(u=l[S],D.deps.add(u),u.source.bindingBridge&&D.deps.add(u.source),u=G(u.source,u.baseURI,!0,I)):(u=/^[a-z0-9\.]+$/i.test(S)&&!/\.tmpl$/.test(S)?H(S):a.resource(c.resolve(D.baseURI+S)),D.deps.add(u),u=G(u.get(),u.url?c.dirname(u.url)+"/":"",!0,I));F.pop();u.resources&&!1=="no-style"in V&&n(D.resources,u.resources);u.deps&&n(D.deps,u.deps);var T=Q(u.tokens),S=(p.childs||[]).slice();V["class"]&&
S.push({type:y,prefix:"b",name:"append-class",attrs:[{type:A,name:"value",value:V["class"]}]});V.id&&S.push({type:y,prefix:"b",name:"set-attr",attrs:[{type:A,name:"name",value:"id"},{type:A,name:"value",value:V.id}]});V.ref&&T.element&&V.ref.trim().split(/\s+/).map(function(a){m(T.element.token,a)});for(var V=0,s;s=S[V];V++)if(s.type==y&&"b"==s.prefix)switch(s.name){case "replace":case "before":case "after":var z=h(s);if(p=z.ref&&T[z.ref]){var z=p.owner.indexOf(p.token),N;-1!=z&&(z+="after"==s.name,
N="replace"==s.name,p.owner.splice.apply(p.owner,[z,N].concat(r(s.childs,D,I)||[])))}break;case "prepend":case "append":z=h(s);if((p=(p=(p="ref"in z?z.ref:"element")&&T[p])&&p.token)&&p[E]==y)z=r(s.childs,D,I)||[],"prepend"==s.name?p.splice.apply(p,[W,0].concat(z)):p.push.apply(p,z);break;case "attr":case "set-attr":w(s,!1,"set");break;case "append-attr":w(s,!1,"append");break;case "remove-attr":w(s,!1,"remove");break;case "class":case "append-class":w(s,"class","append");break;case "set-class":w(s,
"class","set");break;case "remove-class":w(s,"class","remove");break;case "add-ref":z=h(s);(p=(p=(p="ref"in z?z.ref:"element")&&T[p])&&p.token)&&z.name&&m(p,z.name);break;case "remove-ref":z=h(s),(p=(p=(p="ref"in z?z.ref:"element")&&T[p])&&p.token)&&v(p,z.name||z.ref)}else u.tokens.push.apply(u.tokens,r([s],D,I)||[]);T.element&&v(T.element.token,"element");R.push.apply(R,u.tokens)}}continue}Z=[1,S,u,b(p)];Z.push.apply(Z,t(p,Z,I.optimizeSize)||[]);Z.push.apply(Z,r(p.childs,D,I)||[]);break;case f:u&&
(2==u.length&&u.search("element"))&&(S=u[+!Array.lastSearchIndex]);Z=[3,S,u];(!u||p.value!="{"+u.join("|")+"}")&&Z.push(p.value.replace(B,d));break;case q:if(I.optimizeSize&&!S&&!u)continue;Z=[8,S,u];I.optimizeSize||(!u||p.value!="{"+u.join("|")+"}")&&Z.push(p.value.replace(B,d))}for(;0===Z[Z.length-1];)Z.pop();R.push(Z)}return R.length?R:0}function Q(a,b,d){b||(b={});d=d||0;for(var f;f=a[d];d++)if(f[E]!=I){var c=f[M];if(c)for(var e=c.length-1,g;g=c[e];e--)-1!=g.indexOf(":")?v(f,g):(b[g]&&v(b[g].token,
g),f[P]==g&&(f[P]=e+1),b[g]={owner:a,token:f});f[E]==y&&Q(f,b,W)}return b}function w(a,b,d,f){var c=0;f=f||0;for(var e;e=a[f];f++)if(e[E]==y&&(c+=w(e,b,d,W)),e[E]==D||e[E]==A&&"class"==e[O]){var g=e[P],q=k-(e[E]==D);if(g){for(var l=(e[q]||"").qw(),t=0,m;m=g[t];t++)if(!(2<m.length)){var v=m[1].split(":").pop(),h=b.defines[v];h?(m.push.apply(m,h),h.used=!0,h[0]&&(1==h.length?l.add(m[0]+v):l.add(m[0]+h[1][h[0]-1]))):c++}e[q]=l.join(" ");d.optimizeSize&&!e[q]&&(e.length=q)}}return c}var x=/^[a-z_][a-z0-9_\-]*$/i,
R=/(\S+)/g,C=/^([a-z_][a-z0-9_\-]*)?\{((anim:)?[a-z_][a-z0-9_\-]*)\}$/i,p=/\s*[^:]+?\s*:(?:\(.*?\)|".*?"|'.*?'|[^;]+?)+(?:;|$)/gi,Z=/\s*([^:]+?)\s*:((?:\(.*?\)|".*?"|'.*?'|[^;]+?)+);?$/i,u=/\{([a-z_][a-z0-9_]*|l10n:[a-z_][a-z0-9_]*(?:\.[a-z_][a-z0-9_]*)*)\}/i,B=/&([a-z]+|#[0-9]+|#x[0-9a-f]{1,4});?/gi,S=a.NODE_ENV?require("./template/htmlentity.json"):{},V=!a.NODE_ENV?document.createElement("div"):null,F=[];return function(a,b,d){d=d||{};var f=[];b={baseURI:b||"",tokens:null,resources:[],deps:[],defines:{},
unpredictable:!0,warns:f};a.templateTokens||(a=ba(""+a));b.tokens=r(a,b,d);b.tokens||(b.tokens=[[3,0,0,""]]);m(b.tokens[0],"element");Q(b.tokens);b.unpredictable=!!w(b.tokens,b,d);delete b.defines;f.length||(b.warns=!1);return b}}(),ea={".css":!0},t=p(null,{className:h+".Template",__extend__:function(a){return a instanceof t?a:a instanceof V?new Z(a):new t(a)},source:"",baseURI:"",init:function(a){this.attaches_=[];this.setSource(a||"");this.templateId=l.push(this)-1},bindingBridge:{attach:function(a,
b,d){for(var f=0,c;c=a.attaches_[f];f++)if(c.handler==b&&c.context==d)return!1;a.attaches_.push({handler:b,context:d});return!0},detach:function(a,b,d){for(var f=0,c;c=a.attaches_[f];f++)if(c.handler==b&&c.context==d)return a.attaches_.splice(f,1),!0;return!1},get:function(){}},createInstance:function(a,b,d){C.call(this);return this.createInstance(a,b,d)},clearInstance:function(a){a.destroy_()},getBinding:function(a){C.call(this);return this.getBinding(a)},setSource:function(b){var d=this.source;
if(d!=b){if("string"==typeof b){var f=b.match(/^([a-z]+):/);if(f){var c=f[1];b=b.substr(f[0].length);switch(c){case "file":b=a.resource(b);break;case "id":b=N(b);break;case "tokens":b=b.toObject();b.isDecl=!0;break;case "path":b=H(b)}}}if(d&&d.bindingBridge){if(f=d.url&&Q[d.url])f.remove(this),f.length||delete Q[d.url];this.baseURI="";this.source.bindingBridge.detach(d,n,this)}b&&b.bindingBridge&&(b.url&&(this.baseURI=String(b.url).replace(/[^\\\/]+$/,""),Q[b.url]||(Q[b.url]=[]),Q[b.url].add(this)),
b.bindingBridge.attach(b,n,this));this.source=b;n.call(this)}}}),V=function(b){a.object.extend(this,b)},Z=a.Class(null,{className:h+".TemplateSwitcher",ruleRet_:null,templates_:null,templateClass:t,ruleEvents:null,rule:String,init:function(a){this.ruleRet_=[];this.templates_=[];this.rule=a.rule;if((a=a.events)&&a.length){this.ruleEvents={};for(var b=0,d;d=a[b];b++)this.ruleEvents[d]=!0}e.add(this)},resolve:function(a){a=this.rule(a);var b=this.ruleRet_.indexOf(a);-1==b&&(this.ruleRet_.push(a),b=this.templates_.push(new this.templateClass(a))-
1);return this.templates_[b]},destroy:function(){this.ruleRet_=this.templates_=this.rule=null}}),ga=p(null,{className:h+".Theme",get:H}),ia=p(a.Token,{className:h+".SourceWrapper",path:"",url:"",baseURI:"",init:function(b,d){this.path=d;a.Token.prototype.init.call(this,"")},get:function(){return this.value&&this.value.bindingBridge?this.value.bindingBridge.get(this.value):this.value},set:function(){var a=w(da,this.path);this.value!=a&&(this.value&&this.value.bindingBridge&&this.value.bindingBridge.detach(this.value,
this.apply,this),this.url=(this.value=a)&&a.url||"",this.baseURI=("object"==typeof a||"function"==typeof a)&&"baseURI"in a?a.baseURI:c.dirname(this.url)+"/",this.value&&this.value.bindingBridge&&this.value.bindingBridge.attach(this.value,this.apply,this),this.apply())},destroy:function(){this.baseURI=this.url=null;this.value&&this.value.bindingBridge&&this.value.bindingBridge.detach(this.value,this.apply,this);a.Token.prototype.destroy.call(this)}}),Y={},ca={},fa=m(),da="base",ha=[];e.add({destroy:function(){for(var a in ca)ca[a].destroy();
ca=Y=null;a=0;for(var b;b=l[a];a++){for(var d in b.instances_)b.instances_[d].destroy_();b.attaches_=null;b.createInstance=null;b.getBinding=null;b.instances_=null;b.resources=null;b.l10n_=null;b.source=null}l=null}});K.setWrapper(function(){return fa.define.apply(fa,arguments)});K.exports={DECLARATION_VERSION:2,TYPE_ELEMENT:y,TYPE_ATTRIBUTE:A,TYPE_ATTRIBUTE_CLASS:D,TYPE_ATTRIBUTE_STYLE:5,TYPE_ATTRIBUTE_EVENT:I,TYPE_TEXT:f,TYPE_COMMENT:q,TOKEN_TYPE:E,TOKEN_BINDINGS:P,TOKEN_REFS:M,ATTR_NAME:O,ATTR_VALUE:k,
ATTR_NAME_BY_TYPE:U,ELEMENT_NAME:3,ELEMENT_ATTRS:W,ELEMENT_CHILDS:5,TEXT_VALUE:3,COMMENT_VALUE:3,TemplateSwitchConfig:V,TemplateSwitcher:Z,Template:t,switcher:function(b,d){var f=a.array(arguments);d=f.pop();return new V({rule:d,events:f.join(" ").trim().split(/\s+/)})},tokenize:ba,getDeclFromSource:G,makeDeclaration:aa,Theme:ga,theme:m,getThemeList:function(){return a.object.keys(Y)},currentTheme:function(){return Y[da].theme},setTheme:function(a){return m(a).apply()},onThemeChange:function(a,b,
d){ha.push({fn:a,context:b});d&&a.call(b,da)},define:fa.define,get:H,getPathList:function(){return a.object.keys(ca)}};m("base").define({"#1":a.resource("0.tmpl"),"#2":a.resource("1.tmpl"),"#3":a.resource("2.tmpl"),"#4":a.resource("3.tmpl"),"#5":a.resource("4.tmpl"),"#6":a.resource("5.tmpl"),"#7":a.resource("6.tmpl"),"#8":a.resource("7.tmpl"),"#9":a.resource("8.tmpl"),"#a":a.resource("9.tmpl"),"#b":a.resource("a.tmpl"),"#c":a.resource("b.tmpl"),"#d":a.resource("c.tmpl"),"#e":a.resource("d.tmpl"),
"#f":a.resource("e.tmpl"),"#g":a.resource("f.tmpl"),"#h":a.resource("g.tmpl"),"#i":a.resource("h.tmpl"),"#j":a.resource("i.tmpl"),"#k":a.resource("j.tmpl"),"#l":a.resource("k.tmpl"),"#m":a.resource("l.tmpl"),"#n":a.resource("m.tmpl"),"#o":a.resource("n.tmpl"),"#p":a.resource("o.tmpl"),"#q":a.resource("p.tmpl")})}],["basis.dom.event",function(h,K,a,p,J,z,s){function B(a){return a instanceof X?a.event_:a||p.event}function r(a){return"string"==typeof a?I.getElementById(a):a}function n(a){return a.target||
a.srcElement}function x(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}function G(a){a.preventDefault?a.preventDefault():a.returnValue=!1}function F(a,b){(b=r(b))?Q(b,a,F):(G(a),x(a))}function L(a){return a.keyCode||a.which||0}function C(a){return a.charCode||a.keyCode||0}function N(a,b){return"number"==typeof a.which?a.which==b.VALUE:!!(a.button&b.BIT)}function H(a){return a.changedTouches?a.changedTouches[0].pageX:"pageX"in a?a.pageX:a.clientX+(I.documentElement.scrollLeft||I.body.scrollLeft)}
function u(a){return a.changedTouches?a.changedTouches[0].pageY:"pageY"in a?a.pageY:a.clientY+(I.documentElement.scrollTop||I.body.scrollTop)}function w(a){var b=0;"wheelDelta"in a?b=a.wheelDelta:"DOMMouseScroll"==a.type&&(b=-a.detail);return b/Math.abs(b)}function m(a){var b=q(W[a.type]),f=S[a.type],c=new X(a);if(f)f.handler.call(f.thisObject,c),F(a);else if(b)for(a=b.length;0<a--;)f=b[a],f.handler.call(f.thisObject,c)}function e(a){var b=S[a];b&&(l(a,b.handler,b.thisObject),delete S[a])}function c(a,
b,c){var e=W[a];if(e){a=0;for(var g;g=e[a];a++)if(g.handler===b&&g.thisObject===c)return}else T?Q(I,a,f):I.addEventListener(a,m,!0),e=W[a]=[];e.push({handler:b,thisObject:c})}function l(a,b,c){var e=W[a];if(e)for(var g=0,k;k=e[g];g++)if(k.handler===b&&k.thisObject===c){e.splice(g,1);e.length||(delete W[a],T?y(I,a,f):I.removeEventListener(a,m,!0));break}}function Q(a,b,f,c){a=r(a);if(!a)throw 33;if("function"!=typeof f)throw 34;a[P]||(a[P]={});var e={handler:f,thisObject:c},g=a[P],k=g[b];if(k){for(a=
0;g=k[a];a++)if(g.handler===f&&g.thisObject===c)return;k.push(e)}else k=g[b]=[e],k.fireEvent=function(a){a=B(a);if(T&&(a&&W[b])&&"undefined"==typeof a.returnValue){m(a);if(!0===a.cancelBubble)return;"undefined"==typeof a.returnValue&&(a.returnValue=!0)}var d=0;a=new X(a);for(var f;f=k[d++];)f.handler.call(f.thisObject,a)},E?a.addEventListener(b,k.fireEvent,!1):a.attachEvent("on"+b,k.fireEvent)}function y(a,b,f,c){a=r(a);var e=a[P];if(e&&(e=e[b]))for(var g=0,k;k=e[g];g++)if(k.handler===f&&k.thisObject===
c){e.splice(g,1);e.length||A(a,b);break}}function A(a,b){a=r(a);var f=a[P];if(f)if("string"!=typeof b)for(b in f)A(a,b);else{var c=f[b];c&&(a.removeEventListener?a.removeEventListener(b,c.fireEvent,!1):a.detachEvent("on"+b,c.fireEvent),delete f[b])}}function D(a){return function(b,f){return a(B(b),f)}}var I=p.document,f=a.fn.$null,q=a.array.from,E=!!I.addEventListener,P="__basisEvents";h={BACKSPACE:8,TAB:9,CTRL_ENTER:10,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,ESCAPE:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,
END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123};var M={VALUE:1,BIT:1},O={VALUE:2,BIT:4},k={VALUE:3,BIT:2},U={mousewheel:["mousewheel","DOMMouseScroll"]},X=a.Class(null,{className:this.path+".Event",KEY:h,init:function(d){d=B(d);a.object.extend(a.object.complete(this,d),{event_:d,sender:n(d),key:L(d),charCode:C(d),mouseLeft:N(d,M),mouseMiddle:N(d,O),mouseRight:N(d,k),mouseX:H(d),mouseY:u(d),wheelDelta:w(d)})},
stopBubble:function(){x(this.event_)},stopPropagation:function(){x(this.event_)},preventDefault:function(){G(this.event_)},die:function(){this.stopBubble();this.preventDefault()}}),W={},S={},T=!E,g={};K.setWrapper(function(a){return B(a)});K.exports={W3CSUPPORT:E,browserEvents:function(a){return U[a]||[a]},getEventInfo:function(a,b){b||(b="div");var f=b+"-"+a;if(g[f])return g[f];var c=!1,e=!1;if(!E){var k="on"+a,q=I.createElement("div"),l=q.appendChild(I.createElement(b));q[k]=function(){e=!0};try{l.fireEvent(k),
c=!0}catch(t){}}return g[f]={supported:c,bubble:e}},KEY:h,MOUSE_LEFT:M,MOUSE_RIGHT:k,MOUSE_MIDDLE:O,Handler:function(a,b){this.handler=a;this.thisObject=b},Event:X,sender:D(n),cancelBubble:D(x),cancelDefault:D(G),kill:D(F),key:D(L),charCode:D(C),mouseButton:D(N),mouseX:D(H),mouseY:D(u),wheelDelta:D(w),addGlobalHandler:c,removeGlobalHandler:l,captureEvent:function(a,b,f){S[a]&&e(a);c(a,b,f);S[a]={handler:b,thisObject:f}},releaseEvent:e,addHandler:Q,addHandlers:function(a,b,f){a=r(a);for(var c in b)Q(a,
c,b[c],f)},removeHandler:y,clearHandlers:A,fireEvent:function(a,b,f){a=r(a);(a=a[P])&&a[b]&&a[b].fireEvent(f)},onLoad:function(d){return a.ready(d)},onUnload:function(a,b){Q(p,"unload",a,b)},wrap:B}}],["basis.template.htmlfgen",function(h,K,a,p,J,z,s){var B=a.template.TYPE_ELEMENT,r=a.template.TYPE_ATTRIBUTE,n=a.template.TYPE_TEXT,x=a.template.TYPE_COMMENT,G=a.template.TOKEN_TYPE,F=a.template.TOKEN_BINDINGS,L=a.template.TOKEN_REFS,C=a.template.ATTR_NAME,N=a.template.ATTR_NAME_BY_TYPE,H=a.template.ELEMENT_NAME,
u=a.template.ELEMENT_ATTRS,w={},m=function(){function a(f,c){for(var e=0,q;q=f[e];e++)-1==q.indexOf(":")&&D.push(q+":"+c)}function e(a){var f=A.length,f=h[f]||"r"+f;A.push(f+"="+a);return f}function m(E,h){for(var y,O,k,D,r=0,p=0,w=0,s;s=E[r];r++,p++,D=!1){r?E[r+1]?(s[G]==E[r-1][G]&&s[G]==n&&w++,y=h+".childNodes["+p+(w?" + "+w+" * TEXT_BUG":"")+"]"):y=h+".lastChild":y=h+".firstChild";if(O=s[L])D=!0,y=e(y),a(O,y);s[F]&&(s[F]&&"number"==typeof s[F]&&(s[F]=s[L][s[F]-1]),D||(D=!0,y=e(y)),I.push([s[G],
y,s[F]]));if(s[G]==B){k=-1;h==q&&f.push(y+".basisObjectId");D||(y=e(y),k=A.length);for(var g=[],d=[],b=u,v;v=s[b];b++)v[G]==B||v[G]==n||v[G]==x?d.push(v):g.push(v);for(var b=0,R;R=g[b];b++)if(6!=R[G]){v=N[R[G]]||R[C];if(O=R[L])D=!0,a(O,e(y+'.getAttributeNode("'+v+'")'));if(O=R[F])switch(D=!0,v){case "class":R=0;for(var z;z=O[R];R++)z=[2,y,z[1],v,z[0]].concat(z.slice(2)),I.push(z);break;case "style":for(R=0;z=O[R];R++)for(var K=0,J;J=z[0][K];K++)I.push([2,y,J,v,z[0],z[1],z[2]]);break;default:for(R=
0;J=O[0][R];R++)I.push([2,y,J,v,O[0],O[1],s[H]])}}d.length&&m(d,y);!D&&k==A.length&&A.pop()}}}var h="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".toArray(),A,D,I,f,q;return function(a,c){A=[];D=[];I=[];f=[];q=c||"_";m(a,q);return{path:A,ref:D,binding:I,markedElementList:f}}}(),e=function(){function c(a,c){for(var e=[],f=a[5],q=a[4],l,m,h=0;h<f.length;h++)"string"==typeof f[h]?e.push('"'+f[h].replace(/"/g,'\\"')+'"'):(l=q[f[h]],m=l.indexOf(":"),-1==m?e.push("l10n"==c?'"{'+l+'}"':"bool"==c?
"(__"+l+'||"")':"__"+l):e.push('__l10n["'+l.substr(m+1)+'"]'));1==e.length&&e.push('""');return e.join("+")}var e={disabled:"*",checked:["input"],value:["input","textarea"],minlength:["input"],maxlength:["input"],readonly:["input"],selected:["option"]},m={disabled:!0,checked:!0,selected:!0,readonly:!0},h={1:"bind_element",3:"bind_textNode",8:"bind_comment"};return function(A){function D(b){p[b]=!0;f.push(q+"="+b+"("+a.array(arguments,1)+");")}for(var I={},f,q,E=[],P=[],M,O,k,p={},w,x=0,u;u=A[x];x++){var s=
u[0],g=u[1],d=u[2],b=d.split(":");(w="anim"==b[0])&&(d=b[1]);f=I[d];q="_"+x;M="__"+d;if("l10n"==b[0]&&b[1])w=b[1],O||(O={},k=[]),I[w]||(I[w]=[],O[w]=[],k.push(w)),f=I[w],f.l10n=!0,s==n?(O[w].push(g+".nodeValue=value;"),f.push(g+'.nodeValue=__l10n["'+w+'"];')):(s='"'+u[C]+'"',O[w].push("bind_attr("+[g,s,"NaN",c(u,"l10n")]+");"),E.push(q),D("bind_attr",g,s,q,c(u)));else if(I[d]||(f=I[d]=[],E.push(M)),s!=r)E.push(q+"="+g),D(h[s],g,q,"value");else switch(s=u[C],s){case "class":s="";b="value";M=u[4];b=
u.length;if(6<=b)if(6==b||"string"==typeof u[6])6==b?(b='value?"'+d+'":""',u[5]&&(s=M+d)):(M="",b='value?"'+u[6]+'":""',u[5]&&(s=u[6]));else{if(!u[6].length)continue;7==b?(b=u[6].map(function(a){return'value=="'+a+'"'}).join("||")+'?value:""',u[5]&&(s=M+u[6][u[5]-1])):(M="",b=u[6].map(function(a,b){return'value=="'+a+'"?"'+this[b]+'"'},u[7]).join(":")+':""',u[5]&&(s=u[7][u[5]-1]))}else b='typeof value=="string"||typeof value=="number"?value:(value?"'+d+'":"")';E.push(q+'="'+s+'"');D("bind_attrClass",
g,q,b,'"'+M+'"',w);break;case "style":E.push(q+'=""');D("bind_attrStyle",g,'"'+u[6]+'"',q,c(u));break;default:if(w=e[s],E.push(q+"="+c(u,"l10n")),D("bind_attr",g,'"'+s+'"',q,w&&m[s]?c(u,"bool")+'?"'+s+'":""':c(u)),w&&("*"==w||w.has(u[6].toLowerCase())))f.push("if("+g+"."+s+"!="+q+")"+g+"."+s+"="+(m[s]?"!!(":"(")+q+");")}}P.push("function set(bindName,value){value=resolve(attaches,updateAttach,bindName,value);switch(bindName){");for(d in I)P.push('case"'+d+'":'+(I[d].l10n?I[d].join(""):"if(__"+d+"!==value){__"+
d+"=value;"+I[d].join("")+"}")+"break;");P.push("}}");for(var v in p)E.push(v+"=tools."+v);return{keys:a.object.keys(I),vars:E,set:P.join(""),l10n:O,l10nKeys:k}}}();K.exports={getFunctions:function(c,l,h,y){if(l=w[h&&a.path.relative(h)])return l;c=m(c,"_");l=e(c.binding);h=c.markedElementList.join("=");y={keys:l.keys,l10nKeys:l.l10nKeys};if(l.l10n){var A=[],n;for(n in l.l10n)A.push('case"'+n+'":if(value==null)value="{'+n+'}";__l10n[token]=value;'+l.l10n[n].join(";")+"break;");y.createL10nSync=new Function("_",
"__l10n","bind_attr","TEXT_BUG","var "+c.path+";return function(token, value){switch(token){"+A.join("")+"}}")}y.createInstance=new Function("gMap","tMap","build","tools","__l10n","TEXT_BUG","return function createInstance_(obj,onAction,onUpdate){var id=gMap.seed++,ref={context:obj},attaches={},resolve=tools.resolve,_=build(),"+c.path.concat(l.vars)+(h?";if(obj)gMap["+h+"=id]=ref":"")+';function updateAttach(){set(this+"",attaches[this])}'+l.set+";return tMap[id]=ref.tmpl={"+[c.ref,"set:set,rebuild_:function(){if(onUpdate)onUpdate.call(obj)},action_:function(action,event){if(onAction)onAction.call(obj,action,event)},destroy_:function(){for(var key in attaches)if(attaches[key])attaches[key].bindingBridge.detach(attaches[key],updateAttach,key);attaches=null;delete tMap[id];"+
(h?"delete gMap[id];":"")+"}"]+"}}");return y}}}],["basis.template.html",function(h,K,a,p,J,z,s){function B(a){return function(f){f=new x.Event(f);if(!f||!("click"==f.type&&3==f.which)){var c=f.sender,e;if(c){do if(e=c.getAttributeNode&&c.getAttributeNode(a))break;while(c=c.parentNode);if(c&&e){var g;a:{g=c;var d;do if(d=g.basisObjectId)if(d=q[d]){g=d;break a}while(g=g.parentNode)}if(g){e=e.nodeValue.qw();f.actionTarget=c;for(c=0;d=e[c++];)g.tmpl.action_(d,f)}}}}}}function r(a){return function(){x.fireEvent(n,
a)}}h=this.path;var n=p.document,x=a.dom.event,G=a.array.from,F=a.l10n.token,L=a.template.htmlfgen.getFunctions,C=a.template.TemplateSwitchConfig;J=a.template.TemplateSwitcher;z=a.template.Template;var N=a.template.TYPE_ELEMENT,H=a.template.TYPE_ATTRIBUTE,u=a.template.TYPE_TEXT,w=a.template.TYPE_COMMENT,m=a.template.TOKEN_TYPE,e=a.template.TOKEN_BINDINGS,c=a.template.TOKEN_REFS,l=a.template.ATTR_NAME,Q=a.template.ATTR_VALUE,y=a.template.ATTR_NAME_BY_TYPE,A=a.template.ELEMENT_NAME,D=a.template.TEXT_VALUE,
I=a.template.COMMENT_VALUE,f={},q={seed:1},E={svg:"http://www.w3.org/2000/svg"},P=function(){var a=n.createElement("div");a.appendChild(n.createTextNode("a"));a.appendChild(n.createTextNode("b"));return 1==a.cloneNode(!0).childNodes.length}(),M=function(){var a=n.createElement("div");a.setAttribute("class","a");return!a.className}();s=function(){var f=/\s+/,c="function"==typeof Node&&n instanceof Node?function(a,d,b){b instanceof Node&&(a=11==b.nodeType?b.firstChild===b.lastChild?b.firstChild:G(b):
b);if(a!==d)if(Array.isArray(a)){if(d.fragmentStart){a.fragmentStart=d.fragmentStart;a.fragmentEnd=d.fragmentEnd;for(b=a.fragmentStart.nextSibling;b&&b!=a.fragmentEnd;){var f=b;b=b.nextSibling;f.parentNode.removeChild(f)}}else a.fragmentStart=n.createComment("start"),a.fragmentEnd=n.createComment("end"),d.parentNode.insertBefore(a.fragmentStart,d),d.parentNode.replaceChild(a.fragmentEnd,d);for(d=0;b=a[d];d++)a.fragmentEnd.parentNode.insertBefore(b,a.fragmentEnd)}else{if(d&&d.fragmentStart){for(b=
d.fragmentStart.nextSibling;b&&b!=d.fragmentEnd;)f=b,b=b.nextSibling,f.parentNode.removeChild(f);d.fragmentStart.parentNode.removeChild(d.fragmentStart);d=d.fragmentEnd}d.parentNode.replaceChild(a,d)}return a}:function(a,d,b){b=b&&"object"==typeof b?b:a;if(b!==d)try{d.parentNode.replaceChild(b,d)}catch(f){b=a,d!==b&&d.parentNode.replaceChild(b,d)}return b},e=function(a,d,b,f){b!==f&&(f?a.setAttribute(d,f):a.removeAttribute(d));return f},k={bind_textNode:function(a,f,b){f=c(a,f,b);f===a&&(a.nodeValue=
b);return f},bind_node:c,bind_element:function(a,f,b){f=c(a,f,b);f===a&&"string"==typeof b&&(a.innerHTML=b);return f},bind_comment:c,bind_attr:e,bind_attrClass:p.DOMTokenList&&n&&n.documentElement.classList instanceof p.DOMTokenList?function(f,d,b,c,e){var k=b?c+b:"";k!=d&&(d&&f.classList.remove(d),k&&(f.classList.add(k),e&&(f.classList.add(k+"-anim"),a.timer.nextTick(function(){f.classList.remove(k+"-anim")}))));return k}:function(c,d,b,e,k){var q=b?e+b:"";if(q!=d){b=c.className;var l="string"!=
typeof b;l&&(b=b.baseVal);b=b.split(f);d&&b.remove(d);q&&(b.push(q),k&&(b.add(q+"-anim"),a.timer.nextTick(function(){var a=(l?c.className.baseVal:c.className).split(f);a.remove(q+"-anim");l?c.className.baseVal=a.join(" "):c.className=a.join(" ")})));l?c.className.baseVal=b.join(" "):c.className=b.join(" ")}return q},bind_attrStyle:function(a,f,b,c){if(b!==c)try{a.style[f.camelize()]=c}catch(e){}return c},resolve:function(a,f,b,c){var e=c&&c.bindingBridge,k=a[b];if(e||k)e?(c!==k&&(k&&k.bindingBridge.detach(k,
f,b),e.attach(c,f,b),a[b]=c),c=e.get(c)):k&&(k.bindingBridge.detach(k,f,b),delete a[b]);return c},l10nToken:F};return function(a){var f=L(a,!0,this.source.url,a.source_),b={},c={},l,m=O(a);if(f.createL10nSync){l=f.createL10nSync(m,c,e,P);a=0;for(var h;h=f.l10nKeys[a];a++)l(h,F(h).value)}return{createInstance:f.createInstance(q,b,function(){return m.cloneNode(!0)},k,c,P),l10nProtoSync:l,keys:f.keys,l10nKeys:f.l10nKeys,map:b}}}();var O=function(a,k){function q(a,b){var d="event-"+a;if(!f[a]){f[a]=B(d);
for(var c=0,e=x.browserEvents(a),k;k=e[c++];)x.addGlobalHandler(k,f[a])}x.W3CSUPPORT||(c=x.getEventInfo(a,v),c.supported&&!c.bubble&&g.attachEvent("on"+a,r(a)));g.setAttribute(d,b)}function h(a,b){M&&"class"==a&&(a="className");g.setAttribute(a,b)}for(var g=k||n.createDocumentFragment(),d=k?4:0,b;b=a[d];d++)switch(b[m]){case N:var v=b[A],p=v.split(/:/),p=1<p.length?n.createElementNS(E[p[0]],v):n.createElement(v);O(b,p);g.appendChild(p);break;case H:var p=b[l],s=b[Q],C=p.replace(/^event-/,"");if(C!=
p)q(C,s);else if("class"!=p&&"style"!=p?!b[e]:s)h(p,s||"");break;case 4:case 5:(s=b[Q-1])&&h(y[b[m]],s);break;case 6:q(b[1],b[2]||b[1]);break;case w:g.appendChild(n.createComment(b[I]||(b[c]?"{"+b[c].join("|")+"}":"")));break;case u:P&&(d&&a[d-1][m]==u)&&g.appendChild(n.createComment("")),g.appendChild(n.createTextNode(b[D]||(b[c]?"{"+b[c].join("|")+"}":"")||(b[e]?"!":"")))}return g},k=z.subclass({className:h+".Template",__extend__:function(a){return a instanceof k?a:a instanceof C?new U(a):new k(a)},
builder:s}),U=J.subclass({className:h+".TemplateSwitcher",templateClass:k});K.exports={Template:k,TemplateSwitcher:U};a.template.extend({buildHtml:O,buildFunctions:s,resolveObjectById:function(a){return q[a].context}})}],["basis.ui",function(h,K,a,p,J,z,s){h=this.path;var B=p.document;p=a.Class;var r=a.dom,n=a.cssom,x=a.cssom.classList,G=a.event.create,F=a.template.html.Template;J=a.dom.wrapper.Node;var L=a.dom.wrapper.PartitionNode,C=a.dom.wrapper.GroupingNode,N=1,H=function(){var a={},c=/^([a-z_][a-z0-9_]*):(.*)/i;
return{add:function(c,e){a[c]||(a[c]=e)},process:function(e,l){var f,q=l.match(c);q&&(f=a[q[1]],l=q[2]||e);return f?f(l):l}}}();H.add("data",function(a){return{events:"update",getter:"data."+a}});H.add("satellite",function(a){return{events:"satelliteChanged",getter:function(c){return c.satellite[a]?c.satellite[a].element:null}}});var u=p.customExtendProperty({selected:{events:"select unselect",getter:function(a){return a.selected}},unselected:{events:"select unselect",getter:function(a){return!a.selected}},
disabled:{events:"disable enable",getter:function(a){return a.disabled||a.contextDisabled}},enabled:{events:"disable enable",getter:function(a){return!(a.disabled||a.contextDisabled)}},state:{events:"stateChanged",getter:function(a){return String(a.state)}},childNodesState:{events:"childNodesStateChanged",getter:function(a){return String(a.childNodesState)}},childCount:{events:"childNodesModified",getter:function(a){return a.childNodes?a.childNodes.length:0}},hasChildren:{events:"childNodesModified",
getter:function(a){return!!a.firstChild}},empty:{events:"childNodesModified",getter:function(a){return!a.firstChild}}},function(c,e){c.bindingId=N++;for(var l in e){var m=null,f=e[l];if(Q&&f instanceof Q)m={events:"satelliteChanged",getter:function(f,c){var e=a.fn.runOnce(function(a){a.setSatellite(f,c)});return function(a){e(a);return a.satellite[f]?a.satellite[f].element:null}}(l,f)};else if(f){if("string"==typeof f)f=H.process(l,f);else if(f instanceof a.Token||f instanceof a.data.AbstractData&&
f.bindingBridge)f=a.fn.$const(f);m="object"!=typeof f?{getter:a.getter(f)}:Array.isArray(f)?{events:f[0],getter:a.getter(f[1])}:{events:f.events,getter:a.getter(f.getter)}}c[l]=m}}),w=p.extensibleProperty({select:function(a){this.isDisabled()||(this.contextSelection&&this.contextSelection.multiple?this.select(a.ctrlKey||a.metaKey):this.select())}}),m={"*":function(a){var c=this.templateSwitcher_;c&&(c.ruleEvents&&c.ruleEvents[a.type])&&this.setTemplate(c.resolve(this))}},e=new F("<div/>"),c;z=function(h){return{template:e,
emit_templateChanged:G("templateChanged"),templateSwitcher_:null,binding:u,action:w,tmpl:null,element:null,childNodesElement:null,id:null,cssClassName:null,focusable:!0,emit_update:function(a){this.templateUpdate(this.tmpl,"update",a);h.emit_update.call(this,a)},emit_match:function(){h.emit_match.call(this);n.display(this.element,!0)},emit_unmatch:function(){h.emit_unmatch.call(this);n.display(this.element,!1)},init:function(){var a=this.template;a&&(this.template=null,this.setTemplate(a));h.init.call(this)},
postInit:function(){h.postInit.call(this);this.template&&(this.templateSync(!0),this.container&&(r.insert(this.container,this.element),this.container=null))},templateSync:function(c){var e=this.template,m=e.getBinding(this.binding,this)||null,f=this.templateBinding_,q=this.tmpl,h=this.element;if(m!==f){f&&f.handler&&this.removeHandler(f.handler);c||(this.tmpl&&e.clearInstance(this.tmpl),q=e.createInstance(this,this.templateAction,this.templateSync),q.childNodesHere&&(q.childNodesElement=q.childNodesHere.parentNode,
q.childNodesElement.insertPoint=q.childNodesHere),this.tmpl=q,this.element=q.element,this.childNodesElement=q.childNodesElement||q.element,1!=this.childNodesElement.nodeType&&(this.childNodesElement=B.createDocumentFragment()));if(this.content)if(this.content instanceof a.l10n.Token){var n=this.content,y=r.createText(n.value),O=function(a){this.nodeValue=a};n.attach(O,y);this.addHandler({destroy:function(){n.detach(O,y)}});r.insert(q.content||q.element,y)}else r.insert(q.content||q.element,this.content);
this.id&&(q.element.id=this.id);if(e=this.cssClassName){"string"==typeof e&&(e={element:e});for(var k in e)if(c=q[k]){var f=x(c),p=String(e[k]).qw();c=0;for(var w;w=p[c++];)f.add(w)}}this.templateUpdate(this.tmpl);m&&m.names.length&&(m.handler&&this.addHandler(m.handler),m.sync.call(this));if(this instanceof l){if(q=this.nodes)for(c=q.length;0<c--;)k=q[c],k.parentNode.insertBefore(k,k.nextSibling)}else for(k=this.lastChild;k;k=k.previousSibling)this.insertBefore(k,k.nextSibling);h&&(this.element&&
h!==this.element)&&((q=h&&h.parentNode)&&q.replaceChild(this.element,h),this.emit_templateChanged());this.templateBinding_=m}},setTemplate:function(c){var e=this.templateSwitcher_;c instanceof a.template.TemplateSwitcher&&(this.templateSwitcher_=c,c=c.resolve(this),e||this.addHandler(m,this));!1==c instanceof F&&(c=null);if(e&&(!c||e.resolve(this)!==c))this.templateSwitcher_=null,this.removeHandler(m,this);if(this.template!==c){var l=this.template,e=this.element;if(l){l.clearInstance(this.tmpl);var f=
this.templateBinding_;f&&f.handler&&this.removeHandler(f.handler);this.templateBinding_=null}(this.template=c)?(c=c.createInstance(this,this.templateAction,this.templateSync),c.childNodesHere&&(c.childNodesElement=c.childNodesHere.parentNode,c.childNodesElement.insertPoint=c.childNodesHere),this.tmpl=c,this.element=c.element,this.childNodesElement=c.childNodesElement||c.element,1!=this.childNodesElement.nodeType&&(this.childNodesElement=B.createDocumentFragment()),l&&this.templateSync(!0)):this.childNodesElement=
this.element=this.tmpl=null;if(e&&(!this.element||this.element!=e))(c=e&&e.parentNode)&&c.nodeType==r.ELEMENT_NODE&&c.removeChild(e)}},updateBind:function(a){var c=this.binding[a];(c=c&&c.getter)&&this.tmpl&&this.tmpl.set(a,c(this))},templateAction:function(a,c){var e=this.action[a];e&&e.call(this,c)},templateUpdate:function(a,c,e){},focus:function(e){if(this.focusable){var l=this.tmpl.focus||this.element;l&&(c&&(c=a.timer.clearImmediate(c)),c=a.timer.setImmediate(function(){r.focus(l,e)}))}},blur:function(){if(this.focusable){var a=
this.tmpl.focus||this.element;a&&a.blur()}},destroy:function(){h.destroy.call(this);this.setTemplate()}}};s=function(a){return{insertBefore:function(c,e){c=a.insertBefore.call(this,c,e);var l=(c.groupNode||this).childNodesElement||this.childNodesElement,f=c.nextSibling,q=c.element,f=(f&&f.element.parentNode==l?f.element:null)||l.insertPoint||null;(q.parentNode!==l||q.nextSibling!==f)&&l.insertBefore(q,f);return c},removeChild:function(c){a.removeChild.call(this,c);var e=c.element,l=e.parentNode;l&&
l.removeChild(e);return c},clear:function(c){if(c)for(var e=this.firstChild;e;){var l=e.element,f=l.parentNode;f&&f.removeChild(l);e=e.nextSibling}a.clear.call(this,c)},setChildNodes:function(c,e){var l=r.createFragment(),f=this.grouping||this,q=f.childNodesElement;f.childNodesElement=l;a.setChildNodes.call(this,c,e);q.insertBefore(l,q.insertPoint||null);f.childNodesElement===l&&(f.childNodesElement=q)}}};var l=p(L,z,{className:h+".PartitionNode",binding:{title:"data:"}}),L=p(C,s,{className:h+".GroupingNode",
childClass:l,groupingClass:p.SELF,emit_ownerChanged:function(a){this.syncDomRefs();C.prototype.emit_ownerChanged.call(this,a)},listen:{owner:{templateChanged:function(){this.syncDomRefs();for(var a=this.lastChild;a;a=a.previousSibling)this.insertBefore(a,a.nextSibling)}}},init:function(){this.element=this.childNodesElement=this.nullElement=r.createFragment();C.prototype.init.call(this)},syncDomRefs:function(){var a=this,c=this.owner,e=null;c&&(e=c.tmpl&&c.tmpl.groupsElement||c.childNodesElement,e.appendChild(this.nullElement));
do a.element=a.childNodesElement=e;while(a=a.grouping)}}),Q=p(J,z,s,{className:h+".Node",childClass:p.SELF,childFactory:function(a){return new this.childClass(a)},groupingClass:L});K.exports={BINDING_PRESET:H,Node:Q,PartitionNode:l,GroupingNode:L};K.exports.Container=Q}],["basis.router",function(h,K,a,p,J,z,s){function B(){var h=r.hash.substr(1)||"/";if(h!=N){var n=[],m=[];N=h;for(var e in F){var c=F[e],l=h.match(c.regexp);l?(L[e]||n.push(c),L[e]=l):L[e]&&(m.push(c),delete L[e])}for(h=0;c=m[h];h++)for(var c=
a.array.from(c.callbacks),p=0;l=c[p];p++)l.callback.leave&&l.callback.leave.call(l.context);for(h=0;c=n[h];h++){c=a.array.from(c.callbacks);for(p=0;l=c[p];p++)l.callback.enter&&l.callback.enter.call(l.context)}for(e in L){c=F[e];n=a.array.from(L[e],1);c=a.array.from(c.callbacks);for(h=0;l=c[h];h++)l.callback.match&&l.callback.match.apply(l.context,n)}}}a.namespace(String(this.path));var r=p.location;h=p.document.documentMode;h=a.ua.is("IE")&&(!h||7>=h);var n="onhashchange"in p&&!h,x=/:\w+/g,G=/\\\*\w+/g,
F={},L={},C=!1,N,H;K.exports={debug:!1,add:function(h,n,m){var e=F[h],c;if(!e&&(e=F[h]={source:h,callbacks:[],regexp:"[object RegExp]"!=Object.prototype.toString.call(h)?RegExp("^"+String(h).forRegExp().replace(x,"([^/]+)").replace(G,"(.*?)")+"$","i"):h},N&&(c=N.match(e.regexp))))L[h]=c;n={cb_:n,callback:"function"!=typeof n?n:{match:n},context:m};e.callbacks.push(n);if(c=L[h])n.callback.enter&&n.callback.enter.call(m),n.callback.match&&n.callback.match.apply(m,a.array.from(c,1))},remove:function(a,
h,m){var e=F[a];if(e)for(var c=0,l;l=e.callbacks[c];c++)if(l.cb_===h&&l.context===m){e.callbacks.splice(c,1);e.callbacks.length||(delete F[a],delete L[a]);break}},stop:function(){C&&(n?a.dom.event.removeHandler(p,"hashchange",B):clearInterval(H),C=!1)},start:function(){C||(n?a.dom.event.addHandler(p,"hashchange",B):H=setInterval(B,50),C=!0,B())},checkUrl:B,navigate:function(a,h){h?r.replace(r.pathname+"#"+a):r.hash=a;C&&B()}}}],["app.router",function(h,K,a,p,J,z,s){var B=a.ui.Node.prototype.postInit,
r=a.ui.Node.prototype.destroy;a.ui.Node.prototype.postInit=function(){B.call(this);this.router&&a.router.add(this.router,this.routerCallback,this)};a.ui.Node.prototype.destroy=function(){this.router&&a.router.remove(this.router,this.routerCallback,this);r.call(this)};a.ui.Node.prototype.routerCallback=a.Class.extensibleProperty({enter:function(){this.select()},leave:function(){this.unselect()}});K.exports=a.router.exports}],["app",function(h,K,a,p,J,z,s){K.exports=a.app.create({title:"EventShot",
init:function(){var h=new a.ui.Node({selection:!0,listen:{selection:{itemsChanged:function(a){a.itemCount||this.firstChild.select()}}},childClass:{template:a.template.get("#1"),handler:{select:function(){this.lazyContent&&(this.appendChild(this.lazyContent()),this.lazyContent=null)}}},childNodes:[{selected:!0,name:"welcome",lazyContent:a.resource("0.js")},{name:"add-event",router:"/add-event",lazyContent:a.resource("1.js")},{name:"list",router:"/list",lazyContent:a.resource("2.js")},{name:"event",
router:/^\/event(\/.*)?$/,lazyContent:a.resource("3.js")}]});a.router.start();return new a.ui.Node({template:a.template.get("#2"),binding:{tabs:new a.ui.Node({template:a.template.get("#3"),childClass:{template:a.template.get("#4"),binding:{title:"data:value"},action:{click:function(){var h=this.data.value;a.router.navigate("welcome"==h?"":"/"+h)}}},childNodes:a.data.wrap(["welcome","list","add-event"],!0)}),pages:h}})}})}],["basis.date",function(h,K,a,p,J,z,s){function B(a){return 10>a?"0"+a:a}function r(a){return 100>
a?"0"+B(a):a}function n(a){return!(a%400&&(!(a%100)||a%4))}function x(a,c){return 1==a?28+n(c):F[a]}function G(a,c,l){var m=function(c,l){switch(l){case "y":return String(a.getFullYear()).substr(2);case "Y":return a.getFullYear();case "d":return a.getDate();case "D":return B(a.getDate());case "m":return a.getMonth()+1;case "M":return B(a.getMonth()+1);case "h":return a.getHours();case "H":return B(a.getHours());case "i":return B(a.getHours()%12||12);case "p":return 12<a.getHours()?"pm":"am";case "P":return 12<
a.getHours()?"PM":"AM";case "I":return B(a.getMinutes());case "s":return a.getSeconds();case "S":return B(a.getSeconds());case "z":return a.getMilliseconds();case "Z":return r(a.getMilliseconds())}},h=function(c,l){switch(l){case "y":return String(a.getUTCFullYear()).substr(2);case "Y":return a.getUTCFullYear();case "d":return a.getUTCDate();case "D":return B(a.getUTCDate());case "m":return a.getUTCMonth()+1;case "M":return B(a.getUTCMonth()+1);case "h":return a.getUTCHours();case "H":return B(a.getUTCHours());
case "i":return B(a.getUTCHours()%12||12);case "p":return 12<a.getUTCHours()?"pm":"am";case "P":return 12<a.getUTCHours()?"PM":"AM";case "I":return B(a.getUTCMinutes());case "s":return a.getUTCSeconds();case "S":return B(a.getUTCSeconds());case "z":return a.getUTCMilliseconds();case "Z":return r(a.getUTCMilliseconds())}};return c.replace(H,l?h:m)}var F=[31,28,31,30,31,30,31,31,30,31,30,31],L={day:864E5,hour:36E5,minute:6E4,second:1E3};"year month day hour minute second millisecond".qw();var C={},
N={};a.object.iterate({year:"FullYear",month:"Month",day:"Date",hour:"Hours",minute:"Minutes",second:"Seconds",millisecond:"Milliseconds"},function(a,c){C[a]=function(a){return a["get"+c]()};N[a]=function(a,e){return a["set"+c](e)}});var H=/%([yYdDmMhHipPIsSzZ])/g,u=/\D/,w=/(.{10,})([\-\+]\d{1,2}):?(\d{1,2})?$/;a.object.extend(Date.prototype,{isLeapYear:function(){return n(this.getFullYear())},getMonthDayCount:function(){return x(this.getMonth(),this.getFullYear())},add:function(a,c){var l=C[a];if(!l)throw 35;
var m;if("year"==a||"month"==a)m=this.getDate(),28<m&&this.setDate(1);N[a](this,l(this)+c);28<m&&(l=this.getMonthDayCount(),this.setDate(Math.min(m,l)));return this},diff:function(a,c){if("year"==a||"month"==a){var l=0<Number(this)-Number(c)?-1:1,m=0<l?this:c,h=0<l?c:this,n=m.getFullYear(),n=h.getFullYear()-n;if("year"==a)return l*n;m=m.getMonth();h=h.getMonth();return l*(n?(1<n?12*(n-1):0)+(11-m)+(h+1):h-m)}l=Math.floor((c-this)/L[a]);return l+Number(0!=C[a](new Date(c-l*L[a]))-C[a](this))},set:function(a,
c){var l=N[a];if(!l)throw 36;var m;if("year"==a||"month"==a)m=this.getDate(),28<m&&this.setDate(1);l(this,c);28<m&&(l=this.getMonthDayCount(),this.setDate(Math.min(m,l)));return this},get:function(a){if(C[a])return C[a](this);throw 37;},toISODateString:function(){return G(this,"%Y-%M-%D",!0)},toISOTimeString:function(){return G(this,"%H:%I:%S.%Z",!0)},fromDate:function(a){a instanceof Date&&(this.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),this.setTime(a.getTime()));return this},toFormat:function(a){return G(this,
a)}});a.object.complete(Date.prototype,{toISOString:function(){return this.toISODateString()+"T"+this.toISOTimeString()+"Z"},fromISOString:function(a){return this.fromDate(m(a))}});var m=function(){function a(c,e,m,h,n,f,q){return new Date(c,e-1,m,h||0,(n||0)-l,f||0,q?q.substr(0,3):0)}var c=(new Date).getTimezoneOffset(),l;return function(m){return a.apply(l=c,String(m||"").replace(w,function(a,c,e,m){l+=m?60*e+1*m:1*e;return c}).split(u))}}();K.exports={monthNumToAbbr:"jan feb mar apr may jun jul aug sep oct nov dec".split(" "),
dayNumToAbbr:"mon tue wed thr fri sat sun".split(" "),isLeapYear:n,getMonthDayCount:x,format:G,fromISOString:m}}],["basis.data.dataset",function(h,K,a,p,J,z,s){function B(a,c){var e={},l;a&&a.length&&(l=e.inserted=a);c&&c.length&&(l=e.deleted=c);if(l)return e}function r(f,c){return function P(c){if(!c)return null;if(c.__extend__)return c;"string"!=typeof c&&!Array.isArray(c)&&(c="object"==typeof c?a.object.keys(c):null);return G(a.event.createHandler(c,f),{__extend__:P})}(c)}function n(a,c){if(!a.length)return 0;
var e,l=c.object.basisObjectId,m=c.value,h,k,n=0,p=a.length-1;do if(e=n+p>>1,k=a[e],h=k.value,h===m)if(k=k.object.basisObjectId,l<k)p=e-1;else if(l>k)n=e+1;else return l==k?e:0;else if(m<h)p=e-1;else if(m>h)n=e+1;else return m==h?e:0;while(n<=p);return e+(h<m)}function x(a,c){return+(a.value>c.value)||-(a.value<c.value)||a.object.basisObjectId-c.object.basisObjectId}z=this.path;s=a.Class;var G=a.object.extend,F=a.object.values,L=a.getter,C=a.fn.$self,N=a.fn.$true,H=a.fn.$false,u=a.array.from,w=a.event.create,
m=a.data.SUBSCRIPTION,e=a.data.Object,c=a.data.KeyObjectMap,l=a.data.AbstractDataset,Q=a.data.Dataset;m.add("SOURCE",{sourceChanged:function(a,c){c&&m.unlink("source",a,c);a.source&&m.link("source",a,a.source)},sourcesChanged:function(a,c){var e;if(e=c.inserted)for(var l=0;e[l];l++)m.link("source",a,e[l]);if(e=c.deleted)for(l=0;e[l];l++)m.unlink("source",a,e[l])}},function(a,c){for(var e=c.sources||(c.source?[c.source]:[]),l=0,m;m=e[l++];)a("source",c,m)});m.addProperty("minuend");m.addProperty("subtrahend");
var y=s(l,{className:z+".Merge",subscribeTo:m.SOURCE,emit_sourcesChanged:w("sourcesChanged","delta"),sources:null,rule:function(a,c){return 0<a},listen:{source:{itemsChanged:function(a,c){var e=this.members_,l={},m,h;if(c.inserted)for(var k=0;m=c.inserted[k];k++)h=m.basisObjectId,e[h]?e[h].count++:e[h]={count:1,object:m},l[h]=e[h];if(c.deleted)for(k=0;m=c.deleted[k];k++)h=m.basisObjectId,l[h]=e[h],e[h].count--;this.applyRule(l)},destroy:function(a){this.removeSource(a)}}},init:function(){l.prototype.init.call(this);
var a=this.sources;this.sources=[];a&&a.forEach(this.addSource,this)},setRule:function(a){"function"!=typeof a&&(a=y.UNION);this.rule!==a&&(this.rule=a,this.applyRule())},applyRule:function(a){var c=this.members_,e=this.rule,l=this.sources.length,m=[],h=[],k,n;a||(a=c);for(var p in a)a=c[p],k=l&&a.count&&e(a.count,l),k!=!!this.items_[p]&&(k?m:h).push(a.object),0==a.count&&delete c[p];(n=B(m,h))&&this.emit_itemsChanged(n);return n},addSource:function(a){if(a instanceof l&&this.sources.add(a)){this.listen.source&&
a.addHandler(this.listen.source,this);var c=this.members_,e;for(e in a.items_)c[e]?c[e].count++:c[e]={count:1,object:a.items_[e]};this.applyRule();this.emit_sourcesChanged({inserted:[a]});return!0}},removeSource:function(a){if(this.sources.remove(a)){this.listen.source&&a.removeHandler(this.listen.source,this);var c=this.members_,e;for(e in a.items_)c[e].count--;this.applyRule();this.emit_sourcesChanged({deleted:[a]});return!0}},setSources:function(a){for(var c=u(this.sources),e=0,m;m=a[e];e++)m instanceof
l&&(c.remove(m)||this.addSource(m));c.forEach(this.removeSource,this)},clear:function(){u(this.sources).forEach(this.removeSource,this)},destroy:function(){l.prototype.destroy.call(this);this.sources=null}});y.UNION=y.prototype.rule;y.INTERSECTION=function(a,c){return a==c};y.DIFFERENCE=function(a,c){return 1==a};y.MORE_THAN_ONE_INCLUDE=function(a,c){return 1==c||1<a};y.AT_LEAST_ONE_EXCLUDE=function(a,c){return 1==c||a<c};var A=function(a){return!this.has(a)};h=s(l,{className:z+".Subtract",subscribeTo:m.MINUEND+
m.SUBTRAHEND,minuend:null,emit_minuendChanged:w("minuendChanged","oldMinuend"),subtrahend:null,emit_subtrahendChanged:w("subtrahendChanged","oldSubtrahend"),listen:{minuend:{itemsChanged:function(a,c){if(this.subtrahend){var e=B(c.inserted&&c.inserted.filter(A,this.subtrahend),c.deleted&&c.deleted.filter(this.has,this));e&&this.emit_itemsChanged(e)}},destroy:function(){this.setOperands(null,this.subtrahend)}},subtrahend:{itemsChanged:function(a,c){if(this.minuend){var e=B(c.deleted&&c.deleted.filter(A,
this),c.inserted&&c.inserted.filter(this.has,this));e&&this.emit_itemsChanged(e)}},destroy:function(){this.setOperands(this.minuend,null)}}},init:function(){l.prototype.init.call(this);var a=this.minuend,c=this.subtrahend;this.subtrahend=this.minuend=null;(a||c)&&this.setOperands(a,c)},setOperands:function(a,c){var e,m=!1;!1==a instanceof l&&(a=null);!1==c instanceof l&&(c=null);var h=this.minuend,n=this.subtrahend;if(h!==a){m=!0;this.minuend=a;var k=this.listen.minuend;k&&(h&&h.removeHandler(k,this),
a&&a.addHandler(k,this));this.emit_minuendChanged(h)}if(n!==c){m=!0;this.subtrahend=c;if(k=this.listen.subtrahend)n&&n.removeHandler(k,this),c&&c.addHandler(k,this);this.emit_subtrahendChanged(n)}if(!m)return!1;if(!a||!c)this.itemCount&&this.emit_itemsChanged(e={deleted:this.getItems()});else{var m=[],h=[],p;for(p in this.items_)(!a.items_[p]||c.items_[p])&&m.push(this.items_[p]);for(p in a.items_)!this.items_[p]&&!c.items_[p]&&h.push(a.items_[p]);(e=B(h,m))&&this.emit_itemsChanged(e)}return e},setMinuend:function(a){return this.setOperands(a,
this.subtrahend)},setSubtrahend:function(a){return this.setOperands(this.minuend,a)},clear:function(){this.setOperands()}});var D=s(l,{className:z+".SourceDataset",subscribeTo:m.SOURCE,source:null,sourceMap_:null,emit_sourceChanged:w("sourceChanged","oldSource"),listen:{source:{destroy:function(){this.setSource()}}},init:function(){this.sourceMap_={};var a=this.source;a&&(this.source=null);l.prototype.init.call(this);a&&this.setSource(a)},setSource:function(a){!1==a instanceof l&&(a=null);if(this.source!==
a){var c=this.source,e=this.listen.source;this.source=a;if(e){var m=e.itemsChanged;c&&(c.removeHandler(e,this),m&&m.call(this,c,{deleted:c.getItems()}));a&&(a.addHandler(e,this),m&&m.call(this,a,{inserted:a.getItems()}))}this.emit_sourceChanged(c)}},clear:function(){this.setSource()},destroy:function(){l.prototype.destroy.call(this);this.sourceMap_=null}}),I=s(D,{className:z+".MapFilter",map:C,filter:H,rule:L(N),ruleEvents:r(function(a){var c=this.map?this.map(a):object;if(!1==c instanceof e||this.filter(c))c=
null;var l=this.sourceMap_[a.basisObjectId],m=l.member;if(m!==c){var h=this.members_,n,k,p;l.member=c;m&&(l=m.basisObjectId,this.removeMemberRef&&this.removeMemberRef(m,a),0==--h[l]&&(delete h[l],p=[m]));c&&(m=c.basisObjectId,this.addMemberRef&&this.addMemberRef(c,a),h[m]?h[m]++:(h[m]=1,k=[c]));(n=B(k,p))&&this.emit_itemsChanged(n)}},"update"),addMemberRef:null,removeMemberRef:null,listen:{source:{itemsChanged:function(a,c){var l=this.sourceMap_,m=this.members_,h=[],n=[],k,p,y,r=this.ruleEvents;Q.setAccumulateState(!0);
if(c.inserted)for(var w=0;k=c.inserted[w];w++){y=this.map?this.map(k):k;if(!1==y instanceof e||this.filter(y))y=null;r&&k.addHandler(r,this);l[k.basisObjectId]={sourceObject:k,member:y};y&&(p=y.basisObjectId,m[p]?m[p]++:(m[p]=1,h.push(y)),this.addMemberRef&&this.addMemberRef(y,k))}if(c.deleted)for(w=0;k=c.deleted[w];w++)p=k.basisObjectId,y=l[p].member,r&&k.removeHandler(r,this),delete l[p],y&&(p=y.basisObjectId,0==--m[p]&&(delete m[p],n.push(y)),this.removeMemberRef&&this.removeMemberRef(y,k));Q.setAccumulateState(!1);
(c=B(h,n))&&this.emit_itemsChanged(c)}}},setMap:function(a){"function"!=typeof a&&(a=C);if(this.map!==a)return this.map=a,this.applyRule()},setFilter:function(a){"function"!=typeof a&&(a=H);if(this.filter!==a)return this.filter=a,this.applyRule()},setRule:function(a){"function"!=typeof a&&(a=N);if(this.rule!==a)return this.rule=a,this.applyRule()},applyRule:function(){var a=this.sourceMap_,c=this.members_,l,m,h,n,k,p=[],y=[],r,w;for(w in a){k=a[w];n=k.sourceObject;l=k.member;m=this.map?this.map(n):
n;if(!1==m instanceof e||this.filter(m))m=null;l!=m&&(k.member=m,l&&(h=l.basisObjectId,this.removeMemberRef&&this.removeMemberRef(l,n),c[h]--),m&&(l=m.basisObjectId,this.addMemberRef&&this.addMemberRef(m,n),l in c?c[l]++:(c[l]=1,p.push(m))))}for(h in this.items_)0==c[h]&&(delete c[h],y.push(this.items_[h]));(r=B(p,y))&&this.emit_itemsChanged(r);return r}});p=s(I,{className:z+".Subset",filter:function(a){return!this.rule(a)}});J=s(I,{className:z+".Split",subsetClass:l,keyMap:null,map:function(a){return this.keyMap.resolve(a)},
setRule:function(a){"function"!=typeof a&&(a=N);if(this.rule!==a)return this.rule=a,this.keyMap.keyGetter=a,this.applyRule()},addMemberRef:function(a,c){a.emit_itemsChanged({inserted:[c]})},removeMemberRef:function(a,c){a.emit_itemsChanged({deleted:[c]})},init:function(){if(!this.keyMap||!1==this.keyMap instanceof c)this.keyMap=new c(G({keyGetter:this.rule,itemClass:this.subsetClass},this.keyMap));I.prototype.init.call(this)},getSubset:function(a,c){return this.keyMap.get(a,c)},destroy:function(){I.prototype.destroy.call(this);
this.keyMap.destroy();this.keyMap=null}});w=s(D,{className:z+".Slice",rule:L(N),ruleEvents:r(function(a){var c=this.sourceMap_[a.basisObjectId];a=this.rule(a);var e=this.index_;a!==c.value&&(e.splice(n(e,c),1),c.value=a,e.splice(n(e,c),0,c),this.applyRule())},"update"),index_:null,orderDesc:!1,offset:0,limit:10,listen:{source:{itemsChanged:function(a,c){var e=this.sourceMap_,l=this.index_,m=this.ruleEvents,h=!1,k=!1,p,y=c.inserted,r=c.deleted;if(r){r.length>l.length-r.length&&(h=!0,k=r.length!=l.length,
l.length=0);for(var w=0,A;A=r[w];w++)h||(p=e[A.basisObjectId],l.splice(n(l,p),1)),delete e[A.basisObjectId],m&&A.removeHandler(m,this);if(k)for(var g in e)p=e[g],l.splice(n(l,p),0,p)}if(y){k=!l.length;for(w=0;A=y[w];w++)p={object:A,value:this.rule(A)},e[A.basisObjectId]=p,k?l.push(p):l.splice(n(l,p),0,p),m&&A.addHandler(m,this);k&&l.sort(x)}this.applyRule()}}},emit_rangeChanged:w("rangeChanged","oldOffset","oldLimit"),init:function(){this.index_=[];D.prototype.init.call(this)},setRange:function(a,
c){var e=this.offset,l=this.limit,m=!1;if(e!=a||l!=c)this.offset=a,this.limit=c,m=this.applyRule(),this.emit_rangeChanged(e,l);return m},setOffset:function(a){return this.setRange(a,this.limit)},setLimit:function(a){return this.setRange(this.offset,a)},applyRule:function(){var c=this.offset,e=c+this.limit;this.orderDesc&&(c=this.index_.length-e,e=c+this.limit);for(var l=a.object.slice(this.items_),c=this.index_.slice(Math.max(0,c),Math.max(0,e)),e=[],m,h=0,n;n=c[h];h++){var k=n.object.basisObjectId;
l[k]?delete l[k]:e.push(n.object)}(m=B(e,F(l)))&&this.emit_itemsChanged(m);return m},destroy:function(){D.prototype.destroy.call(this);this.index_=null}});z=s(D,{className:z+".Cloud",subsetClass:l,rule:L(H),ruleEvents:r(function(a){var c=this.sourceMap_,e=this.members_,l=a.basisObjectId,m=c[l].list,c=c[l].list={},l=this.rule(a),h,k=[],n=[],p;if(Array.isArray(l))for(var y=0;y<l.length;y++)if((p=this.keyMap.resolve(l[y]))&&!p.has(a))r=p.basisObjectId,c[r]=p,m[r]||(p.emit_itemsChanged({inserted:[a]}),
e[r]?e[r]++:(k.push(p),e[r]=1));for(var r in m)c[r]||(p=m[r],p.emit_itemsChanged({deleted:[a]}),--e[r]||(delete e[r],n.push(p)));(h=B(k,n))&&this.emit_itemsChanged(h)},"update"),keyMap:null,map:C,listen:{source:{itemsChanged:function(a,c){var e=this.sourceMap_,l=this.members_,m=this.ruleEvents,h,k,n,p=[],r=[];Q.setAccumulateState(!0);if(h=c.inserted)for(var y=0,w;w=h[y];y++){var g=this.rule(w),d={object:w,list:{}};e[w.basisObjectId]=d;if(Array.isArray(g))for(var b=0,v={};b<g.length;b++)if((k=this.keyMap.get(g[b],
!0))&&!v[k.basisObjectId])n=k.basisObjectId,v[n]=!0,d.list[n]=k,k.emit_itemsChanged({inserted:[w]}),l[n]?l[n]++:(p.push(k),l[n]=1);m&&w.addHandler(m,this)}if(h=c.deleted)for(y=0;w=h[y];y++){k=w.basisObjectId;g=e[k].list;delete e[k];for(n in g)k=g[n],k.emit_itemsChanged({deleted:[w]}),--l[n]||(delete l[n],r.push(k));m&&w.removeHandler(m,this)}Q.setAccumulateState(!1);(c=B(p,r))&&this.emit_itemsChanged(c)}}},init:function(){if(!this.keyMap||!1==this.keyMap instanceof c)this.keyMap=new c(G({keyGetter:this.map,
itemClass:this.subsetClass},this.keyMap));D.prototype.init.call(this)},getSubset:function(a,c){return this.keyMap.get(a,c)},destroy:function(){D.prototype.destroy.call(this);this.keyMap.destroy();this.keyMap=null}});K.exports={createRuleEvents:r,Merge:y,Subtract:h,SourceDataset:D,MapFilter:I,Subset:p,Split:J,Slice:w,Cloud:z}}],["basis.entity",function(h,K,a,p,J,z,s){function B(a){U[a]=U[a]||0;return a+U[a]++}function r(a,b){var c=W[a];if(c){for(var d=0,f;f=c[d];d++)f[0][f[1]]=b;delete W[a]}X[a]=b}
function n(a,b,c){if(X[a])return X[a];var d=W[a];d||(d=W[a]=[]);d.push([b,c]);return S}function x(){var a=c(arguments),b=a.pop(),d=a[0],f=a[1],e=a[2],k;if("function"!=typeof b)throw 39;switch(a.length){case 0:k=function(){return b()};break;case 1:k=function(a,c,f){return d in a?b(c[d]):f};break;case 2:k=function(a,c,e){return d in a||f in a?b(c[d],c[f]):e};break;case 3:k=function(a,c,k){return d in a||f in a||e in a?b(c[d],c[f],c[e]):k};break;default:k=function(c,d,f){for(var e=!1,k=[],g=0,l;l=a[g];g++)e=
e||l in c,k.push(d[l]);return e?b.apply(null,k):f}}k.args=a;return k.calc=k}function G(){return x.apply(null,c(arguments).concat(function(){for(var a=[],b=arguments.length;0<b--;){if(null==arguments[b])return null;a.push(arguments[b])}return a.join("-")}))}function F(a,b){if(!Array.isArray(a))return null;if(!Array.isArray(b)||a.length!=b.length)return a||null;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return a;return b}function L(b,c,d){if(!b.all.itemCount){b.aliases[c]=c;d="string"==typeof d||Array.isArray(d)||
"function"==typeof d&&d.calc!==d?{type:d}:a.object.slice(d);if("type"in d){"string"==typeof d.type&&(d.type=n(d.type,b.fields,c));if(Array.isArray(d.type)){var f=d.type.slice();d.type=function(a,b){return-1!=f.indexOf(a)?a:b};d.defValue=d.type(d.defValue,f[0])}d.type===Array&&(d.type=F);"function"!=typeof d.type&&(d.type=e)}var g=d.type||e;[P,M,O,k].has(g)&&(d.id=!0);d.id&&(b.index||(b.index=new T(String)),b.idFields[c]=!0,b.idField||b.compositeKey?(b.idField=null,b.compositeKey=G.apply(null,w(b.idFields))):
b.idField=c);d.calc?N(b,c,d.calc):b.fields[c]=g;b.defaults[c]="defValue"in d?d.defValue:g();b.entityClass.prototype["get_"+c]=function(a){return a&&this.modified&&c in this.modified?this.modified[c]:this.data[c]};b.entityClass.prototype["set_"+c]=function(a,b){return this.set(c,a,b)};$[c]||($[c]={destroy:function(){this.set(c,null)}})}}function C(a,b,c){c in a.fields&&!1==b in a.aliases&&(a.aliases[b]=c)}function N(a,b,c){if(!b||!a.fields[b]){a.calcs||(a.calcs=[]);var d={args:c.args||[],wrapper:c},
f=a.calcs.length,e=0;if(c.args)for(var k=0;k<a.calcs.length;k++)c.args.has(a.calcs[k].key)&&(e=k+1);if(b){d.key=b;for(k=0;k<a.calcs.length;k++)if(a.calcs[k].args.has(b)){f=k;break}if(e>f)return;a.idField&&b==a.idField&&(a.compositeKey=c);a.fields[b]=function(a,b){return b}}else f=e;a.calcs.splice(Math.min(f,e),0,d)}}var H=this.path,u=a.Class,w=a.object.keys,m=a.object.extend,e=a.fn.$self,c=a.array.from,l=a.event.Emitter;h=a.event.create;var Q=a.data.Object,y=a.data.Slot,A=a.data.Dataset;p=a.data.dataset.Subset;
var D=a.data.dataset.Split,I=a.data.STATE,f={},q={string:1,number:1},E=[],P=function(a){return isNaN(a)?null:Number(a)},M=function(a){return isNaN(a)?null:Number(a)},O=function(a){return isNaN(a)?null:parseInt(a,10)},k=function(a){return null==a?null:String(a)},U={},X={},W={},S=function(){},T=a.Class(null,{className:H+".Index",items:null,fn:String,init:function(a){this.items={};"function"==typeof a&&(this.fn=a)},calcWrapper:function(a,b){var c=this.fn(a,b);if(c!==b&&this.items[c])throw 38;return c},
get:function(a,b){var c=this.items[a];if(!b||c instanceof b)return c},add:function(a,b){var c=this.items[a];if(b&&(!c||c===b))return this.items[a]=b,!0},remove:function(a,b){if(this.items[a]===b)return delete this.items[a],!0},destroy:function(){this.items=null}});s=function(a,b){return function(c){return a.prototype[b].call(this,c&&c.map(this.wrapper))}};J=function(a,b){return function(){this.name||(this.name=B(b));a.prototype.init.call(this)}};z=function(b){return function(b){var c=a.object.slice(this.items_),
d=[];if(b){A.setAccumulateState(!0);for(var f=0;f<b.length;f++){var e=this.wrapper(b[f]);e&&(c[e.basisObjectId]=!1)}A.setAccumulateState(!1)}for(var k in this.items_)!1==k in c&&d.push(this.items_[k]);for(k in c)c[k]&&c[k].destroy();return d.length?d:null}};var g=u(A,{className:H+".EntitySet",wrapper:e,init:J(A,"EntitySet"),sync:z(A),set:s(A,"set"),add:s(A,"add"),remove:s(A,"remove"),destroy:function(){A.prototype.destroy.call(this);this.wrapper=null}}),d=u(g,{className:H+".ReadOnlyEntitySet",set:a.fn.$false,
add:a.fn.$false,remove:a.fn.$false,clear:a.fn.$false});s=u(p,{className:H+".EntityCollection",init:J(p,"EntityCollection"),sync:z(p)});s.sourceHandler=p.sourceHandler;p=u(D,{className:H+".EntityGrouping",subsetClass:d,init:J(D,"EntityGrouping"),sync:z(D),getSubset:function(a,b){var c=D.prototype.getSubset.call(this,a,b);c&&(c.wrapper=this.wrapper);return c}});var b=function(a,d){if(this instanceof b){a||(a=e);if(!d||X[d])d=B("UntitledEntitySetType");var f=new v({entitySetClass:{wrapper:a}}),k=f.entitySetClass,
l=function(a,b){return null!=a?(b instanceof g||(b=f.createEntitySet()),b.set(a instanceof A?a.getItems():c(a)),b):null};"string"==typeof a&&(k.prototype.wrapper=n(a,k.prototype,"wrapper"));r(d,l);m(l,{type:f,typeName:d,toString:function(){return this.typeName+"()"},entitySetType:f,extend:function(){return k.extend.apply(k,arguments)},reader:function(a){if(Array.isArray(a)){var b=k.prototype.wrapper;return a.map(b.reader||b)}return a}});return l}},v=u(null,{className:H+".EntitySetConstructor",entitySetClass:g,
extendConstructor_:!0,createEntitySet:function(){return new this.entitySetClass}}),R=function(a){if(this instanceof R){var b;b=a.singleton?function(a){var b=c.get();b?a&&b.update(a):b=new d(a||{});return b}:function(a,b){if(null!=a){if(a===b||a.entityType===c)return a;var f,e=c.idField;if(q[typeof a]){if(!e)return;f=a;a={};a[e]=f}else c.compositeKey?f=c.compositeKey(a,a):e&&(f=a[e]);null!=f&&(b=c.index.get(f,c.entityClass));b&&b.entityType===c?b.update(a):b=new d(a);return b}};var c=new ba(a||{},
b),d=c.entityClass;r(c.name,b);m(b,{all:c.all,type:c,typeName:c.name,entityType:c,toString:function(){return this.typeName+"()"},reader:function(a){return c.reader(a)},addField:function(a,b){c.addField(a,b)},addCalcField:function(a,b){c.addCalcField(a,b)},get:function(a){return c.get(a)},getSlot:function(a,b){return c.getSlot(a,b)},extend:function(){return d.extend.apply(d,arguments)}});return b}},$={},ba=u(null,{className:H+".EntityType",wrapper:null,all:null,fields:null,idFields:null,defaults:null,
aliases:null,slots:null,singleton:!1,index:null,entityClass:null,init:function(b,c){this.name=b.name;if(!this.name||X[this.name])this.name=B("UntitledEntityType");this.fields={};this.idFields={};this.defaults={};this.aliases={};this.slots={};var f=b.index;f&&f instanceof T&&(this.index=f);this.wrapper=c;this.all=new d(a.object.complete({wrapper:c},b.all));if(this.singleton=!!b.singleton){var e;this.get=function(){return e};this.all.addHandler({itemsChanged:function(a,b){e=b.inserted?b.inserted[0]:
null}},this)}this.entityClass=ea(this,this.all,this.fields,this.defaults,this.slots);this.entityClass.extend({entityType:this,type:c,typeName:this.name,state:b.state||this.entityClass.prototype.state});for(var k in b.fields)L(this,k,b.fields[k]);for(k in b.aliases)C(this,k,b.aliases[k]);b.constrains&&b.constrains.forEach(function(a){N(this,null,a)},this);E.push(this)},reader:function(a){var b={};if(q[typeof a])return this.idField?a:null;if(!a||null==a)return null;for(var c in a){var d=this.aliases[c];
if(d){var f=this.fields[d].reader;b[d]=f?f(a[c]):a[c]}}return b},get:function(a){a=this.getId(a);if(null!=a)return this.index.get(a,this.entityClass)},getId:function(a){if((this.idField||this.compositeKey)&&null!=a){if(q[typeof a])return a;if(a&&a.entityType===this)return a.__id__;a instanceof Q&&(a=a.data);return this.compositeKey?this.compositeKey(a,a):a[this.idField]}},getSlot:function(a){var b=this.getId(a);if(null!=b){var c=this.slots[b];c||(q[typeof a]&&(c={},this.idField&&!this.compositeKey&&
(c[this.idField]=a),a=c),c=this.slots[b]=new y({delegate:this.get(b),data:a}));return c}}}),aa=u(Q,{className:H+".BaseEntity",canSetDelegate:!1,isTarget:!0,modified:null,emit_rollbackUpdate:h("rollbackUpdate")}),ea=function(a,b,c,d,e){function k(b,c,d){var f=a.calcs,e=b.data,l=!1,m=b.__id__,h;try{if(f)for(var q=0,n;n=f[q];q++){var p=n.key,v=e[p],O=n.wrapper(c,e,v);p&&O!==v&&(e[p]=O,c[p]=v,l=!0)}h=a.compositeKey?a.compositeKey(c,e,m):a.idField&&a.idField in c?e[a.idField]:m;h!==m&&a.index.calcWrapper(h,
m)}catch(y){l=!1;h=m;for(p in c)b.data[p]=c[p];if(d&&!b.modified)for(p in d){b.modified=d;break}}h!==m&&(b.__id__=h,g(b,m,h));return l}function g(b,c,d){var f=a.index;null!=c&&(f.remove(c,b),e[c]&&e[c].setDelegate());null!=d&&(f.add(d,b),e[d]&&e[d].setDelegate(b))}return u(aa,{className:H+".Entity",extendConstructor_:!1,init:function(a){this.delegate=null;this.data={};aa.prototype.init.call(this);this.fieldHandlers_={};var f,e={},g;for(g in c)g in a?(e[g]=d[g],f=c[g](a[g])):"function"==typeof d[g]?
(e[g]=void 0,f=d[g](a)):f=d[g],f&&f!==this&&f instanceof l&&f.addHandler($[g],this)&&(this.fieldHandlers_[g]=!0),this.data[g]=f;k(this,e);b.emit_itemsChanged({inserted:[this]})},toString:function(){return"[object "+this.constructor.className+"("+this.entityType.name+")]"},getId:function(){return this.__id__},get:function(a,b){return b&&this.modified&&a in this.modified?this.modified[a]:this.data[a]},set:function(b,d,f,e){var g=c[b];if(!g)return!1;var m,h=this.modified;g===F&&(h&&b in h)&&(d=F(d,h[b]));
d=g(d,this.data[b]);g=this.data[b];if(d!==g&&(!d||!g||d.constructor!==Date||g.constructor!==Date||+d!==+g))a:{m={};if(!a.idFields[b])if(f)h||(this.modified=h={}),!1===b in h?(m.rollback={key:b,value:void 0},h[b]=g):h[b]===d&&(m.rollback={key:b,value:d},delete h[b],w(h).length||(this.modified=null));else if(h&&b in h)if(h[b]!==d){m.rollback={key:b,value:h[b]};h[b]=d;break a}else return!1;this.data[b]=d;this.fieldHandlers_[b]&&(g.removeHandler($[b],this),this.fieldHandlers_[b]=!1);d&&d!==this&&d instanceof
l&&d.addHandler($[b],this)&&(this.fieldHandlers_[b]=!0);m.key=b;m.value=g;m.delta={};m.delta[b]=g}else!f&&(h&&b in h)&&(m={rollback:{key:b,value:h[b]}},delete h[b],w(h).length||(this.modified=null));if(!e&&m){b=m.key;f=m.delta||{};var q;m.rollback&&(q={},q[m.rollback.key]=m.rollback.value);k(this,f,q)&&(b=!0);b&&(this.emit_update(f),m.delta=f);q&&this.emit_rollbackUpdate(q)}return m||!1},update:function(a,b){if(a){var c,d={},f,e={},g,l;for(l in a)if(g=this.set(l,a[l],b,!0))g.key&&(c=!0,d[g.key]=g.value),
g.rollback&&(f=!0,e[g.rollback.key]=g.rollback.value);k(this,d,e)&&(c=!0);c&&this.emit_update(d);f&&this.emit_rollbackUpdate(e)}return c?d:!1},reset:function(){this.update(d)},clear:function(){var a={},b;for(b in this.data)a[b]=void 0;return this.update(a)},commit:function(a){if(this.modified){var b=this.modified;this.modified=null}this.update(a);b&&this.emit_rollbackUpdate(b)},rollback:function(){if(this.state!=I.PROCESSING){if(this.modified){var a=this.modified;this.modified=null;this.update(a);
this.emit_rollbackUpdate(a)}this.setState(I.READY)}},destroy:function(){for(var a in this.fieldHandlers_)this.fieldHandlers_[a]&&this.data[a].removeHandler($[a],this);this.fieldHandlers_=f;null!=this.__id__&&g(this,this.__id__,null);Q.prototype.destroy.call(this);b.emit_itemsChanged({deleted:[this]});this.data=f;this.modified=null}})};K.exports={isEntity:function(a){return a&&a instanceof aa},createType:function(b,c){var d=b||{};"string"==typeof b?d={name:d,fields:c||{}}:c&&(d=a.object.merge(d,{fields:c}));
return new R(d)},createSetType:function(a,c){return 1<arguments.length?new b(c,a):new b(a)},validate:function(){for(var b in W)a.dev.warn(H+": type `"+b+"` is not defined, but used by "+W[b].length+" type(s)")},getTypeByName:function(a){return X[a]},NumericId:P,NumberId:M,IntId:O,StringId:k,Index:T,CalculateField:x,calc:x,EntityType:R,Entity:ea,BaseEntity:aa,EntitySetType:b,EntitySet:g,ReadOnlyEntitySet:d,Collection:s,Grouping:p}}],["basis.net",function(h,K,a,p,J,z,s){function B(a){var c=u(a);return function(){c.apply(l,
arguments);this.service&&c.apply(this.service,arguments);c.apply(this,arguments)}}function r(a){var c=u(a);return function(){var f=[this].concat(C(arguments));c.apply(l,f);this.transport&&this.transport["emit_"+a].apply(this.transport,f);c.apply(this,arguments)}}function n(a){return String(a).replace(q,function(a){a=a.charCodeAt(0).toHex();return"%"+(2>a.length?"0":"")+a})}function x(c,e){var l={};f.test(e.method)?("multipart/form-data"!=e.contentType&&(l["Content-Type"]=e.contentType+(e.encoding?
";charset="+e.encoding:"")),F.test("gecko")&&(l.Connection="close")):F.test("ie")&&(l["If-Modified-Since"]="Thu, 01 Jan 1970 00:00:00 GMT");a.object.iterate(L(l,e.headers),function(a,c){null!=c&&"function"!=typeof c&&this.setRequestHeader(a,c)},c)}function G(c){var f=this.xhr;f&&("number"!=typeof c&&(c=f.readyState),c!=this.prevReadyState_&&(this.prevReadyState_=c,this.emit_readyStateChanged(c),c==I?(this.clearTimeout(),f.onreadystatechange=a.fn.$undef,"unknown"==typeof f.responseText||!f.responseText&&
!f.getAllResponseHeaders()?(this.emit_abort(),c=this.stateOnAbort):(this.processResponse(),this.isSuccessful()?(this.emit_success(this.getResponseData()),c=w.READY):(this.processErrorResponse(),this.emit_failure(this.data.error),c=w.ERROR)),this.emit_complete(this)):c=w.PROCESSING,this.setState(c,this.data.error)))}h=this.path;var F=a.ua,L=a.object.extend,C=a.array.from,N=a.object.slice,H=a.object.merge,u=a.event.create,w=a.data.STATE,m=a.data.Object,e=a.event.Emitter,c=[],l=new e({abort:function(){for(var a=
C(c),f=0;f<a.length;f++)a[f].abort();return a},handler:{start:function(a){c.add(a.transport)},complete:function(a){c.remove(a.transport)}}}),Q=m.subclass({className:h+".AbstractRequest",influence:null,initData:null,requestData:null,transport:null,stateOnAbort:w.UNDEFINED,emit_start:r("start"),emit_timeout:r("timeout"),emit_abort:r("abort"),emit_success:r("success"),emit_failure:r("failure"),emit_complete:r("complete"),emit_stateChanged:function(a){m.prototype.emit_stateChanged.call(this,a);if(this.influence)for(a=
0;a<this.influence.length;a++)this.influence[a].setState(this.state,this.state.data)},init:function(){m.prototype.init.call(this);this.influence=[]},setInfluence:function(a){this.influence=C(a)},clearInfluence:function(){this.influence=null},doRequest:a.fn.$undef,getResponseData:a.fn.$undef,destroy:function(){m.prototype.destroy.call(this);this.requestData=this.initData=null;this.clearInfluence()}}),y=e.subclass({className:h+".AbstractTransport",requestClass:Q,requests:null,poolLimit:null,poolHashGetter:a.fn.$true,
emit_start:B("start"),emit_timeout:B("timeout"),emit_abort:B("abort"),emit_success:B("success"),emit_failure:B("failure"),emit_complete:B("complete"),init:function(){this.requests={};this.requestQueue=[];this.inprogressRequests=[];e.prototype.init.call(this);this.addHandler(A,this);this.poolLimit&&this.addHandler(D,this)},getRequestByHash:function(a){var c=this.requests[a];if(!c){for(var f in this.requests)if(this.requests[f].isIdle()&&!this.requestQueue.has(this.requests[f])){c=this.requests[f];
delete this.requests[f];break}c||(c=new this.requestClass({transport:this}));this.requests[a]=c}return c},prepare:a.fn.$true,prepareRequestData:a.fn.$self,request:function(a){if(this.prepare()){a=N(a);var c=this.poolHashGetter(this.prepareRequestData(a)),c=this.getRequestByHash(c,!0);c.initData&&c.abort();c.initData=a;c.requestData=a;c.setInfluence(a.influence||this.influence);this.poolLimit&&this.inprogressRequests.length>=this.poolLimit?(this.requestQueue.push(c),c.setState(w.PROCESSING)):c.doRequest();
return c}},abort:function(){for(var a=0,c;c=this.inprogressRequests[a];a++)c.abort();for(a=0;c=this.requestQueue[a];a++)c.setState(w.ERROR);this.inprogressRequests=[];this.requestQueue=[]},stop:function(){this.stopped||(this.stoppedRequests=this.inprogressRequests.concat(this.requestQueue),this.abort(),this.stopped=!0)},resume:function(){if(this.stoppedRequests){for(var a=0,c;c=this.stoppedRequests[a];a++)c.transport.request(c.initData);this.stoppedRequests=null}this.stopped=!1},destroy:function(){for(var a in this.requests)this.requests[a].destroy();
this.requests={};this.stoppedRequests=this.requestQueue=this.inprogressRequests=null;e.prototype.destroy.call(this)}}),A={start:function(a,c){this.inprogressRequests.add(c)},complete:function(a,c){this.inprogressRequests.remove(c)}},D={complete:function(){var c=this.requestQueue.shift();c&&a.timer.nextTick(function(){c.doRequest()})}},I=4;"HEAD GET POST PUT PATCH DELETE TRACE LINK UNLINK CONNECT".qw();var f=/^(POST|PUT|PATCH|LINK|UNLINK)$/i,q=/[\%\=\&\<\>\s\+]/g,E="native",P=function(){if("XMLHttpRequest"in
p)return function(){return new XMLHttpRequest};var a=p.ActiveXObject;if(a)for(var c=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],f=0;E=c[f];f++)try{if(new a(E))return function(){return new a(E)}}catch(e){}throw 40;}();J=Q.subclass({className:h+".AjaxRequest",requestStartTime:0,timeout:3E4,timer_:null,debug:!1,emit_readyStateChanged:r("readyStateChanged"),init:function(){Q.prototype.init.call(this);this.xhr=P()},isIdle:function(){return this.xhr.readyState==I||0==
this.xhr.readyState},isSuccessful:function(){try{var a=this.xhr.status;return void 0==a||0==a||200<=a&&300>a}catch(c){}return!1},processResponse:function(){this.update({contentType:this.xhr.getResponseHeader("content-type"),responseText:this.xhr.responseText,responseXML:this.xhr.responseXML,status:this.xhr.status})},getResponseData:function(){return/^application\/json/i.test(this.data.contentType)?this.data.responseText.toObject():this.data.responseText},processErrorResponse:function(){this.update({error:{code:"SERVER_ERROR",
msg:this.xhr.responseText}})},prepare:a.fn.$true,prepareRequestData:function(a){var c=[],e=a.url;a=N(a);for(var l in a.params){var m=a.params[l];null==m||null==m.toString()||c.push(n(l)+"="+n(m.toString()))}c=c.join("&");!a.postBody&&f.test(a.method)&&(a.postBody=c||"",c="");a.routerParams&&(e=e.replace(/:([a-z\_\-][a-z0-9\_\-]+)/gi,function(c,f){if(f in a.routerParams)return a.routerParams[f]}));c&&(e+=(-1==e.indexOf("?")?"?":"&")+c);a.requestUrl=e;return a},doRequest:function(){this.send(this.prepareRequestData(this.requestData))},
send:function(a){this.update({responseText:"",responseXML:"",status:"",error:""});F.test("gecko1.8.1-")&&a.asynchronous&&(this.xhr=P());this.emit_start();var c=this.xhr;this.prevReadyState_=-1;c.onreadystatechange=G.bind(this);a.asynchronous||G.call(this,0);c.open(a.method,a.requestUrl,a.asynchronous);x(c,a);this.setTimeout(this.timeout);var e=a.postBody;if(f.test(a.method)&&F.test("ie9-"))if("object"==typeof e&&"undefined"!=typeof e.documentElement&&"string"==typeof e.xml)e=e.xml;else if("string"==
typeof e)e=e.replace(/\r/g,"");else if(null==e||""==e)e="[No data]";c.send(e);return!0},repeat:function(){this.requestData&&(this.abort(),this.doRequest())},abort:function(){this.isIdle()||(this.clearTimeout(),this.xhr.abort(),this.xhr.readyState!=I&&G.call(this,I))},setTimeout:function(a){"ontimeout"in this.xhr?(this.xhr.timeout=a,this.xhr.ontimeout=this.timeoutAbort.bind(this)):this.timer_=setTimeout(this.timeoutAbort.bind(this),a)},clearTimeout:function(){!1=="ontimeout"in this.xhr&&(this.timer_=
clearTimeout(this.timer_))},timeoutAbort:function(){this.update({error:{code:"TIMEOUT_ERROR",message:"Timeout error"}});this.emit_timeout(this);this.abort()},destroy:function(){this.abort();this.xhr=null;Q.prototype.destroy.call(this)}});var M=y.subclass({className:h+".AjaxTransport",requestClass:J,emit_readyStateChanged:B("readyStateChanged"),asynchronous:!0,method:"GET",contentType:"application/x-www-form-urlencoded",encoding:null,requestHeaders:a.Class.extensibleProperty(),init:function(){y.prototype.init.call(this);
this.params=N(this.params)},setParam:function(a,c){this.params[a]=c},setParams:function(a){this.clearParams();for(var c in a)this.setParam(c,a[c])},removeParam:function(a){delete this.params[a]},clearParams:function(){for(var a in this.params)delete this.params[a]},prepareRequestData:function(a){var c=a.url||this.url;if(!c)throw 41;L(a,{requestUrl:c,url:c,method:a.method||this.method,contentType:a.contentType||this.contentType,encoding:a.encoding||this.encoding,asynchronous:this.asynchronous,headers:H(this.requestHeaders,
a.headers),postBody:a.postBody||this.postBody,params:H(this.params,a.params),routerParams:a.routerParams,influence:a.influence});return a}});K.exports={createEvent:B,transportDispatcher:l,AbstractRequest:Q,AbstractTransport:y,AjaxTransport:M,AjaxRequest:J,Transport:M,request:function(c,f,e){"string"==typeof c&&(c={url:c,asynchronous:!(!f&&!e)});var l=new M(c);l.addHandler({success:f&&function(a,c,e){f(e)},failure:e&&function(a,c,f){e(f)},complete:function(){a.timer.nextTick(function(){l.destroy()})}});
c=l.request();if(!c.requestData.asynchronous)return c.getResponseData()}}}],["basis.net.action",function(h,K,a,p,J,z,s){var B=a.data.STATE.UNDEFINED,r=a.data.STATE.READY,n=a.data.STATE.PROCESSING,x=a.data.STATE.ERROR,G=function(){},F={start:function(a,h){var p=h.requestData.origin;this.start.call(h.requestData.origin);p.state!=n&&p.setState(n)},success:function(a,h,p){a=h.requestData.origin;this.success.call(a,p);a.state==n&&a.setState(r)},failure:function(a,h,p){a=h.requestData.origin;this.failure.call(a,
p);a.state==n&&a.setState(x,p)},abort:function(a,h){var p=h.requestData.origin;this.abort.call(p);p.state==n&&p.setState(B)},complete:function(a,h){this.complete.call(h.requestData.origin)}},L={start:G,success:G,failure:G,abort:G,complete:G};K.exports={create:function(h){h=a.object.extend({prepare:G,request:G},h);var p=a.object.splice(h,["prepare","request"]),r=a.object.merge(L,a.object.splice(h,["start","success","failure","abort","complete"])),x=a.fn.lazyInit(function(){var n=h.transport?h.transport:
h.service?h.service.createTransport(h):h.createTransport?h.createTransport(h):new a.net.Transport(h);n.addHandler(F,r);return n});return function(){this.state!=n&&(p.prepare.apply(this,arguments),this.request=x().request(a.object.complete({origin:this},p.request.apply(this,arguments))))}}}}],["basis.net.service",function(h,K,a,p,J,z,s){h=a.event.create;var B=a.net.action.create,r=a.event.Emitter,n={start:function(a,h){this.inprogressTransports.add(h.transport)},complete:function(a,h){this.inprogressTransports.remove(h.transport)}};
h=r.subclass({className:this.path+".Service",inprogressTransports:null,transportClass:a.net.AjaxTransport,emit_sessionOpen:h("sessionOpen"),emit_sessionClose:h("sessionClose"),emit_sessionFreeze:h("sessionFreeze"),emit_sessionUnfreeze:h("sessionUnfreeze"),isSecure:!1,prepare:a.fn.$true,signature:a.fn.$undef,isSessionExpiredError:a.fn.$false,init:function(){r.prototype.init.call(this);this.inprogressTransports=[];var a=this.transportClass;this.transportClass=a.subclass({service:this,needSignature:this.isSecure,
emit_failure:function(h,n){a.prototype.emit_failure.call(this,h,n);this.needSignature&&this.service.isSessionExpiredError(h)&&(this.service.freeze(),this.service.stoppedTransports.push(this),this.stop())},request:function(h){if(this.service.prepare(this,h)&&(!this.needSignature||this.service.sign(this)))return a.prototype.request.call(this,h)}});this.addHandler(n)},sign:function(a){if(this.sessionKey)return this.signature(a,this.sessionData),!0},openSession:function(a,h){this.sessionKey=a;this.sessionData=
h;this.unfreeze();this.emit_sessionOpen()},closeSession:function(){this.freeze();this.emit_sessionClose()},freeze:function(){if(this.sessionKey){this.sessionData=this.sessionKey=null;this.stoppedTransports=this.inprogressTransports.filter(function(a){return a.needSignature});for(var a=0,h;h=this.inprogressTransports[a];a++)h.stop();this.emit_sessionFreeze()}},unfreeze:function(){if(this.stoppedTransports)for(var a=0,h;h=this.stoppedTransports[a];a++)h.resume();this.emit_sessionUnfreeze()},createTransport:function(a){return new this.transportClass(a)},
createAction:function(h){return B(a.object.complete({service:this},h))},destroy:function(){this.sessionData=this.sessionKey=this.stoppedTransports=this.inprogressTransports=null;r.prototype.destroy.call(this)}});K.exports={Service:h}}],["app.service",function(h,K,a,p,J,z,s){h=new a.net.service.Service({transportClass:a.net.Transport.subclass({request:function(){this.setParam("uuid","9A248E954317E536A4DD1502B59BB7DB");a.net.Transport.prototype.request.apply(this,arguments)}})});K.exports={"default":h}}],
["app.type",function(h,K,a,p,J,z,s){K.exports={Event:a.resource("6.js").fetch(),Entry:a.resource("7.js").fetch(),Provider:a.resource("8.js").fetch()}}],["basis.layout",function(h,K,a,p,J,z,s){function B(a,c){if(A)try{return parseFloat(G.getComputedStyle(a,null)[c])}catch(e){}return 0}function r(a,c){if(A)return B(a,"height");N.setStyle(c,{borderTop:a.currentStyle.borderTopWidth+" solid red",borderBottom:a.currentStyle.borderBottomWidth+" solid red",paddingTop:a.currentStyle.paddingTop,paddingBottom:a.currentStyle.paddingBottom,
fontSize:0.01,height:0,overflow:"hidden"});return a.offsetHeight-c.offsetHeight}function n(a,c){if(y)a.onresize=c;else{var e=F.createElement({description:"iframe",css:{position:"absolute",width:"100%",height:"100%",border:"none",left:0,zIndex:-1,top:"-2000px"}});F.insert(a,e);e.onload=function(){(e.contentWindow.onresize=c)()}}}h=this.path;var x=p.document,G=x.defaultView;p=a.Class;var F=a.dom,L=a.ua,C=a.object.extend,N=a.cssom,H=a.cssom.classList,u=a.ui.Node,w=L.test("IE"),m=L.test("IE7+"),e=L.test("IE8-"),
c=!1;J=F.createElement("");z=["","-webkit-"];for(s=0;s<z.length;s++)try{if(!("-webkit-"==z[s]&&a.ua.is("opera"))){var l=z[s]+"box";J.style.display=l;if(J.style.display==l){c=z[s];break}}}catch(Q){}var y="undefined"!=typeof J.onresize,A=G&&G.getComputedStyle,D={top:NaN,left:NaN,bottom:NaN,right:NaN,width:NaN,height:NaN,defined:!1},I=p(null,{className:h+".Box",init:function(a,c,e){this.reset();this.element=F.get(a);this.offsetElement=e;c||this.recalc(this.offsetElement)},reset:function(){C(this,D)},
set:function(a,c){if(this.defined){switch(a.toLowerCase()){case "left":this.left=c;this.right=this.left+this.width;break;case "right":this.right=c;this.left=this.right-this.width;break;case "width":this.width=c;this.right=this.left+this.width;break;case "top":this.top=c;this.bottom=this.top+this.height;break;case "bottom":this.bottom=c;this.top=this.bottom-this.height;break;case "height":this.height=c,this.bottom=this.top+this.height}(0>=this.width||0>=this.height)&&this.reset()}return this},recalc:function(a){this.reset();
var c=this.element;if(c){var l=c,h=x.documentElement;if(c.getBoundingClientRect)l=c.getBoundingClientRect(),this.top=l.top,this.left=l.left,w&&(m?e&&(this.top+=h.scrollTop-h.clientTop,this.left+=h.scrollLeft-h.clientLeft):c!=x.body&&(this.top-=x.body.clientTop-x.body.scrollTop,this.left-=x.body.clientLeft-x.body.scrollLeft)),a&&(a!==x.body?(a=new I(a),this.top-=a.top,this.left-=a.left,a.destroy()):(this.top+=a.scrollTop+h.scrollTop,this.left+=a.scrollLeft+h.scrollLeft));else if(x.getBoxObjectFor){var n=
x.getBoxObjectFor(h),l=x.getBoxObjectFor(c);this.top=l.screenY-n.screenY;this.left=l.screenX-n.screenX;if(L.test("FF1.5-")){if(l=c.offsetParent)this.top-=l.scrollTop,this.left-=l.scrollLeft;l!=x.body&&(this.top+=h.scrollTop,this.left+=h.scrollLeft)}if(L.test("FF2+")){if(this.top&&(l=h.scrollTop,2<l)){for(var n=0,p=Math.floor(Math.log(l)/Math.LN2);0<=p;p-=3)n+=1<<p;l>n&&(this.top-=1)}this.left&&(this.left-=1<h.scrollLeft)}a&&(a=new I(a),this.top-=a.top,this.left-=a.left,a.destroy())}else if(c!=a){this.top=
c.offsetTop;this.left=c.offsetLeft;this.top-=x.body.clientTop-x.body.scrollTop;for(this.left-=x.body.clientLeft-x.body.scrollLeft;(l=l.offsetParent)&&l!=a;)this.top+=l.offsetTop+l.clientTop-l.scrollTop,this.left+=l.offsetLeft+l.clientLeft-l.scrollLeft}else this.top=this.left=0;this.width=c.offsetWidth;this.height=c.offsetHeight;this.bottom=this.top+this.height;this.right=this.left+this.width;this.defined=!0}return this.defined},intersect:function(a){if(!this.defined)return!1;!1==a instanceof I&&(a=
new I(a));return a.defined&&a.right>this.left&&a.left<this.right&&a.bottom>this.top&&a.top<this.bottom},destroy:function(){this.offsetElement=this.element=null}}),l=p(I,{className:h+".Intersection",init:function(a,c,e){this.boxA=a instanceof I?a:new I(a,!0);this.boxB=c instanceof I?c:new I(c,!0);e||this.recalc()},recalc:function(){this.reset();if(!this.boxA.recalc()||!this.boxB.recalc())return!1;this.boxA.intersect(this.boxB)&&(this.top=Math.max(this.boxA.top,this.boxB.top),this.left=Math.max(this.boxA.left,
this.boxB.left),this.bottom=Math.min(this.boxA.bottom,this.boxB.bottom),this.right=Math.min(this.boxA.right,this.boxB.right),this.width=this.right-this.left,this.height=this.bottom-this.top,0>=this.width||0>=this.height?this.reset():this.defined=!0);return this.defined},destroy:function(){I.prototype.destroy.call(this);this.boxB=this.boxA=null}});J=p(I,{className:h+".Viewport",recalc:function(){this.reset();var a=this.element;if(a){var c=a;this.width=a.clientWidth;this.height=a.clientHeight;if(a.getBoundingClientRect){var e=
a.getBoundingClientRect();this.top=e.top;for(this.left=e.left;c=c.offsetParent;)this.top-=c.scrollTop,this.left-=c.scrollLeft}else if(x.getBoxObjectFor){e=x.getBoxObjectFor(a);this.top=e.y;for(this.left=e.x;c=c.offsetParent;)this.top-=c.scrollTop,this.left-=c.scrollLeft}else e=new I(a),this.top=e.top+a.clientTop,this.left=e.left+a.clientLeft;this.bottom=this.top+this.height;this.right=this.left+this.width;this.defined=!0}return this.defined}});z=a.template.define(h,{Panel:a.resource("q.tmpl"),Stack:a.resource("r.tmpl")});
a=p(u,{className:h+".VerticalPanel",template:z.Panel,flex:0,init:function(){u.prototype.init.call(this);this.flex?!1!==c&&N.setStyleProperty(this.element,c+"box-flex",this.flex):!1===c&&n(this.element,function(){this.parentNode&&this.parentNode.realign()}.bind(this))}});h=p(u,{className:h+".VerticalPanelStack",template:z.Stack,childClass:a,init:function(){this.cssRule=N.uniqueRule();this.cssRule.setProperty("overflow","auto");this.ruleClassName=this.cssRule.token;u.prototype.init.call(this);!1===
c&&(this.realign(),n(this.childNodesElement,this.realign.bind(this)))},insertBefore:function(a,c){if(a=u.prototype.insertBefore.call(this,a,c))return a.flex&&H(a.element).add(this.ruleClassName),this.realign(),a},removeChild:function(a){if(u.prototype.removeChild.call(this,a))return a.flex&&H(a.element).remove(this.ruleClassName),this.realign(),a},realign:function(){if(!1===c){var a=this.element,e=this.lastChild.element,l=this.tmpl.ruller,m=(new I(e,!1,a)).bottom-B(a,"paddingTop")-B(a,"borderTopWidth")||
0,a=r(a,l);if(A)m+=B(e,"marginBottom");else{var h=l.offsetHeight;l.style.height=e.currentStyle.marginBottom;m+=l.offsetHeight-h}if(m=a-m){for(a=e=0;h=this.childNodes[a];a++)h.flex&&(e++,m+=r(h.element,l));e&&this.cssRule.setProperty("height",Math.max(0,m/e)+"px")}}},destroy:function(){u.prototype.destroy.call(this);this.cssRule.destroy();this.cssRule=null}});K.exports={Box:I,Intersection:l,Viewport:J,VerticalPanel:a,VerticalPanelStack:h,addBlockResizeHandler:n}}],["basis.ui.popup",function(h,K,a,
p,J,z,s){function B(a,e){return u["string"==typeof a&&a.toUpperCase()]||e}p=this.path;J=a.Class;var r=a.dom,n=a.dom.event,x=a.cssom,G=a.layout,F=a.array.from;z=a.event.create;var L=a.ui.Node;h=a.template.define(p,{Popup:a.resource("s.tmpl"),Balloon:a.resource("t.tmpl"),popupManager:a.resource("u.tmpl")});var C={VERTICAL:"V",HORIZONTAL:"H"},N={L:"LEFT",R:"RIGHT",T:"TOP",B:"BOTTOM",C:"CENTER"},H={LEFT:"RIGHT",RIGHT:"LEFT",TOP:"BOTTOM",BOTTOM:"TOP",CENTER:"CENTER"},u=function(){for(var a=["LEFT","CENTER",
"RIGHT"],e=["TOP","CENTER","BOTTOM"],c={},l={},h=0;3>h;h++)for(var n=0;3>n;n++)l[a[h]+" "+e[n]]=a[h]+" "+e[n],l[e[n]+" "+a[h]]=a[h]+" "+e[n];for(var p in l)for(var r in l)c[p+" "+r]=l[p]+" "+l[r];return c}();z=J(L,{className:p+".Popup",template:h.Popup,binding:{visible:{events:"show hide",getter:function(a){return a.visible?"visible":"hidden"}},orientation:{events:"layoutChanged",getter:function(a){return(a.orientation+"-"+a.dir.qw().slice(2,4).join("-")).toLowerCase()}}},action:{hide:function(){this.hide()}},
emit_beforeShow:z("beforeShow"),emit_show:z("show"),emit_hide:z("hide"),emit_realign:z("realign"),emit_layoutChanged:z("layoutChanged","oldOrientation","oldDir"),visible:!1,autorotate:!1,dir:"",defaultDir:"RIGHT BOTTOM RIGHT TOP",orientation:C.VERTICAL,hideOnAnyClick:!0,hideOnKey:!1,hideOnScroll:!0,ignoreClickFor:null,init:function(){L.prototype.init.call(this);this.ignoreClickFor=F(this.ignoreClickFor);this.dir?this.defaultDir=this.dir=B(this.dir,"RIGHT BOTTOM RIGHT TOP"):this.dir=this.defaultDir=
B(this.defaultDir,"RIGHT BOTTOM RIGHT TOP");this.setLayout(this.defaultDir,this.orientation)},templateSync:function(a){L.prototype.templateSync.call(this,a);this.element&&this.realign()},setLayout:function(a,e,c){var l=this.dir,h=this.orientation;this.dir=B(a,this.dir);"string"==typeof e&&(this.orientation=e);if(l!=this.dir||h!=this.orientation)this.emit_layoutChanged(h,l),c||this.realign()},flip:function(a){var e=this.dir.qw();a=a==C.VERTICAL;e[0+a]=H[e[0+a]];e[2+a]=H[e[2+a]];this.setLayout(e.join(" "))},
rotate:function(a){var e=this.dir.qw(),c=[];a=(a%4+4)%4;if(!a)return e;var l=e[0].charAt(0),h=e[1].charAt(0),n="LTRTRBLBLCCTRCCBCCCCCCCC".indexOf(l+h)>>1,l=(n&252)+((n&3)+a&3)<<1;c.push(N["LTRTRBLBLCCTRCCBCCCCCCCC".charAt(l)],N["LTRTRBLBLCCTRCCBCCCCCCCC".charAt(l+1)]);l=e[2].charAt(0);h=e[3].charAt(0);n="LTRTRBLBLCCTRCCBCCCCCCCC".indexOf(l+h)>>1;a="C"!=l&&"C"!=h&&e[0]==e[2]!=(e[1]==e[3])?-a+4:a;l=(n&252)+((n&3)+a&3)<<1;c.push(N["LTRTRBLBLCCTRCCBCCCCCCCC".charAt(l)],N["LTRTRBLBLCCTRCCBCCCCCCCC".charAt(l+
1)]);return c},isFitToViewport:function(a){if(this.visible&&this.relElement){var e=new G.Box(this.relElement,!1,this.element.offsetParent),c=new G.Viewport(this.element.offsetParent),l=this.element.offsetWidth,h=this.element.offsetHeight;a=B(a,this.dir).qw();var n="CENTER"==a[0]?e.left+(e.width>>1):e[a[0].toLowerCase()],e="CENTER"==a[1]?e.top+(e.height>>1):e[a[1].toLowerCase()];return("LEFT"!=a[2])*(n<l>>("CENTER"==a[2]))||("RIGHT"!=a[2])*(c.width-n<l>>("CENTER"==a[2]))||("TOP"!=a[3])*(e<h>>("CENTER"==
a[3]))||("BOTTOM"!=a[3])*(c.height-e<h>>("CENTER"==a[3]))?!1:{x:n,y:e}}},setZIndex:function(a){this.zIndex=isNaN(a)?"auto":a;x.setStyle(this.element,{"z-index":a})},realign:function(){this.setZIndex(this.zIndex);if(this.visible&&this.relElement){for(var a=this.dir.qw(),e,c=0,l=a,h=a[2],n=a[3],p="number"==typeof this.autorotate||!this.autorotate.length?3:this.autorotate.length;this.autorotate&&c<=p;){if(e=this.isFitToViewport(l.join(" "))){h=l[2];n=l[3];this.setLayout(l.join(" "),null,!0);break}if(c==
p)break;if(Array.isArray(this.autorotate))var r=this.autorotate[c++],l="string"==typeof r?B(r,l.join(" ")).split(" "):this.rotate(r);else l=this.rotate(++c*this.autorotate)}e||(e=new G.Box(this.relElement,!1,this.element.offsetParent),e={x:"CENTER"==a[0]?e.left+(e.width>>1):e[a[0].toLowerCase()],y:"CENTER"==a[1]?e.top+(e.height>>1):e[a[1].toLowerCase()]});a=new G.Box(this.element.offsetParent);c={left:"auto",right:"auto",top:"auto",bottom:"auto"};switch(h){case "LEFT":c.left=e.x+"px";break;case "CENTER":c.left=
Math.round(e.x-this.element.offsetWidth/2)+"px";break;case "RIGHT":c.right=a.width-e.x+"px"}switch(n){case "TOP":c.top=e.y+"px";break;case "CENTER":c.top=Math.round(e.y-this.element.offsetHeight/2)+"px";break;case "BOTTOM":c.bottom=a.height-e.y+"px"}x.setStyle(this.element,c);this.emit_realign()}},show:function(a,e,c){this.relElement=r.get(a)||this.relElement;this.setLayout(B(e,this.defaultDir),c);this.visible?this.realign():this.relElement&&(x.visibility(this.element,!1),w.appendChild(this),this.emit_beforeShow(),
this.visible=!0,this.realign(),x.visibility(this.element,!0),this.emit_show())},hide:function(){this.visible&&(this.visible=!1,this.parentNode&&w.removeChild(this),this.emit_hide())},hideAll:function(){w.clear()},destroy:function(){this.hide();L.prototype.destroy.call(this)}});p=J(z,{className:p+".Balloon",template:h.Balloon});var w=new L({template:h.popupManager,selection:!0,emit_childNodesModified:function(a){if(a.deleted)for(var e=a.deleted.length-1,c;c=a.deleted[e];e--)c.hide();a.inserted&&(!a.deleted&&
this.childNodes.length==a.inserted.length)&&(n.addGlobalHandler("click",this.hideByClick,this),n.addGlobalHandler("keydown",this.hideByKey,this),n.addGlobalHandler("scroll",this.hideByScroll,this),n.addHandler(window,"resize",this.realignAll,this));this.lastChild?this.lastChild.select():(n.removeGlobalHandler("click",this.hideByClick,this),n.removeGlobalHandler("keydown",this.hideByKey,this),n.removeGlobalHandler("scroll",this.hideByScroll,this),n.removeHandler(window,"resize",this.realignAll,this));
L.prototype.emit_childNodesModified.call(this,a)},insertBefore:function(h,e){L.prototype.insertBefore.call(this,h,e)&&h.setZIndex(a.ui.window?a.ui.window.getWindowTopZIndex():2001)},removeChild:function(a){a&&(a.hideOnAnyClick&&a.nextSibling&&this.removeChild(a.nextSibling),L.prototype.removeChild.call(this,a))},realignAll:function(){for(var a=this.firstChild;a;a=a.nextSibling)a.realign()},clear:function(){this.firstChild&&this.removeChild(this.firstChild)},hideByClick:function(a){if(this.firstChild){a=
r.axis(a.sender,r.AXIS_ANCESTOR_OR_SELF);for(var e=this.lastChild;e;e=e.previousSibling)if(a.has(e.element)||a.some(Array.prototype.has,e.ignoreClickFor)){for(;e=e.nextSibling;)if(e.hideOnAnyClick){this.removeChild(e);break}return}this.removeChild(this.getChild(!0,"hideOnAnyClick"))}},hideByKey:function(a){var e=this.lastChild;if(e&&e.hideOnKey){var c=!1;"function"==typeof e.hideOnKey?c=e.hideOnKey(a.key):Array.isArray(e.hideOnKey)&&(c=e.hideOnKey.has(a.key));c&&e.hide()}},hideByScroll:function(a){a=
a.sender;if(!r.parentOf(a,this.element))for(var e=this.lastChild;e;){var c=e.previousSibling;e.hideOnScroll&&(e.relElement&&e.offsetParent!==a&&r.parentOf(a,e.relElement))&&e.hide();e=c}}});a.ready(function(){r.insert(document.body,w.element,r.INSERT_BEGIN);w.realignAll()});K.exports={ORIENTATION:C,DIR:{LEFT:"LEFT",RIGHT:"RIGHT",TOP:"TOP",BOTTOM:"BOTTOM",CENTER:"CENTER"},Popup:z,Balloon:p}}],["basis.data.value",function(h,K,a,p,J,z,s){p=this.path;var B=a.getter,r=a.cleaner,n=a.event.Emitter,x=a.data.AbstractData,
G=a.data.Value,F=a.data.STATE,L={},C={destroy:function(a){this.removeLink(a)}},N=G.subclass({className:p+".BindValue",links_:null,bindingBridge:{attach:function(a,h,e){return a.addLink(e,h)},detach:function(a,h,e){return a.removeLink(e,h)},get:function(a){return a.value}},emit_change:function(a,h){G.prototype.emit_change.call(this,a,h);if(!r.globalDestroy)for(var e=this;e=e.links_;)this.apply_(e,h)},init:function(){G.prototype.init.call(this);L[this.basisObjectId]=this},addLink:function(h,m,e){"function"!=
typeof e&&(e=B(a.fn.$self,e));this.links_={object:h,field:m,format:e,links_:this.links_};h instanceof n&&h.addHandler(C,this);this.apply_(this.links_);return h},removeLink:function(a,h){for(var e=this,c;c=e,e=e.links_;)if(e.object===a&&(!h||h==e.field))e.field=null,c.links_=e.links_,e.object instanceof n&&e.object.removeHandler(C,this)},clear:function(){for(var a=this;a=a.links_;)a.object instanceof n&&a.object.removeHandler(C,this);this.links_=null},apply_:function(a,h){var e=a.field;if(null!=e){var c=
a.format(this.value),l=a.object;"function"==typeof e?e.call(l,c,2>arguments.length?c:a.format(h)):l[e]=c}},destroy:function(){this.clear();G.prototype.destroy.call(this);this.links_=null;delete L[this.basisObjectId]}});h=N.subclass({className:p+".Property",extendConstructor_:!1,init:function(a,h,e){this.value=a;this.handler=h;this.proxy=e;N.prototype.init.call(this)}});var H={stateChanged:function(){this.fire(!1,!0)},update:function(){this.fire(!0)},change:function(){this.fire(!0)},destroy:function(a){this.remove(a)}},
u=N.subclass({className:p+".ObjectSet",objects:null,value:0,valueChanged_:!1,calculateValue:function(){return this.value+1},calculateOnInit:!1,statePriority:F.priority,stateChanged_:!0,timer_:!1,init:function(){N.prototype.init.call(this);var a=this.objects;this.objects=[];a&&Array.isArray(a)&&(this.lock(),this.add.apply(this,a),this.unlock());this.valueChanged_=this.stateChanged_=!!this.calculateOnInit;this.update()},add:function(){for(var a=0,h=arguments.length;a<h;a++){var e=arguments[a];if(e instanceof
x)this.objects.add(e)&&e.addHandler(H,this);else throw 42;}this.fire(!0,!0)},remove:function(a){this.objects.remove(a)&&a.removeHandler(H,this);this.fire(!0,!0)},clear:function(){for(var a=0,h;h=this.objects[a];a++)h.removeHandler(H,this);this.objects.clear();this.fire(!0,!0)},fire:function(h,m){if(!this.locked&&(this.valueChanged_=this.valueChanged_||!!h,this.stateChanged_=this.stateChanged_||!!m,!this.timer_&&(this.valueChanged_||this.stateChanged_)))this.timer_=a.timer.setImmediate(this.update.bind(this))},
lock:function(){this.locked=!0},unlock:function(){this.locked=!1},update:function(){var h=this.valueChanged_,m=this.stateChanged_;this.stateChanged_=this.valueChanged_=!1;this.timer_=a.timer.clearImmediate(this.timer_);if(!r.globalDestroy&&(h&&this.set(this.calculateValue()),m))if(h=this.objects.length){for(var m=-2,e,c=0;c<h;c++){var l=this.objects[c],n=this.statePriority.indexOf(String(l.state));n>m&&(e=l,m=n)}e&&this.setState(e.state,e.state.data)}else this.setState(F.UNDEFINED)},destroy:function(){this.lock();
this.clear();this.timer_&&a.timer.clearImmediate(this.timer_);N.prototype.destroy.call(this)}});p=h.subclass({className:p+".Expression",init:function(h,m){N.prototype.init.call(this);h=a.array(arguments);m=h.pop();"function"!=typeof m&&(m=a.fn.$undef);1==h.length&&h[0].addLink(this,function(a){this.set(m.call(this,a))});if(1<h.length){var e=new u({objects:h,calculateOnInit:!0,calculateValue:function(){return m.apply(this,h.map(function(a){return a.value}))}});e.addLink(this,this.set);this.addHandler({destroy:function(){r.globalDestroy||
e.destroy()}})}}});r.add(function(){for(var a in L)L[a].destroy();L=null});K.exports={BindValue:N,Property:h,ObjectSet:u,Expression:p};K.exports.DataObjectSet=u}],["basis.ui.calendar",function(h,K,a,p,J,z,s){function B(a){return{hour:a.getHours(),day:a.getDate()-1,month:a.getMonth(),year:a.getFullYear()}}function r(a,e){var h={},m=w[a];if(m){var n=e.getFullYear(),p=e.getMonth(),r=e.getDate(),n=n-n%m[1],p=m[2]?p-p%m[2]:0,r=m[3]?r:1;h.periodStart=new Date(n,p,r);h.periodEnd=new Date(new Date(n+m[4],
p+m[5],r+m[6])-1)}else h.periodStart=new Date(e),h.periodEnd=new Date(e);return h}function n(){for(var a=r(this.nodePeriodName,(new Date(this.periodStart)).add(this.nodePeriodUnit,-this.nodePeriodUnitCount*(this.getInitOffset(this.periodStart)||0))),e=[],h=0;h<this.nodeCount;h++)e.push(a),a=r(this.nodePeriodName,(new Date(a.periodStart)).add(this.nodePeriodUnit,this.nodePeriodUnitCount));return e}var x=this.path;h=a.Class;var G=a.dom;p=a.event.create;var F=a.l10n.token,L=a.data.value.Property,C=a.ui.Node,
N=a.date.monthNumToAbbr;J=a.template.define(x,{Calendar:a.resource("v.tmpl"),Section:a.resource("w.tmpl"),SectionMonth:a.resource("x.tmpl"),Node:a.resource("y.tmpl")});a.l10n.createDictionary(x,"l10n",{quarter:"Quarter",today:"Today",selected:"Selected"});a.l10n.createDictionary(x+".month","l10n",{jan:"January",feb:"February",mar:"March",apr:"April",may:"May",jun:"June",jul:"July",aug:"August",sep:"September",oct:"October",nov:"November",dec:"December"});a.l10n.createDictionary(x+".monthShort","l10n",
{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"});a.l10n.createDictionary(x+".day","l10n",{mon:"Monday",tue:"Tuesday",wed:"Wednesday",thr:"Thursday",fri:"Friday",sat:"Saturday",sun:"Sunday"});a.l10n.createDictionary(x+".day2","l10n",{mon:"Mo",tue:"Tu",wed:"We",thr:"Th",fri:"Fr",sat:"Sa",sun:"Su"});a.l10n.createDictionary(x+".day3","l10n",{mon:"Mon",tue:"Tue",wed:"Wed",thr:"Thr",fri:"Fri",sat:"Sat",sun:"Sun"});var H={};(function(){for(var a=
32,e=2147483647;--a;)H[a]=e,e>>=1})();var u={century:function(a){return a.periodStart.getFullYear()+" - "+a.periodEnd.getFullYear()},decade:function(a){return a.periodStart.getFullYear()+" - "+a.periodEnd.getFullYear()},year:function(a){return a.periodStart.getFullYear()},quarter:function(a){return F(x,"quarter")},month:function(a){return F(x,"monthShort",N[a.periodStart.getMonth()])},day:function(a){return a.periodStart.getDate()}},w={century:["year",100,0,0,100,0,0],decade:["year",10,0,0,10,0,0],
year:["year",1,0,0,1,0,0],quarter:["month",1,3,0,0,3,0],month:["month",1,1,0,0,1,0],day:["day",1,1,1,0,0,1]},m=h(C,{className:x+".Calendar.Node",childClass:null,periodStart:null,periodEnd:null,emit_periodChanged:p("periodChanged"),emit_select:function(){C.prototype.emit_select.call(this);G.focus(this.element)},template:J.Node,binding:{nodePeriodName:"nodePeriodName",title:{events:"periodChanged",getter:function(a){return u[a.nodePeriodName](a)}},before:{events:"periodChanged",getter:function(a){return a.parentNode&&
a.periodStart<a.parentNode.periodStart?"before":""}},after:{events:"periodChanged",getter:function(a){return a.parentNode&&a.periodEnd>a.parentNode.periodEnd?"after":""}}},action:{click:function(a){var e=this.parentNode&&this.parentNode.parentNode;e&&!this.isDisabled()&&e.templateAction("click",a,this)}},setPeriod:function(a,e,h){if(h||this.periodStart-a.periodStart||this.periodEnd-a.periodEnd)this.periodStart=a.periodStart,this.periodEnd=a.periodEnd,this.isPeriodEnabled(this.periodStart,this.periodEnd)?
this.enable():this.disable(),e&&(e>=this.periodStart&&e<=this.periodEnd?this.select():this.unselect()),this.emit_periodChanged()}}),e=h(C,{className:x+".CalendarSection",emit_periodChanged:p("periodChanged"),emit_selectedDateChanged:p("selectedDateChanged"),template:J.Section,binding:{sectionName:"sectionName",title:{events:"periodChanged",getter:function(a){return a.getTitle(a.periodStart)||"-"}},tabTitle:{events:"selectedDateChanged",getter:function(a){return a.getTabTitle(a.selectedDate)||"-"}}},
childClass:m,minDate:null,maxDate:null,periodStart:null,periodEnd:null,setPeriod:function(a,e){if(e||this.periodStart-a.periodStart||this.periodEnd-a.periodEnd){var h=this.periodStart,m=this.periodEnd;this.periodStart=a.periodStart;this.periodEnd=a.periodEnd;var p=n.call(this);this.minDate=p[0].periodStart;this.maxDate=p[p.length-1].periodEnd;if(this.firstChild)for(var r=0,s;s=this.childNodes[r];r++)s.setPeriod(p[r],this.selectedDate,e);this.emit_periodChanged(h,m)}},selectedDate:null,setSelectedDate:function(a){if(this.selectedDate-
a){var e=this.selectedDate;this.selectedDate=a;(a=this.getNodeByDate(this.selectedDate))?a.select():this.selectedDate?this.setViewDate(this.selectedDate):this.selection.clear();this.emit_selectedDateChanged(e)}},isPrevPeriodEnabled:!0,isNextPeriodEnabled:!0,periodName:"period",nodeCount:12,nodePeriodName:"-",nodePeriodUnit:"-",nodePeriodUnitCount:1,selection:!0,init:function(){var a=this.selectedDate||new Date;this.selectedDate=null;this.setViewDate(a);this.childNodes=n.call(this).map(function(a){return{isPeriodEnabled:this.isPeriodEnabled,
disabled:!this.isPeriodEnabled(a.periodStart,a.periodEnd),nodePeriodName:this.nodePeriodName,periodStart:a.periodStart,periodEnd:a.periodEnd}},this);C.prototype.init.call(this);this.setSelectedDate(a)},getTitle:function(){},getTabTitle:function(){},getNodeByDate:function(a){if(a&&this.periodStart<=a&&a<=this.periodEnd){a:{var e=this.childNodes;if(e.length){var h,m,n=0,p=e.length,r;do if(m=e[h=n+p>>1],a<(r=m.periodStart))p=h-1;else if(a>(m=m.periodEnd))n=h+1;else{a=a>=r&&a<=m?h:-1;break a}while(n<=
p)}a=-1}if(-1!=a)return this.childNodes[a]}return null},prevPeriod:function(){this.isPrevPeriodEnabled&&this.setPeriod(r(this.periodName,new Date(+this.periodStart-1)))},nextPeriod:function(){this.isNextPeriodEnabled&&this.setPeriod(r(this.periodName,new Date(+this.periodEnd+1)))},setViewDate:function(a){this.setPeriod(r(this.periodName,a))},rebuild:function(){this.setPeriod(r(this.periodName,this.selectedDate),!0)},getInitOffset:function(){}});e.Month=h(e,{className:x+".CalendarSection.Month",sectionName:"Month",
periodName:"month",nodeCount:42,nodePeriodName:"day",nodePeriodUnit:"day",getTabTitle:function(a){return a.getDate()},getInitOffset:function(a){return 1+((new Date(a)).set("day",1).getDay()+5)%7},template:J.SectionMonth,binding:{year:{events:"periodChanged",getter:function(a){return a.periodStart.getFullYear()}},title:{events:"periodChanged",getter:function(a){return F(x,"month",N[a.periodStart.getMonth()])}}}});e.Year=h(e,{className:x+".CalendarSection.Year",sectionName:"Year",periodName:"year",
nodePeriodName:"month",nodePeriodUnit:"month",getTabTitle:function(a){return F(x,"month",N[a.getMonth()])},getTitle:function(a){return a.getFullYear()}});e.YearDecade=h(e,{className:x+".CalendarSection.YearDecade",sectionName:"YearDecade",periodName:"decade",nodePeriodName:"year",nodePeriodUnit:"year",getInitOffset:function(){return 1},getTabTitle:function(a){return a.getFullYear()},getTitle:function(a){return a.getFullYear()+" - "+this.periodEnd.getFullYear()}});e.Century=h(e,{className:x+".CalendarSection.Century",
sectionName:"Century",periodName:"century",nodePeriodName:"decade",nodePeriodUnit:"year",nodePeriodUnitCount:10,getTabTitle:function(a){if(a)return a=a.getFullYear(),a-=a%10,a+"-"+(Number(a.toString().substr(-2))+9).lead(2)},getInitOffset:function(){return 1}});e.YearQuarters=h(e,{className:x+".CalendarSection.YearQuarter",sectionName:"YearQuarter",periodName:"year",nodeCount:4,nodePeriodName:"quarter",nodePeriodUnit:"month",nodePeriodUnitCount:3});e.Quarter=h(e,{className:x+".CalendarSection.Quarter",
sectionName:"Quarter",periodName:"quarter",nodeCount:3,nodePeriodName:"month",nodePeriodUnit:"month",binding:{title:{events:"periodChanged",getter:function(){return F(x,"quarter")}}}});h=h(C,{className:x+".Calendar",emit_change:p("change"),emit_childNodesModified:function(a){if(a.inserted)for(var e=0,h;h=a.inserted[e++];)h.setViewDate(this.date.value),this.selectedDate.addLink(h,h.setSelectedDate);if(a.deleted)for(e=0;h=a.deleted[e++];)this.selectedDate.removeLink(h,h.setSelectedDate);C.prototype.emit_childNodesModified.call(this,
a);this.selection&&(!this.selection.itemCount&&this.firstChild)&&this.firstChild.select();var m={};G.insert(this.tmpl.sectionTabs,this.childNodes.map(function(a){return m[a.basisObjectId]=a.tmpl.tabElement||document.createComment("")}));for(var n in this.tabElementMap_)m[n]||G.remove(this.tabElementMap_[n]);this.tabElementMap_=m},template:J.Calendar,binding:{today:function(){return(new Date).toFormat("%D.%M.%Y")}},action:{moveNext:function(){this.selection.pick().nextPeriod()},movePrev:function(){this.selection.pick().prevPeriod()},
selectToday:function(){this.selectedDate.set(new Date)}},templateAction:function(a,e,h){C.prototype.templateAction.call(this,a,e);h instanceof m&&(a=h.periodStart,e=this.selection.pick(),this.selectedDate.set((new Date(this.selectedDate.value)).add(e.nodePeriodUnit,this.selectedDate.value.diff(e.nodePeriodUnit,a))),this.nextSection(!1))},selection:!0,childClass:e,childFactory:function(){},tabElementMap_:{},listen:{childNode:{templateChanged:function(a){var e=a.tmpl.tabElement||document.createComment(),
h=this.tabElementMap_[a.basisObjectId];e!==h&&(this.tabElementMap_[a.basisObjectId]=e,G.replace(h,e))}}},date:null,sections:["Month","Year","YearDecade"],minDate:null,maxDate:null,map:null,periodEnableByDefault:!0,init:function(){var a=new Date;this.selectedDate=new L(new Date(this.date||a));this.date=new L(new Date(this.date||a));C.prototype.init.call(this);this.isPeriodEnabled=this.isPeriodEnabled.bind(this);this.sections&&this.setChildNodes(this.sections.map(function(a){return new e[a]({isPeriodEnabled:this.isPeriodEnabled,
selectedDate:this.selectedDate.value})},this))},setMinDate:function(a){if(this.minDate!=a){this.minDate=a;a=0;for(var e;e=this.childNodes[a];a++)e.rebuild()}},setMaxDate:function(a){if(this.maxDate!=a){this.maxDate=a;a=0;for(var e;e=this.childNodes[a];a++)e.rebuild()}},setSection:function(a){(a=this.childNodes.search("sectionName",a))&&a.select()},nextSection:function(a){var e=this.selection.pick();(e=a?e.nextSibling:e.previousSibling)?(e.select(),e.setViewDate(this.selectedDate.value)):a||this.emit_change()},
selectDate:function(a){0!=a-this.date.value&&this.date.set(a)},getNextPeriod:function(a,e){if(!this.isNextPeriodEnabled(a,e))return!1;if(this.map){var h=e?1:-1,m=e?"start":"till",n=e?"till":"start",p=(new Date(a)).add("millisecond",h),s=this.map[this.periodEnableByDefault?"disabled":"enabled"];if(s){var f=r("year",p);for(f.periodEnd.getFullYear()==p.getFullYear()&&(f[m]=p);!this.isPeriodEnabled(f.periodStart,f.periodEnd);)f=r("year",p.add("year",h));for(f[n]=r("month",f[m])[n];!this.isPeriodEnabled(f.periodStart,
f.periodEnd);)f=r("month",p.add("month",h));var q=B(f[m]),n=B(f[n]);if(s=s[n.year]&&s[n.year][n.month]){this.periodEnableByDefault&&(m=H[f.periodEnd.getMonthDayCount()],s=s&m^m);for(m=q.day;m!=n.day+h;m+=h)if(s>>m&1){p=new Date(q.year,q.month,m+1);break}}else return r("day",f[m])}}return r("day",p)},isNextPeriodEnabled:function(c,e){if(!e&&this.minDate&&this.minDate>c||e&&this.maxDate&&this.maxDate<c)return!1;if(this.map)if(this.periodEnableByDefault){if(!e&&this.minDate)return this.isPeriodEnabled(this.minDate,
c);if(e&&this.maxDate)return this.isPeriodEnabled(c,this.maxDate)}else{var h=e?1:-1,m=c.getFullYear(),n=(new Date(c)).add("millisecond",h),p=n.getFullYear(),s=a.object.keys(this.map.enable).filter(function(a){return h*a>=h*p}),f=s.length;if(f)for(var s=s.sort(function(a,c){return h*(a>c)||-h*(a<c)}),q=0;q<f;q++){var u=r("year",new Date(s[q],0));if(this.isPeriodEnabled(e&&s[q]==m?n:u.periodStart,!e&&s[q]==m?n:u.periodEnd))return!0}return!1}return!0},isPeriodEnabled:function(a,e){if(this.minDate&&this.minDate>
e||this.maxDate&&this.maxDate<a)return!1;var h=this.map&&this.map[this.periodEnableByDefault?"disabled":"enabled"];if(h){var m=B(a),n=B(e),p,r,f,q=m.month,s=new Date(m.year,m.month),u=11-m.month,x=u+1+12*(n.year-m.year-1)+(n.month+1)-1;if(this.periodEnableByDefault){if(0==x)return!(p=h[m.year])||!(r=p[m.month])||(r^2147483647)>>m.day&H[n.day-m.day+1];for(var w=0;w<=x;w++){if(!w||u==w%12)if(p=h[s.getFullYear()],!p)return!0;r=p[q=s.getMonth()];if(!r)return!0;f=H[s.getMonthDayCount()];if(w/x?1==w/x?
(r&f^f)&H[n.day+1]:r&f^f:(r&f^f)>>m.day)return!0;s.setMonth(q+1)}}else{if(0==x)return(p=h[m.year])&&(r=p[m.month])&&r>>m.day&H[n.day-m.day+1];for(w=0;w<=x;w++){if(!w||u==w%12||!p)if(p=h[s.getFullYear()],!p){w+=12;s.setMonth(q+12);continue}if((r=p[q=s.getMonth()])&&(w/x?1==w/x?r&H[n.day+1]:r:r>>m.day))return!0;s.setMonth(q+1)}}return!1}return!0},destroy:function(){C.prototype.destroy.call(this);this.date.destroy();this.date=null;this.selectedDate.destroy();this.selectedDate=null;delete this.isPeriodEnabled;
this.tabElementMap_=null}});K.exports={Calendar:h,CalendarSection:e}}],["basis.ui.field",function(h,K,a,p,J,z,s){function B(a){return a.getValue()}function r(a){var c=a&&a.type||"text";if(d.hasOwnProperty(c))return new d[c](a);throw 43;}var n=this.path;h=a.Class;var x=a.dom,G=a.object.complete,F=a.getter,L=a.array.from,C=a.event.create,N=a.event.events,H=a.l10n.token,u=a.data.value.Property,w=a.dom.wrapper.Selection,m=a.ui.Node,e=a.ui.popup.Popup;s=a.template.define(n,{Example:a.resource("z.tmpl"),
Description:a.resource("10.tmpl"),Counter:a.resource("11.tmpl"),Field:a.resource("12.tmpl"),File:a.resource("13.tmpl"),Hidden:a.resource("14.tmpl"),Text:a.resource("15.tmpl"),Password:a.resource("16.tmpl"),Textarea:a.resource("17.tmpl"),Checkbox:a.resource("18.tmpl"),Label:a.resource("19.tmpl"),RadioGroup:a.resource("1a.tmpl"),RadioGroupItem:a.resource("1b.tmpl"),CheckGroup:a.resource("1c.tmpl"),CheckGroupItem:a.resource("1d.tmpl"),Select:a.resource("1e.tmpl"),SelectItem:a.resource("1f.tmpl"),Combobox:a.resource("1g.tmpl"),
ComboboxItem:a.resource("1h.tmpl"),ComboboxDropdownList:a.resource("1i.tmpl"),MatchInput:a.resource("1j.tmpl")});a.template.define(n+".native",{text:a.resource("1k.tmpl"),password:a.resource("1l.tmpl"),textarea:a.resource("1m.tmpl"),checkbox:a.resource("1n.tmpl"),radio:a.resource("1o.tmpl"),select:a.resource("1p.tmpl"),file:a.resource("1q.tmpl")});a.l10n.createDictionary(n,"l10n",{symbolsLeft:"Symbols left"});a.l10n.createDictionary(n+".validator","l10n",{regExpWrongFormat:"The value has wrong format.",
required:"The field is required and must have a value.",numberWrongFormat:"The value has wrong format of number.",currencyWrongFormat:"The value has wrong format of currency.",currencyMustBeGreaterZero:"The value must be greater than zero.",emailWrongFormat:"The value has a wrong format of e-mail.",urlWrongFormat:"The value has a wrong format of URL.",minLengthError:"The value must be longer than {0} symbols.",maxLengthError:"The value must be shorter than {0} symbols."});var c=m.subclass({className:n+
".Field",childClass:null,nextFieldOnEnter:!0,serializable:!0,name:"",title:"",validity:"indeterminate",error:"",example:null,focused:!1,emit_commit:C("commit"),emit_change:C("change","oldValue")&&function(a){this.writeFieldValue_(this.value);N.change.call(this,a)},emit_validityChanged:C("validityChanged","oldValidity"),emit_errorChanged:C("errorChanged"),emit_exampleChanged:C("exampleChanged"),emit_descriptionChanged:C("descriptionChanged"),emit_fieldInput:C("fieldInput","event"),emit_fieldChange:C("fieldChange",
"event"),emit_fieldKeydown:C("fieldKeydown","event"),emit_fieldKeypress:C("fieldKeypress","event"),emit_fieldKeyup:C("fieldKeyup","event")&&function(a){this.nextFieldOnEnter&&(a.key==a.KEY.ENTER||a.key==a.KEY.CTRL_ENTER?(a.preventDefault(),this.commit()):a.key!=a.KEY.TAB&&this.setValidity());N.fieldKeyup.call(this,a)},emit_fieldFocus:C("fieldFocus","event")&&function(a){this.focused=!0;N.fieldFocus.call(this,a)},emit_fieldBlur:C("fieldBlur","event")&&function(a){this.validate(!0);this.focused=!1;
N.fieldBlur.call(this,a)},template:s.Field,binding:{focused:{events:"fieldFocus fieldBlur",getter:function(a){return a.focused?"focused":""}},name:"name",titleText:"title",value:{events:"change",getter:function(a){return a.getValue()}},defaultValue:{getter:"defaultValue"},validity:{events:"validityChanged",getter:"validity"},error:{events:"errorChanged",getter:"error"},example:"satellite:",description:"satellite:"},action:"focus blur change keydown keypress keyup input".qw().reduce(function(a,c){var d=
"emit_field"+c.capitalize();a[c]=function(a){this.setValue(this.readFieldValue_());this[d](a)};return a},{}),satelliteConfig:{example:{hook:{exampleChanged:!0},existsIf:function(a){return a.example},instanceOf:m.subclass({template:s.Example,binding:{example:"owner.example"},listen:{owner:{exampleChanged:function(){this.updateBind("example")}}}})},description:{hook:{descriptionChanged:!0},existsIf:function(a){return a.description},instanceOf:m.subclass({template:s.Description,binding:{description:"owner.description"},
listen:{owner:{descriptionChanged:function(){this.updateBind("description")}}}})}},init:function(){this.validators=L(this.validators);"undefined"==typeof this.defaultValue&&(this.defaultValue=this.value);m.prototype.init.call(this);this.value&&this.setValue(this.value)},setExample:function(a){a!=this.example&&(this.example=a,this.emit_exampleChanged())},setDescription:function(a){a!=this.description&&(this.description=a,this.emit_descriptionChanged())},readFieldValue_:function(){return this.getValue()},
writeFieldValue_:function(){},getValue:function(){return this.value},setValue:function(a){if(this.value!=a){var c=this.value;this.value=a;this.emit_change(c)}},reset:function(){this.setValue(this.defaultValue);this.setValidity()},attachValidator:function(a,c){this.validators.add(a)&&c&&this.validate()},detachValidator:function(a,c){this.validators.remove(a)&&c&&this.validate()},setValidity:function(a,c){a||(a="indeterminate");this.validity!==a&&(this.validity=a,this.emit_validityChanged());if(!c||
"invalid"!=a)c="";this.error!=c&&(this.error=c,this.emit_errorChanged())},validate:function(a){var c;this.setValidity();for(var d=0;d<this.validators.length;d++)if(c=this.validators[d](this))return a||this.setValidity("invalid",c.message),c;""!=this.getValue()&&this.setValidity("valid")},commit:function(){this.emit_commit()},destroy:function(){this.example=this.error=this.validators=null;m.prototype.destroy.call(this)}});p=c.subclass({className:n+".File",template:s.File});var l=c.subclass({className:n+
".TextField",emit_minLengthChanged:C("minLengthChanged"),emit_maxLengthChanged:C("maxLengthChanged"),defaultValue:"",readOnly:!1,minLength:0,maxLength:0,autocomplete:"",placeholder:"",binding:{minlength:{events:"minLengthChanged",getter:function(a){return 0<a.minLength?a.minLength:""}},maxlength:{events:"maxLengthChanged",getter:function(a){return 0<a.maxLength?a.maxLength:""}},readonly:function(a){return a.readOnly?"readonly":""},autocomplete:"autocomplete",placeholder:"placeholder"},init:function(){"undefined"==
typeof this.value&&(this.value="");c.prototype.init.call(this);var a=this.minLength;delete this.minLength;this.setMinLength(a);a=this.maxLength;delete this.maxLength;this.setMaxLength(a)},setValue:function(a){return c.prototype.setValue.call(this,null==a?"":a)},setReadOnly:function(a){this.readOnly=!!a;this.updateBind("readonly")},setMinLength:function(a){a=Math.max(parseInt(a,10)||0,0);this.minLength!=a&&(!this.minLength^!a&&(a?this.attachValidator(g.MinLength):this.detachValidator(g.MinLength)),
this.minLength=a,this.emit_minLengthChanged())},setMaxLength:function(a){a=Math.max(parseInt(a,10)||0,0);this.maxLength!=a&&(!this.maxLength^!a&&(a?this.attachValidator(g.MaxLength):this.detachValidator(g.MaxLength)),this.maxLength=a,this.emit_maxLengthChanged())},readFieldValue_:function(){return this.tmpl&&this.tmpl.field&&this.tmpl.field.value}});J=l.subclass({className:n+".Hidden",focusable:!1,template:s.Hidden});var Q=l.subclass({className:n+".Text",template:s.Text});z=l.subclass({className:n+
".Password",template:s.Password});var C=l.subclass({className:n+".Textarea",nextFieldOnEnter:!1,symbolsLeft:0,emit_symbolsLeftChanged:C("symbolsLeftChanged"),emit_fieldFocus:!window.opera?l.prototype.emit_fieldFocus:function(a){this.contentEditable=!0;this.contentEditable=!1;l.prototype.emit_fieldFocus.call(this,a)},template:s.Textarea,binding:{availChars:{events:"symbolsLeftChanged",getter:"symbolsLeft"},counter:"satellite:"},action:{updateSymbolsLeft:function(){this.updateSymbolsLeft()}},satelliteConfig:{counter:{hook:{maxLengthChanged:!0},
existsIf:function(a){return 0<a.maxLength},instanceOf:m.subclass({template:s.Counter,binding:{availChars:function(a){return a.owner.symbolsLeft}},listen:{owner:{symbolsLeftChanged:function(){this.updateBind("availChars")}}}})}},init:function(){l.prototype.init.call(this);this.updateSymbolsLeft()},updateSymbolsLeft:function(){var a=this.maxLength?this.maxLength-this.getValue().length:-1;0>=a&&(a=0);this.symbolsLeft!=a&&(this.symbolsLeft=a,this.emit_symbolsLeftChanged())}}),y=c.subclass({className:n+
".Checkbox",value:!1,template:s.Checkbox,binding:{checked:{events:"change",getter:function(a){return a.value?"checked":""}}},toggle:function(){this.setValue(!this.getValue())},setValue:function(a){return c.prototype.setValue.call(this,!!a)},readFieldValue_:function(){return this.tmpl&&this.tmpl.field&&!!this.tmpl.field.checked}}),A=c.subclass({className:n+".Label",focusable:!1,template:s.Label}),D=m.subclass({className:n+".ComplexFieldItem",childClass:null,name:"",binding:{name:"name",title:function(a){return a.getTitle()},
value:function(a){return a.getValue()},checked:{events:"select unselect",getter:function(a){return a.selected?"checked":""}}},action:{select:function(a){this.isDisabled()||(this.select(this.parentNode.multipleSelect),"INPUT"!=a.sender.tagName&&a.die())}},titleGetter:a.getter(function(a){return a.title||a.getValue()}),valueGetter:F("value"),getTitle:function(){return this.titleGetter(this)},getValue:function(){return this.valueGetter(this)},setName:function(a){this.name!=a&&(this.name=a,this.updateBind("name"))}}),
I={itemsChanged:function(){this.emit_change()}},f=h(c,{className:n+".ComplexField",childClass:D,multipleSelect:!1,init:function(){this.selection=new w({multiple:!!this.multipleSelect,handler:{context:this,callbacks:I}});c.prototype.init.call(this)},getValue:function(){var a=this.selection.getItems().map(B);return this.multipleSelect?a:a[0]},setValue:function(a){a=this.multipleSelect?L(a):[a];for(var c=[],d=this.firstChild;d;d=d.nextSibling)-1!=a.indexOf(d.getValue())&&c.push(d);this.selection.set(c)}}),
q=f.subclass({className:n+".RadioGroup",template:s.RadioGroup,childClass:{className:n+".RadioGroupItem",template:s.RadioGroupItem}}),E=f.subclass({className:n+".CheckGroup",multipleSelect:!0,template:s.CheckGroup,childClass:{className:n+".CheckGroupItem",template:s.CheckGroupItem}}),P=f.subclass({className:n+".Select",template:s.Select,childClass:{className:n+".SelectItem",template:s.SelectItem},init:function(){f.prototype.init.call(this);this.selection.set([this.childNodes[this.tmpl.field.selectedIndex]])},
getValue:function(){var a=this.childNodes[this.tmpl.field.selectedIndex];return a&&a.getValue()},setValue:function(a){a=this.childNodes.search(a,B);this.selection.set([a]);this.tmpl.field.selectedIndex=a?this.childNodes.indexOf(a):-1}}),M={show:function(){this.updateBind("opened")},hide:function(){this.updateBind("opened")}},O=D.subclass({className:n+".ComboboxItem",template:s.ComboboxItem,binding:{title:function(a){return a.getTitle()||" "}},action:{select:function(a){this.isDisabled()||(this.select(),
this.parentNode&&this.parentNode.hide(),a.die())}}}),e=f.subclass({className:n+".Combobox",childClass:O,emit_change:function(a){f.prototype.emit_change.call(this,a);a=this.getValue();this.property&&this.property.set(a)},emit_childNodesModified:function(a){f.prototype.emit_childNodesModified.call(this,a);this.property&&this.setValue(this.property.value)},caption:null,popup:null,popupClass:e.subclass({className:n+".ComboboxDropdownList",template:s.ComboboxDropdownList,autorotate:1}),property:null,template:s.Combobox,
binding:{captionItem:"satellite:",hiddenField:"satellite:",opened:function(a){return a.popup.visible?"opened":""}},satelliteConfig:{hiddenField:{existsIf:function(a){return a.name},instanceOf:J.subclass({getValue:function(){return this.owner.getValue()},listen:{owner:{change:function(){this.updateBind("value")}}}}),config:function(a){return{name:a.name,value:a.getValue()}}}},action:{togglePopup:function(){this.isDisabled()||this.popup.visible?this.hide():this.show()},keyup:function(a){var c=this.selection.pick(),
d;switch(a.key){case a.KEY.DOWN:if(a.altKey){this.popup.visible?this.hide():this.isDisabled()||this.show();return}d=x.axis(c||this.firstChild,x.AXIS_FOLLOWING_SIBLING).search(!1,"disabled");break;case a.KEY.UP:if(a.altKey){this.popup.visible?this.hide():this.isDisabled()||this.show();return}d=x.axis(c||this.lastChild,x.AXIS_PRECEDING_SIBLING).search(!1,"disabled")}d&&(d.select(),this.focus());this.emit_fieldKeyup(a)},keydown:function(a){switch(a.key){case a.KEY.DOWN:case a.KEY.UP:a.die();break;case a.KEY.ENTER:this.popup.visible&&
this.hide(),a.die()}this.emit_fieldKeydown(a)}},init:function(){this.property&&(this.value=this.property.value);f.prototype.init.call(this);var a=new this.childClass({delegate:this.selection.pick(),owner:this,getTitle:function(){return this.owner.getTitle()},getValue:function(){return this.owner.getValue()},handler:{delegateChanged:function(){this.updateBind("title")}}});this.setSatellite("captionItem",a);this.selection.addHandler({itemsChanged:function(){a.setDelegate(this.pick())}});this.popup=
new this.popupClass(G({ignoreClickFor:[this.tmpl.field],content:this.childNodesElement,handler:{context:this,callbacks:M}},this.popup));this.property&&this.property.addLink(this,this.setValue)},templateSync:function(a){this.childNodesElement&&x.remove(this.childNodesElement);m.prototype.templateSync.call(this,a);this.childNodesElement&&this.popup&&x.insert(this.popup.tmpl.content,this.childNodesElement)},show:function(){this.popup.show(this.tmpl.field);this.focus()},hide:function(){this.popup.hide()},
getTitle:function(){var a=this.selection.pick();return a&&a.getTitle()},getValue:function(){var a=this.selection.pick();return a&&a.getValue()},setValue:function(a){this.getValue()!=a&&((a=this.childNodes.search(a,B))&&!a.isDisabled()?this.selection.set([a]):this.selection.clear())},destroy:function(){this.property&&(this.property.removeLink(this),this.property=null);this.popup.destroy();this.popup=null;f.prototype.destroy.call(this)}}),k=u.subclass({className:n+".MatchProperty",matchFunction:function(a,
c){if(!c){var d=a._original||this.textNodeGetter(a);Array.isArray(d)||(d=[d]);a._original=d;for(var e=0,f=d.length;0<f--;){var g=d[f];if(g){var h=g.nodeValue.split(this.rx);1<h.length?(a._replaced||(a._replaced={}),x.replace(a._replaced[f]||g,a._replaced[f]=x.createElement("SPAN.matched",x.wrap(h,this.map))),e++):a._replaced&&a._replaced[f]&&(x.replace(a._replaced[f],g),delete a._replaced[f])}}return 0<e}if(a._replaced){for(d in a._replaced)x.replace(a._replaced[d],a._original[d]);delete a._replaced;
delete a._original}return!1},emit_change:function(a,c){this.rx=this.regexpGetter(a);u.prototype.emit_change.call(this,a,c)},extendConstructor_:!0,init:function(){var a=this.startPoints||"";this.textNodeGetter=F(this.textNodeGetter||"tmpl.titleText");"function"!=typeof this.regexpGetter&&(this.regexpGetter=function(c){return RegExp("("+a+")("+c.forRegExp()+")","i")});this.map={};this.map[this.wrapElement||"SPAN.match"]=function(a,b){return 2==b%3};u.prototype.init.call(this,"",this.handlers,String.trim)}}),
U={childNodesModified:function(a,c){c.inserted&&c.inserted.forEach(function(a){this.matchFunction(a,""==this.value)},this)}},O=k.subclass({className:n+".Matcher",emit_change:function(a,c){k.prototype.emit_change.call(this,a,c);this.applyMatch()},init:function(){k.prototype.init.call(this);this.node.addHandler(U,this)},applyMatch:function(){this.node.childNodes.forEach(function(a){this.matchFunction(a,""==this.value)},this)}}),X=k.subclass({className:n+".MatchFilter",emit_change:function(a,c){k.prototype.emit_change.call(this,
a,c);this.node.setMatchFunction(a?this.matchFunction.bind(this):null)}});s=Q.subclass({className:n+".MatchInput",template:s.MatchInput,matchFilterClass:X,emit_fieldKeyup:function(a){Q.prototype.emit_fieldKeyup.call(this,a);this.matchFilter.set(this.getValue())},emit_change:function(a){Q.prototype.emit_change.call(this,a);this.matchFilter.set(this.getValue())},init:function(){Q.prototype.init.call(this);this.matchFilter=new this.matchFilterClass(this.matchFilter)}});var W=/^([a-z0-9\.\-\_]+|[a-z0-9\.\-\_]+\+[a-z0-9\.\-\_]+)\@(([a-z0-9][a-z0-9\-]*\.)+[a-z]{2,6}|(\d{1,3}\.){3}\d{1,3})$/i,
S=/^(https?\:\/\/)?((\d{1,3}\.){3}\d{1,3}|([a-zA-Z][a-zA-Z\d\-]+\.)+[a-zA-Z]{2,6})(:\d+)?(\/[^\?]*(\?\S(\=\S*))*(\#\S*)?)?$/i,T=h(null,{className:n+".ValidatorError",init:function(a,c){this.field=a;this.message=String(c)}}),g={RegExp:function(a){a.constructor!=RegExp&&(a=RegExp(a));return function(c){var d=c.getValue();if(""!=d&&!d.match(a))return new T(c,H(n,"validator","regExpWrongFormat"))}},Required:function(b){var c=b.getValue();if(a.fn.$isNull(c)||""==c)return new T(b,H(n,"validator","required"))},
Number:function(a){var c=a.getValue();if(isNaN(c))return new T(a,H(n,"validator","numberWrongFormat"))},Currency:function(a){var c=a.getValue();if(isNaN(c))return new T(a,H(n,"validator","currencyWrongFormat"));if(0>=c)return new T(a,H(n,"validator","currencyMustBeGreaterZero"))},Email:function(a){var c=a.getValue().trim();if(""!=c&&!c.match(W))return new T(a,H(n,"validator","emailWrongFormat"))},Url:function(a){var c=a.getValue().trim();if(""!=c&&!c.match(S))return new T(a,H(n,"validator","urlWrongFormat"))},
MinLength:function(b){var c=b.getValue();if((a.fn.$isNotNull(c.length)?c.length:String(c).length)<b.minLength)return new T(b,String(H(n,"validator","minLengthError")).format(b.minLength))},MaxLength:function(b){var c=b.getValue();if((a.fn.$isNotNull(c.length)?c.length:String(c).length)>b.maxLength)return new T(b,String(H(n,"validator","maxLengthError")).format(b.maxLength))}},d={hidden:J,file:p,text:Q,password:z,textarea:C,checkbox:y,label:A,select:P,combobox:e,radiogroup:q,checkgroup:E};K.setWrapper(function(a){return r(a)});
K.exports={Validator:g,validator:g,ValidatorError:T,create:r,addFieldType:function(a,c){d[a]=c},Field:c,Hidden:J,File:p,TextField:l,Text:Q,Password:z,Textarea:C,Checkbox:y,Label:A,ComplexFieldItem:D,ComplexField:f,Select:P,RadioGroup:q,CheckGroup:E,Combobox:e,Matcher:O,MatchProperty:k,MatchFilter:X,MatchInput:s}}],["basis.ui.form",function(h,K,a,p,J,z,s){h=this.path;var B=a.dom.event;J=a.ui.field;z=a.event.create;s=a.ui.Node;p=a.template.define(h,{Form:a.resource("1r.tmpl"),FormContent:a.resource("1s.tmpl")});
a=s.subclass({className:h+".FormContent",template:p.FormContent,childClass:J.Field,childFactory:J.create,listen:{childNode:{commit:function(a){for(;a=a.nextSibling;)if(a.focusable)return a.focus(!0);this.submit()}}},emit_reset:z("reset"),onSubmit:a.fn.$false,focusFirstNonEmpty:!0,focus:function(a){for(var h=0,p;p=this.childNodes[h];h++)if(p.focusable&&(!this.focusFirstNonEmpty||!p.getValue()||!p.getValue().length)){p.focus(a);break}},getFieldByName:function(a){return this.getChildByName(a)},getFieldById:function(a){return this.getChild(a,
"id")},loadData:function(a,h){for(var p=0,s;s=this.childNodes[p];p++)s.name in a?(s.setValue(a[s.name]),s.setValidity()):s.reset();h||this.validate()},reset:function(){for(var a=0,h;h=this.childNodes[a];a++)h.reset();this.emit_reset()},validate:function(){for(var a=[],h,p=0,s;s=this.childNodes[p];p++)(h=s.validate())&&a.push(h);return a.length?(a[0].field.focus(),a):!0},serialize:function(){return this.childNodes.reduce(function(a,h){h.serializable&&h.name&&(a[h.name]=h.getValue());return a},{})},
submit:function(){if(!0===this.validate()&&this.onSubmit)this.onSubmit(this.serialize())}});h=a.subclass({className:h+".Form",formTarget:"",formAction:"",formEnctype:"",formMethod:"POST",template:p.Form,binding:{target:"formTarget",action:"formAction",enctype:"formEnctype",method:"formMethod"},action:{submit:function(){this.submit()},validate:function(a){!0!==this.validate()&&B.cancelDefault(a)}},submit:function(){if(this.onSubmit)this.onSubmit(this.serialize());this.tmpl.form&&this.tmpl.form.submit()}});
K.exports={FormContent:a,Form:h}}]].forEach(function(h){var K=h[1];h=basis.namespace(h[0]);K.call(h,h.exports,h,basis,this,"","",basis.resource);basis.object.complete(h,h.exports)},this)}).call(this)
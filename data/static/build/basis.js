(function(){var na={"0.js":"app","1.js":"basis.app","2.js":"basis.ui","3.js":"basis.l10n","4.js":"basis.event","5.js":"basis.data","6.js":"basis.dom.wrapper","7.js":"basis.template","8.js":"basis.template.html","9.js":"basis.dom.event","a.js":"basis.template.htmlfgen","b.js":"app.router","c.js":"basis.router","d.js":"basis.ua","e.js":"basis.date","f.js":"app.type","g.js":"basis.entity","h.js":"basis.data.dataset","i.js":"basis.net","j.js":"basis.data.index","k.js":"basis.data.value","l.js":"app.service",
"m.js":"basis.net.service","n.js":"basis.net.action","o.js":"basis.ui.popup","p.js":"basis.dom","q.js":"basis.cssom","r.js":"basis.layout","s.js":"basis.ui.calendar"},la={"0.css":"","6.tmpl":[[1,0,["element"],"div",[4,0,0,"app-eventlist-item"],[6,"click","showDetails"],[1,0,0,"div",[4,0,0,"app-eventlist-item_defcover"]],[1,0,0,"div",[4,0,0,"app-eventlist-item_delete"],[6,"click","remove"],[3,0,0,"Delete"]],[8,1,["cover"]],[1,0,0,"div",[4,0,0,"app-eventlist-item_label"],[1,0,0,"div",[4,[["app-eventlist-item_title__",
"noTitle"]],0,"app-eventlist-item_title"],[3,1,["title"]]],[1,0,0,"div",[4,[["app-eventlist-item_dates__","noTitle"]],0,"app-eventlist-item_dates"],[3,1,["startDate"]],[3,0,0," — "],[3,1,["endDate"]]]]]],"o.tmpl":[[1,0,["element"],"div",[4,0,0,"app-wizard-start-local"],[1,0,0,"h2",[3,0,0,"Add your photos from desktop"]],[1,0,0,"div",[4,0,0,"app-wizard-start-local_drop-zone"],[3,0,0,"Drop your photos here or "],[1,0,0,"button",[3,0,0,"browse"]]]]],"n.tmpl":[[1,0,["element"],"span",[4,[["app-wizard-start-providers-item__",
"unchecked"]],0,"app-wizard-start-providers-item"],[6,"click","toggle"],[1,0,0,"img",[4,0,0,"app-wizard-start-providers-item_image"],[2,[["imageUrl"],[0]],0,"src"]],[1,0,0,"div",[4,[["app-wizard-start-providers-item_title__","unchecked"]],0,"app-wizard-start-providers-item_title"],[3,1,["title"]]]]],"m.tmpl":[[1,0,["element"],"div",[4,0,0,"app-wizard-start-providers-list"],[1,1,["childNodesElement"],"div",[4,0,0,"app-wizard-start-providers-list_content"]]]],"l.tmpl":[[1,0,["element"],"div",[4,0,0,
"app-wizard-start-dates"],[1,0,0,"h2",[3,0,0,"When did you do?"]],[1,0,0,"div",[4,0,0,"app-wizard-start-dates_date-buttons"],[1,0,0,"button",[4,0,0,"app-wizard-start-dates_date-button"],[6,"click","pickStartDate"],[3,1,["startDate"]]],[1,0,0,"span",[5,0,0,"font-size: 180%;"],[3,0,0,"—"]],[1,0,0,"button",[4,0,0,"app-wizard-start-dates_date-button"],[6,"click","pickEndDate"],[3,1,["endDate"]]]]]],"k.tmpl":[[1,0,["element"],"div",[4,[["popup-","orientation",0,"v-left-top v-right-top v-center-top v-left-center v-right-center v-center-center v-left-bottom v-right-bottom v-center-bottom h-left-top h-right-top h-center-top h-left-center h-right-center h-center-center h-left-bottom h-right-bottom h-center-bottom".split(" ")],
["","anim:visible",2,["visible","hidden"]],["","selected",0],["","disabled",0]],0,"Basis-Popup hidden"],[1,0,["content","childNodesElement"],"div",[4,0,0,"Basis-Popup-Content"]],[2,0,0,"id","app-wizard-start-date-picker"]]],"x.tmpl":[[1,0,["element"],"a",[4,[["","nodePeriodName",0,["day","month","year","decade","quarter"]],["","selected",0],["","disabled",0],["","before",0],["","after",0]],0,"Basis-Calendar-Node"],[6,"click"],[3,1,["title"]]]],"w.tmpl":[[1,0,["element"],"div",[4,[["","selected",0],
["","disabled",0]],0,"Basis-Calendar-Section Basis-Calendar-Section-Month"],[1,0,0,"div",[4,0,0,"Basis-Calendar-SectionTitle"],[3,1,["title"]],[3,0,0," "],[3,1,["year"]]],[1,0,["content","childNodesElement"],"div",[4,0,0,"Basis-Calendar-SectionContent"],[1,0,0,"div",[4,0,0,"Basis-Calendar-MonthWeekDays"],[1,0,0,"span",[4,0,0,"Basis-Calendar-MonthWeekDays-Day"],[3,"l10n:day2.mon@0.l10n",0]],[1,0,0,"span",[4,0,0,"Basis-Calendar-MonthWeekDays-Day"],[3,"l10n:day2.tue@0.l10n",0]],[1,0,0,"span",[4,0,0,
"Basis-Calendar-MonthWeekDays-Day"],[3,"l10n:day2.wed@0.l10n",0]],[1,0,0,"span",[4,0,0,"Basis-Calendar-MonthWeekDays-Day"],[3,"l10n:day2.thr@0.l10n",0]],[1,0,0,"span",[4,0,0,"Basis-Calendar-MonthWeekDays-Day"],[3,"l10n:day2.fri@0.l10n",0]],[1,0,0,"span",[4,0,0,"Basis-Calendar-MonthWeekDays-Day"],[3,"l10n:day2.sat@0.l10n",0]],[1,0,0,"span",[4,0,0,"Basis-Calendar-MonthWeekDays-Day"],[3,"l10n:day2.sun@0.l10n",0]]]]],[1,1,["tabElement"],"div",[4,[["","selected",0]],0,"Basis-Calendar-SectionTab"],[6,"click",
"select"],[3,1,["tabTitle"]]]],"v.tmpl":[[1,0,["element"],"div",[4,[["Basis-Calendar-Section-","sectionName",0,"Month Year YearDecade Century YearQuarter Quarter".split(" ")],["","selected",0],["","disabled",0]],0,"Basis-Calendar-Section"],[1,0,0,"div",[4,0,0,"Basis-Calendar-SectionTitle"],[3,1,["title"]]],[1,1,["childNodesElement"],"div",[4,0,0,"Basis-Calendar-SectionContent"]]],[1,1,["tabElement"],"div",[4,[["","selected",0]],0,"Basis-Calendar-SectionTab"],[6,"click","select"],[3,1,["tabTitle"]]]],
"u.tmpl":[[1,0,["element"],"div",[4,[["","selected",0],["","disabled",0]],0,"Basis-Calendar"],[1,0,0,"div",[4,0,0,"Basis-Calendar-Header"],[1,1,["sectionTabs"],"div",[4,0,0,"Basis-Calendar-SectionTabs"]]],[1,0,0,"div",[4,0,0,"Basis-Calendar-Body"],[1,0,0,"span",[6,"click","movePrev"],[4,0,0,"Basis-Calendar-ButtonPrevPeriod"],[1,0,0,"span",[3,0,0,"‹"]],[1,0,0,"span",[4,0,0,"over"]]],[1,0,0,"span",[6,"click","moveNext"],[4,0,0,"Basis-Calendar-ButtonNextPeriod"],[1,0,0,"span",[3,0,0,"›"]],[1,0,0,"span",
[4,0,0,"over"]]],[1,0,["content","childNodesElement"],"div",[4,0,0,"Basis-Calendar-Content"]]],[1,0,0,"div",[4,0,0,"Basis-Calendar-Footer"],[1,0,0,"div",[4,0,0,"Basis-Calendar-Footer-Date"],[1,0,0,"span",[4,0,0,"Basis-Calendar-Footer-Label"],[3,"l10n:today@0.l10n",0],[3,0,0,":"]],[1,0,0,"span",[6,"click","selectToday"],[4,0,0,"Basis-Calendar-Footer-Value"],[3,1,["today"]]]]]]],"t.tmpl":[[1,0,["element"],"div",[2,0,0,"id","Basis-PopupStack"],[4,[["","hasChildren",0]],0]]],"s.tmpl":[[1,0,["element"],
"div",[4,[["mode-","orientation",0,"v-left-top v-right-top v-center-top v-left-center v-right-center v-center-center v-left-bottom v-right-bottom v-center-bottom h-left-top h-right-top h-center-top h-left-center h-right-center h-center-center h-left-bottom h-right-bottom h-center-bottom".split(" ")],["","anim:visible",2,["visible","hidden"]],["","selected",0],["","disabled",0]],0,"Basis-Balloon hidden"],[6,"click"],[1,0,0,"div",[4,0,0,"Basis-Balloon-Canvas"],[1,0,0,"div",[4,0,0,"corner-left-top"]],
[1,0,0,"div",[4,0,0,"corner-right-top"]],[1,0,0,"div",[4,0,0,"side-top"]],[1,0,0,"div",[4,0,0,"side-left"]],[1,0,0,"div",[4,0,0,"side-right"]],[1,0,0,"div",[4,0,0,"content"]],[1,0,0,"div",[4,0,0,"corner-left-bottom"]],[1,0,0,"div",[4,0,0,"corner-right-bottom"]],[1,0,0,"div",[4,0,0,"side-bottom"]],[1,0,0,"div",[4,0,0,"tail"]]],[1,0,0,"div",[4,0,0,"Basis-Balloon-Layout"],[1,0,["content","childNodesElement"],"div",[4,0,0,"Basis-Balloon-Content"]]]]],"r.tmpl":[[1,0,["element"],"div",[4,[["popup-","orientation",
0,"v-left-top v-right-top v-center-top v-left-center v-right-center v-center-center v-left-bottom v-right-bottom v-center-bottom h-left-top h-right-top h-center-top h-left-center h-right-center h-center-center h-left-bottom h-right-bottom h-center-bottom".split(" ")],["","anim:visible",2,["visible","hidden"]],["","selected",0],["","disabled",0]],0,"Basis-Popup hidden"],[1,0,["content","childNodesElement"],"div",[4,0,0,"Basis-Popup-Content"]]]],"0.tmpl":[[1,0,["element"],"div",[4,[["app-page__","unselected"]],
0,"app-page"]]],"q.tmpl":[[1,0,["element"],"div",[4,0,0,"Basis-VerticalPanelStack"],[1,1,["ruller"],"div",[5,0,0,"position: absolute;visibility: hidden;top: -1000px;width: 10px;"]]]],"p.tmpl":[[1,0,["element"],"div",[4,0,0,"Basis-VerticalPanel"]]],"j.tmpl":[[1,0,["element"],"div",[4,0,0,"app-wizard-start"],[8,1,["dates"]],[8,1,["providers"]],[1,0,0,"button",[4,0,0,"app-wizard-start_create-button"],[6,"click","create"],[3,0,0,"Compose"]]]],"i.tmpl":[[1,0,["element"],"div",[4,[["app-event-progress__",
"visible"]],0,"app-event-progress"],[1,0,0,"div",[4,0,0,"app-event-progress_box"],[1,0,0,"div",[4,0,0,"app-event-progress_fill"],[5,[[["progress"],[0,"%"],"width"]],0]]]]],"1.tmpl":[[1,0,["element"],"div",[4,0,0,"app-layout"],[1,0,0,"h1",[3,0,0,"EventShot"]],[1,0,0,"div",[4,0,0,"app-main-menu"],[1,0,0,"span",[4,0,0,"app-main-menu-item"],[6,"click","showEventList"],[3,0,0,"My events"]],[1,0,0,"span",[4,0,0,"app-main-menu-item"],[6,"click","createEvent"],[3,0,0,"New event"]]],[8,1,["tabs"]],[8,1,["pages"]]]],
"2.tmpl":[[1,0,["element"],"div",[4,0,0,"app-welcome"],[1,0,0,"h2",[3,0,0,"Welcome page"]]]],"3.tmpl":[[1,0,["element"],"div",[4,0,0,"app-wizard"]]],"4.tmpl":[[1,0,["element"],"div",[4,[["app-wizard-page__","selected"],["app-wizard-page__","unselected"]],0,"app-wizard-page"],[8,1,["content"]]]],"h.tmpl":[[1,0,["element"],"div",[4,0,0,"app-event-day"],[1,0,0,"div",[4,0,0,"app-event-day_title"],[3,1,["title"]]]]],"g.tmpl":[[1,0,["element"],"div",[4,[["app-event-entry-list__","visible"]],0,"app-event-entry-list"]]],
"f.tmpl":[[1,0,["element"],"div",[4,0,0,"app-event-description"],[1,1,["input"],"textarea",[4,0,0,"app-event-description_input"],[2,0,0,"placeholder","Event description"],[2,[["description"],[0]],0,"value"],[6,"keyup","change"],[6,"change"],[6,"blur","change"]]]],"e.tmpl":[[1,0,["element"],"div",[4,0,0,"app-event-title"],[1,0,["input","focus"],"input",[4,0,0,"app-event-title_input"],[2,0,0,"placeholder","Give a name for event"],[2,[["title"],[0]],0,"value"],[6,"keyup","change"],[6,"change"],[6,"blur",
"change"]]]],"d.tmpl":[[1,0,["element"],"div",[4,0,0,"app-event"],[1,0,0,"div",[4,0,0,"app-event_dates"],[3,1,["startDate"]],[3,0,0," — "],[3,1,["endDate"]]],[8,1,["title"]],[8,1,["description"]],[8,1,["entries"]],[8,1,["progress"]]]],"c.tmpl":[[1,0,["element"],"div",[4,[["app-event-entry_","hidden"]],0,"app-event-entry app-event-entry-weather"],[1,0,0,"a",[4,0,0,"app-event-entry_source"],[2,[["url"],[0]],0,"href"],[2,0,0,"target","_blank"],[1,0,0,"span",[4,0,0,"app-event-entry_delete"],[6,"click",
"remove"],[2,0,0,"title","Hide entry"],[3,0,0,"Remove"]],[1,0,0,"span",[4,0,0,"app-event-entry_source-icon"],[1,0,0,"img",[2,[["sourceImage"],[0]],0,"src"],[2,0,0,"width","46"]]]],[1,0,0,"div",[4,0,0,"app-event-entry_content"],[1,0,0,"div",[4,0,0,"app-event-entry-text_wrapper"],[1,0,0,"img",[4,0,0,"app-event-entry-weather_image"],[2,[["image"],[0]],0,"src"]],[3,1,["title"]],[1,0,0,"br"],[1,0,0,"span",[4,0,0,"app-event-entry-time"],[3,1,["time"]]]]]],[3,0,0,"</div>"]],"b.tmpl":[[1,0,["element"],"div",
[4,[["app-event-entry_","hidden"]],0,"app-event-entry app-event-entry-video"],[1,0,0,"a",[4,0,0,"app-event-entry_source"],[2,[["url"],[0]],0,"href"],[2,0,0,"target","_blank"],[1,0,0,"span",[4,0,0,"app-event-entry_delete"],[6,"click","remove"],[2,0,0,"title","Hide entry"],[3,0,0,"Remove"]],[1,0,0,"span",[4,0,0,"app-event-entry_source-icon"],[1,0,0,"img",[2,[["sourceImage"],[0]],0,"src"],[2,0,0,"width","46"]]]],[1,0,0,"div",[4,0,0,"app-event-entry_content"],[1,0,0,"div",[4,0,0,"app-event-entry-video_video-card_wrapper"],
[1,0,0,"div",[4,0,0,"app-event-entry-video_video-card"],[1,0,0,"video",[2,[["v_width"],[0]],0,"width"],[2,[["v_height"],[0]],0,"height"],[2,0,0,"controls"],[2,[["videoUrl"],[0]],0,"src"],[1,0,0,"img",[4,0,0,"app-event-entry-video_image"],[2,[["imageUrl"],[0]],0,"src"],[2,[["width"],[0]],0,"width"],[2,[["height"],[0]],0,"height"]]],[1,0,0,"div",[4,[["app-event-entry-video_title__","title",0]],0,"app-event-entry-video_title"],[5,[[["v_width"],[0,"px"],"max-width"]],0],[1,0,0,"span",[4,0,0,"app-event-entry-video_title-text"],
[1,1,["title"],"span"],[3,0,0," "],[1,0,0,"a",[2,0,0,"href","#"],[3,1,["time"]]]]]]]]],[3,0,0,"</div>"]],"a.tmpl":[[1,0,["element"],"div",[4,[["app-event-entry_","hidden"]],0,"app-event-entry app-event-entry-photo"],[1,0,0,"a",[4,0,0,"app-event-entry_source"],[2,[["url"],[0]],0,"href"],[2,0,0,"target","_blank"],[1,0,0,"span",[4,0,0,"app-event-entry_delete"],[6,"click","remove"],[2,0,0,"title","Hide entry"],[3,0,0,"Remove"]],[1,0,0,"span",[4,0,0,"app-event-entry_source-icon"],[1,0,0,"img",[2,[["sourceImage"],
[0]],0,"src"],[2,0,0,"width","46"]]]],[1,0,0,"div",[4,0,0,"app-event-entry_content"],[1,0,0,"div",[4,0,0,"app-event-entry-photo_photo-card_wrapper"],[1,0,0,"div",[4,0,0,"app-event-entry-photo_photo-card"],[1,0,0,"img",[4,0,0,"app-event-entry-photo_image"],[2,[["imageUrl"],[0]],0,"src"],[2,[["width"],[0]],0,"width"],[2,[["height"],[0]],0,"height"]],[1,0,0,"div",[4,[["app-event-entry-photo_title__","title",0]],0,"app-event-entry-photo_title"],[1,0,0,"span",[4,0,0,"app-event-entry-photo_title-text"],
[1,1,["title"],"span"],[3,0,0," "],[1,0,0,"a",[2,0,0,"href","#"],[3,1,["time"]]]]]]]]],[3,0,0,"</div>"]],"9.tmpl":[[1,0,["element"],"div",[4,[["app-event-entry_","hidden"]],0,"app-event-entry app-event-entry-text"],[1,0,0,"a",[4,0,0,"app-event-entry_source"],[2,[["url"],[0]],0,"href"],[2,0,0,"target","_blank"],[1,0,0,"span",[4,0,0,"app-event-entry_delete"],[6,"click","remove"],[2,0,0,"title","Hide entry"],[3,0,0,"Remove"]],[1,0,0,"span",[4,0,0,"app-event-entry_source-icon"],[1,0,0,"img",[2,[["sourceImage"],
[0]],0,"src"],[2,0,0,"width","46"]]]],[1,0,0,"div",[4,0,0,"app-event-entry_content"],[1,0,0,"div",[4,0,0,"app-event-entry-text_wrapper"],[1,1,["content"],"span"],[1,0,0,"br"],[1,0,0,"span",[4,0,0,"app-event-entry-time"],[3,1,["time"]]]]]],[3,0,0,"</div>"]],"8.tmpl":[[1,0,["element"],"div",[4,[["app-event-entry_","hidden"]],0,"app-event-entry"],[1,0,0,"a",[4,0,0,"app-event-entry_source"],[2,[["url"],[0]],0,"href"],[2,0,0,"target","_blank"],[1,0,0,"span",[4,0,0,"app-event-entry_delete"],[6,"click",
"remove"],[2,0,0,"title","Hide entry"],[3,0,0,"Remove"]],[1,0,0,"span",[4,0,0,"app-event-entry_source-icon"],[1,0,0,"img",[2,[["sourceImage"],[0]],0,"src"],[2,0,0,"width","46"]]]],[1,0,0,"div",[4,0,0,"app-event-entry_content"],[8,1,["content"]]]]],"7.tmpl":[[1,0,["element"],"div",[4,0,0,"app-eventlist-item-cover"],[5,[[["url"],["url(",0,")"],"background-image"]],0]]],"5.tmpl":[[1,0,["element"],"div",[4,0,0,"app-eventlist"],[1,0,0,"div",[1,0,0,"div",[4,0,0,"app-eventlist-item app-eventlist_new"],[6,
"click","create"],[1,0,0,"div",[4,0,0,"app-eventlist_new-overlay"],[1,0,0,"div",[4,0,0,"app-eventlist_new-overlay-icon"]]]],[8,1,["childNodesHere"]]]]],"0.l10n":{"en-US":{quarter:"Quarter",today:"Today",selected:"Selected",month:{jan:"January",feb:"February",mar:"March",apr:"April",may:"May",jun:"June",jul:"July",aug:"August",sep:"September",oct:"October",nov:"November",dec:"December"},monthShort:{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",
nov:"Nov",dec:"Dec"},day:{mon:"Monday",tue:"Tuesday",wed:"Wednesday",thr:"Thursday",fri:"Friday",sat:"Saturday",sun:"Sunday"},day2:{mon:"Mo",tue:"Tu",wed:"We",thr:"Th",fri:"Fr",sat:"Sa",sun:"Su"},day3:{mon:"Mon",tue:"Tue",wed:"Wed",thr:"Thr",fri:"Fri",sat:"Sat",sun:"Sun"}},"ru-RU":{quarter:"Квартал",today:"Сегодня",selected:"Выбрано",month:{jan:"Январь",feb:"Февраль",mar:"Март",apr:"Апрель",may:"Май",jun:"Июнь",jul:"Июль",aug:"Август",sep:"Сентябрь",oct:"Октябрь",nov:"Ноябрь",dec:"Декабрь"},monthShort:{jan:"Янв",
feb:"Фев",mar:"Мар",apr:"Апр",may:"Май",jun:"Июн",jul:"Июл",aug:"Авг",sep:"Сен",oct:"Окт",nov:"Ноя",dec:"Дек"},day:{mon:"Понедельник",tue:"Вторник",wed:"Среда",thr:"Четверг",fri:"Пятница",sat:"Суббота",sun:"Воскресенье"},day2:{mon:"Пн",tue:"Вт",wed:"Ср",thr:"Чт",fri:"Пт",sat:"Сб",sun:"Вс"},day3:{mon:"Пн",tue:"Вт",wed:"Ср",thr:"Чт",fri:"Пт",sat:"Сб",sun:"Вс"}},"uk-UA":{quarter:"Квартал",today:"Сьогодні",selected:"Вибрані",month:{jan:"Січня",feb:"Лютого",mar:"Березня",apr:"Квітня",may:"Травня",jun:"Червня",
jul:"Липня",aug:"Серпня",sep:"Вересня",oct:"Жовтня",nov:"Листопада",dec:"Грудня"},monthShort:{jan:"Січ",feb:"Лют",mar:"Бер",apr:"Кві",may:"Тра",jun:"Чер",jul:"Лип",aug:"Сер",sep:"Вер",oct:"Жов",nov:"Лис",dec:"Гру"},day:{mon:"Понеділок",tue:"Вівторок",wed:"Середа",thr:"Четвер",fri:"П'ятниця",sat:"Субота",sun:"Неділя"},day2:{mon:"Пн",tue:"Вт",wed:"Ср",thr:"Чт",fri:"Пт",sat:"Сб",sun:"Нд"},day3:{mon:"Пн",tue:"Вт",wed:"Ср",thr:"Чт",fri:"Пт",sat:"Сб",sun:"Нд"}}},"q.js":function(c,F,a,p,w,z,M){function h(a,
e){return v(e,!0).createRule(a)}function n(a,e){var g=a.match(/^([^{]+)\{(.*)\}\s*$/);if(g){for(var b=g[1].trim().split(/\s*,\s*/),u=0;u<b.length;u++)this.addRule(b[u],g[2]||null,e++);return e-1}}function s(ba,e){var g=x.createElement(ba?a.string.format('link[type="text/css"][rel="{alt}stylesheet"][href="{url}"]',{alt:e?"alternate ":"",url:ba.replace(/\"/g,'\\"')}):'style[type="text/css"]');a.doc.head.add(g);g=g.sheet||g.styleSheet;try{g.cssRules||(g.cssRules=g.rules)}catch(b){}g.insertRule||(g.insertRule=
n);g.deleteRule||(g.deleteRule=g.removeRule);return g}function v(a,e){a||(a="DefaultGenericStyleSheet");R[a]||e&&(R[a]=new G(s()));return R[a]}function d(ba,e,g,b){b=b||{};e=e.split(" ");for(var u=0,t;t=e[u];u++)if("undefined"!=typeof q.style[t]){g&&(a.platformFeature["css-"+ba]=t);k[ba]={key:t,getter:b[t]};break}}function A(a,e,g){var u;var t=e;u=(t=(u=k[t])?u.key:O(t.replace(/^-ms-/,"ms-")))?{key:t,value:u&&u.getter?u.getter(g):g}:null;if(u){var t=u.key,f=!!b.test(g);g=a.style;var y;(y=f)||(y=g.getPropertyPriority?
g.getPropertyPriority(e)==I:!1);if(y)if(u.value=u.value.replace(b,""),g.setProperty)f||g.removeProperty(t),g.setProperty(t,u.value,f?I:"");else{a=t+": "+u.value+(f?" !"+I:"")+";";e=g[t]?t+"\\s*:\\s*"+g[t]+"(\\s*!"+I+")?\\s*;?":"^";try{g.cssText=g.cssText.replace(RegExp(e,"i"),a)}catch(E){}}else{if(r)try{a.style[u.key]=u.value}catch(C){}else a.style[u.key]=u.value;return a.style[u.key]}}}function D(a){return function(){for(var e=0,g;g=this.rules[e];e++)g[a].apply(g,arguments)}}function B(a){return t[a]||
(t[a]=RegExp("\\s*\\b"+a+"\\b"))}function L(a,e){var g=(e?"g":"s")+a;return u[g]||(u[g]=RegExp((e?"":"\\s*")+"\\b"+a+"\\S*\\b"))}function H(a){return function(e){return 0==e||isNaN(e)?"0":e+a}}a.require("p.js");c=this.path;z=p.document;var S=a.array.from,O=a.string.camelize;w=a.Class;var x=a.dom;z=(p=p.DOMTokenList)&&z&&z.documentElement.classList instanceof p;var b=/\s*!important/i,I="important",Q=1,R={},r=function(){var a=x.createElement();try{a.style.width="badvalue"}catch(e){return!0}return!1}(),
k={},q=x.createElement("");d("opacity","opacity filter",!0,{filter:function(a){return"alpha(opacity:"+parseInt(100*a,10)+")"}});d("float","cssFloat styleFloat");var G=w(null,{className:c+".StyleSheet",styleSheet:null,rules:null,init:function(a){this.styleSheet=a;this.rules=[]},createRule:function(a){var e=this.styleSheet,g=this.rules.length;e.insertRule(a+"{}",g);a=S(e.cssRules,g);a=a[1]?new m(a,this):new f(a[0],this);this.rules.push.apply(this.rules,a.rules||[a]);return a},deleteRule:function(a){if(a instanceof
m)a.rules.forEach(this.deleteRule,this);else{var e=this.rules.indexOf(a);-1!=e&&(this.rules.splice(e,1),this.styleSheet.deleteRule(e))}a.owner=null;a.destroy()},destroy:function(){this.rules.forEach(function(a){a.destroy()});this.rules=this.styleSheet=null}}),f=w(null,{className:c+".Rule",rule:null,selector:"",init:function(a,e){this.owner=e;this.rule=a;this.selector=a.selectorText},setProperty:function(a,e){A(this.rule,a,e)},setStyle:function(b){a.object.iterate(b,this.setProperty,this)},clear:function(){this.rule.style.cssText=
""},destroy:function(){this.owner&&this.owner.deleteRule(this);this.rule=this.owner=null}}),m=w(null,{className:c+".RuleSet",rules:null,init:function(a,e){this.owner=e;this.rules=a.map(function(a){return new f(a,this)},this)},createRule:function(a){a=this.owner.createRule(a);this.rules.push(a);a.owner=this;return a},deleteRule:function(a){var e=this.rules.indexOf(a);-1!=e&&(this.rules.splice(e,1),this.owner.deleteRule(a))},setProperty:D("setProperty"),setStyle:D("setStyle"),clear:D("clear"),destroy:function(){this.owner&&
this.owner.deleteRule(this);this.rules=this.owner=null}}),W,t={},C=w(null,{className:c+".ClassList",init:function(a){this.element=a},set_:function(a){var e=this.element.className;return"string"==typeof e?this.element.className=a:e.baseVal=a},toString:function(){var a=this.element.className;return"string"==typeof a?a:a.baseVal},set:function(a){this.clear();a.trim().split(" ").forEach(this.add,this)},replace:function(a,e,g){g=g||"";"undefined"!=typeof a&&this.remove(g+a);"undefined"!=typeof e&&this.add(g+
e)},bool:function(a,e){e?this.add(a):this.remove(a)},clear:function(){this.set_("")},contains:function(a){return!!this.toString().match(B(a))},item:function(a){return this.toString().trim().split(" ")[a]},add:function(a){var e=this.toString();e.match(B(a))||this.set_(e+" "+a)},remove:function(a){var e=this.toString();a=e.replace(B(a),"");a!=e&&this.set_(a)},toggle:function(a){var e=this.contains(a);e?this.remove(a):this.add(a);return!e}}),u={},$=w(null,{className:c+".ClassListNS",delim:"-",init:function(a,
e){this.classList=e;this.prefix=a+this.delim},add:function(a){this.classList.add(this.prefix+a)},remove:function(a){this.classList.remove(this.prefix+a)},items:function(){var a=this.classList.toString();return a?a.match(L(this.prefix,!0)):null},set:function(a){var e=this.items();a="undefined"!=typeof a?this.prefix+a:"";var g=this.classList;if(e)if(1==e.length){if(e[0]===a)return;g.remove(e[0])}else this.clear();a&&g.add(a)},clear:function(){this.items().forEach(this.classList.remove,this.classList)}});
z?(c=C.prototype,a.object.extend(p.prototype,{set:c.set,replace:c.replace,bool:c.bool,clear:function(){for(var a=this.length;0<a;)this.remove(this[--a])},setPrefixToken:c.setPrefixToken}),W=function(a){return("string"==typeof a?x.get(a):a).classList}):W=function(a){return new C("string"==typeof a?x.get(a):a)};F.exports={setStyleProperty:A,setStyle:function(a,e){for(var g in e)A(a,g,e[g]);return a},classList:function(a,e){return e?new $(e,W(a)):W(a)},uniqueRule:function(a){var e="genericRule-"+Q++;
a&&W(a).add(e);a=h("."+e);a.token=e;return a},createRule:h,getStyleSheet:v,addStyleSheet:s,StyleSheet:G,Rule:f,RuleSet:m,display:function(a,e){return A(a,"display","string"==typeof e?e:e?"":"none")},visibility:function(a,e){return A(a,"visibility",e?"":"hidden")},em:H("em"),ex:H("ex"),px:H("px"),percent:H("%")}},"n.js":function(c,F,a,p,w,z,M){a.require("5.js");a.require("i.js");var h=a.data.STATE.UNDEFINED,n=a.data.STATE.READY,s=a.data.STATE.PROCESSING,v=a.data.STATE.ERROR,d=function(){},A={start:function(a,
d){var c=d.requestData.origin;this.start.call(d.requestData.origin);c.state!=s&&c.setState(s)},success:function(a,d,c){a=d.requestData.origin;this.success.call(a,c);a.state==s&&a.setState(n)},failure:function(a,d,c){a=d.requestData.origin;this.failure.call(a,c);a.state==s&&a.setState(v,c)},abort:function(a,d){var c=d.requestData.origin;this.abort.call(c);c.state==s&&c.setState(h)},complete:function(a,d){this.complete.call(d.requestData.origin)}},D={start:d,success:d,failure:d,abort:d,complete:d};
F.exports={create:function(c){c=a.object.extend({prepare:d,request:d},c);var n=a.object.splice(c,["prepare","request"]),h=a.object.merge(D,a.object.splice(c,["start","success","failure","abort","complete"])),v=a.fn.lazyInit(function(){var d=c.transport?c.transport:c.service?c.service.createTransport(c):c.createTransport?c.createTransport(c):new a.net.Transport(c);d.addHandler(A,h);return d});return function(){this.state!=s&&(n.prepare.apply(this,arguments),this.request=v().request(a.object.complete({origin:this},
n.request.apply(this,arguments))))}}}},"1.js":function(c,F,a,p,w,z,M){function h(a){n.title=a}var n=p.document||{title:"unknown"},s=n.title,v=a.fn.$undef,d,A;c=a.fn.lazyInit(function(c){var p={setTitle:function(d){d!=s&&(s instanceof a.Token&&s.detach(h),d instanceof a.Token?(d.attach(h),h(d.get())):h(d),s=d)},setElement:function(a){a="string"==typeof a?n.getElementById(a):a;A!=a&&(A?A.parentNode.replaceChild(a,A):(A=a,d||(d={type:"container",node:n.body}),(a="string"==typeof d.node?n.getElementById(d.node):
d.node)&&("container"==d.type?a.appendChild(A):a.parentNode.replaceChild(A,a))))}},L;for(L in c){var H=c[L];switch(L){case "title":p.setTitle(H);break;case "container":d={type:"insert",node:H};break;case "replace":d={type:"replace",node:H};break;case "element":A=H;break;case "init":v="function"==typeof H?H:v}}a.ready(function(){var a=A,d=v.call(p);d&&(a=d.element?d.element:d);A=null;p.setElement(a)});return p});F.exports={create:c}},"m.js":function(c,F,a,p,w,z,M){a.require("4.js");a.require("i.js");
a.require("n.js");c=a.event.create;var h=a.net.action.create,n=a.event.Emitter,s={start:function(c,d){a.array.add(this.inprogressTransports,d.transport)},complete:function(c,d){a.array.remove(this.inprogressTransports,d.transport)}};c=n.subclass({className:this.path+".Service",inprogressTransports:null,transportClass:a.net.AjaxTransport,emit_sessionOpen:c("sessionOpen"),emit_sessionClose:c("sessionClose"),emit_sessionFreeze:c("sessionFreeze"),emit_sessionUnfreeze:c("sessionUnfreeze"),isSecure:!1,
prepare:a.fn.$true,signature:a.fn.$undef,isSessionExpiredError:a.fn.$false,init:function(){n.prototype.init.call(this);this.inprogressTransports=[];var a=this.transportClass;this.transportClass=a.subclass({service:this,needSignature:this.isSecure,emit_failure:function(d,c){a.prototype.emit_failure.call(this,d,c);this.needSignature&&this.service.isSessionExpiredError(d)&&(this.service.freeze(),this.service.stoppedTransports.push(this),this.stop())},request:function(d){if(this.service.prepare(this,
d)&&(!this.needSignature||this.service.sign(this)))return a.prototype.request.call(this,d)}});this.addHandler(s)},sign:function(a){if(this.sessionKey)return this.signature(a,this.sessionData),!0},openSession:function(a,d){this.sessionKey=a;this.sessionData=d;this.unfreeze();this.emit_sessionOpen()},closeSession:function(){this.freeze();this.emit_sessionClose()},freeze:function(){if(this.sessionKey){this.sessionData=this.sessionKey=null;this.stoppedTransports=this.inprogressTransports.filter(function(a){return a.needSignature});
for(var a=0,d;d=this.inprogressTransports[a];a++)d.stop();this.emit_sessionFreeze()}},unfreeze:function(){if(this.stoppedTransports)for(var a=0,d;d=this.stoppedTransports[a];a++)d.resume();this.emit_sessionUnfreeze()},createTransport:function(a){return new this.transportClass(a)},createAction:function(c){return h(a.object.complete({service:this},c))},destroy:function(){this.sessionData=this.sessionKey=this.stoppedTransports=this.inprogressTransports=null;n.prototype.destroy.call(this)}});F.exports=
{Service:c}},"l.js":function(c,F,a,p,w,z,M){function h(a){"updateProviderList"===a.data&&app.updateProviderList()}a.require("m.js");c=new a.net.service.Service({transportClass:a.net.Transport.subclass({request:function(){a.net.Transport.prototype.request.apply(this,arguments)}})});(app.updateProviderList=function(){a.net.request({url:"/api/user"},function(a){a.user&&app.type.Provider.all.forEach(function(c){c.set("enabled",-1!=a.user.prodivers.indexOf(c.data.id))});if(app.onProvidersInit)app.onProvidersInit()})})();
p.addEventListener?p.addEventListener("message",h,!0):p.attachEvent("onmessage",h);F.exports={"default":c}},"k.js":function(c,F,a,p,w,z,M){a.require("4.js");a.require("5.js");p=this.path;var h=a.cleaner,n=a.data.AbstractData,s=a.data.Value,v=a.data.STATE;c=s.subclass({className:p+".Property",extendConstructor_:!1,init:function(a,d,c){this.value=a;this.handler=d;this.proxy=c;s.prototype.init.call(this)}});var d={stateChanged:function(){this.fire(!1,!0)},update:function(){this.fire(!0)},change:function(){this.fire(!0)},
destroy:function(a){this.remove(a)}},A=s.subclass({className:p+".ObjectSet",objects:null,value:0,valueChanged_:!1,calculateValue:function(){return this.value+1},calculateOnInit:!1,statePriority:v.priority,stateChanged_:!0,timer_:!1,init:function(){s.prototype.init.call(this);var a=this.objects;this.objects=[];a&&Array.isArray(a)&&(this.lock(),this.add.apply(this,a),this.unlock());this.valueChanged_=this.stateChanged_=!!this.calculateOnInit;this.update()},add:function(){for(var c=0,h=arguments.length;c<
h;c++){var s=arguments[c];if(s instanceof n)a.array.add(this.objects,s)&&s.addHandler(d,this);else throw 41;}this.fire(!0,!0)},remove:function(c){a.array.remove(this.objects,c)&&c.removeHandler(d,this);this.fire(!0,!0)},clear:function(){for(var a=0,c;c=this.objects[a];a++)c.removeHandler(d,this);this.objects.length=0;this.fire(!0,!0)},fire:function(d,c){this.locked||(this.valueChanged_=this.valueChanged_||!!d,this.stateChanged_=this.stateChanged_||!!c,this.timer_||!this.valueChanged_&&!this.stateChanged_||
(this.timer_=a.setImmediate(this.update.bind(this))))},lock:function(){this.locked=!0},unlock:function(){this.locked=!1},update:function(){var d=this.valueChanged_,c=this.stateChanged_;this.stateChanged_=this.valueChanged_=!1;this.timer_=a.clearImmediate(this.timer_);if(!h.globalDestroy&&(d&&this.set(this.calculateValue()),c))if(d=this.objects.length){for(var c=-2,n,s=0;s<d;s++){var p=this.objects[s],A=this.statePriority.indexOf(String(p.state));A>c&&(n=p,c=A)}n&&this.setState(n.state,n.state.data)}else this.setState(v.UNDEFINED)},
destroy:function(){this.lock();this.clear();this.timer_&&a.clearImmediate(this.timer_);s.prototype.destroy.call(this)}});p=c.subclass({className:p+".Expression",init:function(d,c){s.prototype.init.call(this);d=a.array(arguments);c=d.pop();"function"!=typeof c&&(c=a.fn.$undef);1==d.length&&d[0].link(this,function(a){this.set(c.call(this,a))});if(1<d.length){var n=new A({objects:d,calculateOnInit:!0,calculateValue:function(){return c.apply(this,d.map(function(a){return a.value}))}});n.link(this,this.set);
this.addHandler({destroy:function(){h.globalDestroy||n.destroy()}})}}});F.exports={Property:c,ObjectSet:A,Expression:p}},"j.js":function(c,F,a,p,w,z,M){function h(a,e){if(!a.length)return 0;var g,b,u=0,t=a.length-1;do if(g=u+t>>1,b=a[g]||0,e<b)t=g-1;else if(e>b)u=g+1;else return e==b?g:0;while(u<=t);return g+(b<e)}function n(){}function s(a,e,g){var b=a.indexCache_;a.lock();if(e)for(var u=0,t;t=e[u++];){var y=a.normalize(a.valueGetter(t));b[t.basisObjectId]=y;a.add_(y)}if(g)for(u=0;t=g[u++];)e=t.basisObjectId,
a.remove_(b[e]),delete b[e];a.unlock()}function v(a,e){if(!1==e instanceof n)throw 39;var g=a.basisObjectId,b=C[g];b||(b=C[g]={},a.addHandler(t),t.itemsChanged.call(a,a,{inserted:a.getItems()}));var g=e.indexId,u=b[g];if(!u){e=Q[g];if(!e)throw 40;u=new e.indexClass;u.addHandler(R,a);b[g]=u;s(u,a.getItems())}return u}function d(a,e){var g=C[a.basisObjectId];if(g&&g[e.indexId]){delete g[e.indexId];e.removeHandler(R,a);for(var b in g)return;a.removeHandler(t);delete C[a.basisObjectId]}}function A(){return"calc-index-preset-"+
a.number.lead($++,8)}a.require("5.js");a.require("h.js");a.require("k.js");var D=this.path,B=a.Class,L=a.data.KeyObjectMap,H=a.data.AbstractDataset,S=a.data.DatasetWrapper,O=a.data.Value,x=a.data.dataset.MapFilter,b=B(O,{className:D+".Index",autoDestroy:!0,indexCache_:null,valueGetter:a.fn.$null,updateEvents:{},value:0,init:function(){this.indexCache_={};O.prototype.init.call(this)},add_:function(a){},remove_:function(a){},update_:function(a,e){},normalize:function(a){return Number(a)||0},destroy:function(){O.prototype.destroy.call(this);
this.indexCache_=null}});c=B(b,{className:D+".Sum",add_:function(a){this.value+=a},remove_:function(a){this.value-=a},update_:function(a,e){this.set(this.value-e+a)}});p=B(b,{className:D+".Count",valueGetter:a.fn.$true,add_:function(a){this.value+=a},remove_:function(a){this.value-=a},normalize:function(a){return!!a},update_:function(a,e){this.set(this.value-!!e+!!a)}});w=B(b,{className:D+".Avg",sum_:0,count_:0,add_:function(a){this.sum_+=a;this.count_+=1;this.value=this.sum_/this.count_},remove_:function(a){this.sum_-=
a;this.value=(this.count_-=1)?this.sum_/this.count_:0},update_:function(a,e){this.sum_+=a-e;this.set(this.sum_/this.count_)}});z=B(b,{className:D+".VectorIndex",itemGetter:a.fn.$null,vector_:null,value:void 0,init:function(){this.vector_=[];b.prototype.init.call(this)},add_:function(a){null!==a&&(this.vector_.splice(h(this.vector_,a),0,a),this.value=this.vectorGetter(this.vector_))},remove_:function(a){null!==a&&(this.vector_.splice(h(this.vector_,a),1),this.value=this.vectorGetter(this.vector_))},
update_:function(a,e){null!==e&&this.vector_.splice(h(this.vector_,e),1);null!==a&&this.vector_.splice(h(this.vector_,a),0,a);this.set(this.vectorGetter(this.vector_))},normalize:function(a){return"string"==typeof a||"number"==typeof a?a:null},destroy:function(){b.prototype.destroy.call(this);this.vector_=null}});M=B(z,{className:D+".Min",vectorGetter:function(a){return a[0]}});var I=B(z,{className:D+".Max",vectorGetter:function(a){return a[a.length-1]}}),Q={},R={destroy:function(a){d(this,a)}},r=
function(u,e){return function(g,t,f){var C;if(g instanceof H||g instanceof S)C=g,g=t,t=f;g=g||e;if(!B.isClass(u)||!u.isSubclassOf(b))throw 37;g=a.getter(g);t=t||"update";if("string"!=typeof t)throw 38;t=t.trim().split(" ").sort();f=[u.basisClassId_,g.basisGetterId_,t].join("_");var y=Q[f];if(y)g=y.owner;else{for(var E={},y=0;y<t.length;y++)E[t[y]]=!0;y=new n;Q[f]={owner:y,indexClass:u.subclass({indexId:f,updateEvents:E,valueGetter:g})};y.indexId=f;g=y}return C?v(C,g):g}},k=r(p,a.fn.$true),q=r(c),
G=r(w),f=r(M),m=r(I),W={"*":function(a){var e,g,b=a.type,u=a.sender,t=u.basisObjectId,f=C[this.basisObjectId],E;for(E in f)g=f[E],g.updateEvents[b]&&(a=g.indexCache_[t],e=g.normalize(g.valueGetter(u)),e!==a&&(g.update_(e,a),g.indexCache_[t]=e))}},t={itemsChanged:function(a,e){var g;if(g=e.inserted)for(var b=g.length;0<b--;)g[b].addHandler(W,this);if(g=e.deleted)for(b=g.length;0<b--;)g[b].removeHandler(W,this);g=C[this.basisObjectId];for(var u in g)s(g[u],e.inserted,e.deleted)},destroy:function(){var a=
C[this.basisObjectId],e;for(e in a)d(this,a[e])}},C={},u=B(null,{className:D+".CalcIndexPreset",extendConstructor_:!0,indexes:{},calc:a.fn.$null}),$=1,D=B(x,{className:D+".IndexMap",calcs:null,indexes:null,indexes_:null,indexesBind_:null,timer_:void 0,indexUpdated:null,indexValues:null,memberSourceMap:null,keyMap:null,map:function(a){return this.keyMap.get(a,!0)},addMemberRef:function(a,e){this.memberSourceMap[a.basisObjectId]=e.basisObjectId;this.listen.member&&a.addHandler(this.listen.member,this);
this.sourceMap_[e.basisObjectId].updated=!0;0<a.subscriberCount&&this.calcMember(a)},removeMemberRef:function(a,e){delete this.memberSourceMap[a.basisObjectId];this.listen.member&&a.removeHandler(this.listen.member,this)},emit_sourceChanged:function(a){x.prototype.emit_sourceChanged.call(this,a);for(var e in this.indexes_){var b=this.indexes_[e];a&&(this.removeIndex(e),d(a,this.indexes[e]));this.source&&this.addIndex(e,v(this.source,b))}},listen:{index:{change:function(a){var e=this.indexMap;e.indexValues[this.key]=
a.value;e.indexUpdated=!0;e.recalcRequest()}},member:{subscribersChanged:function(a,e){0<a.subscriberCount&&this.calcMember(a)}}},ruleEvents:a.data.dataset.createRuleEvents(function(a,e){x.prototype.ruleEvents.update.call(this,a,e);this.sourceMap_[a.basisObjectId].updated=!0;this.recalcRequest()},"update"),init:function(){this.recalc=this.recalc.bind(this);this.indexUpdated=!1;this.indexesBind_={};this.memberSourceMap={};var b=this.indexes;this.indexes={};this.indexes_={};this.indexValues={};var e=
this.calcs;this.calcs={};this.keyMap&&!1!=this.keyMap instanceof L||(this.keyMap=new L(a.object.complete({create:function(a,e){return new this.itemClass(e)}},this.keyMap)));x.prototype.init.call(this);a.object.iterate(b,this.addIndex,this);a.object.iterate(e,this.addCalc,this)},addIndex:function(a,e){if(!this.indexes[a]){if(e instanceof n){if(this.indexes_[a])return;this.indexes_[a]=e;e=this.source?v(this.source,e):null}if(e instanceof b){this.indexValues[a]=e.value;this.indexes[a]=e;this.indexesBind_[a]=
{key:a,indexMap:this};var g=this.listen.index;g&&(e.addHandler(g,this.indexesBind_[a]),g.change&&g.change.call(this.indexesBind_[a],e,e.value))}}},removeIndex:function(a){if(this.indexes_[a]||this.indexes[a])this.indexes[a]&&this.listen.index&&this.indexes[a].removeHandler(this.listen.index,this.indexesBind_[a]),delete this.indexValues[a],delete this.indexesBind_[a],delete this.indexes[a],delete this.indexes_[a]},addCalc:function(a,e){if(e instanceof u){this.calcs[a]=e.calc;for(var b in e.indexes)this.addIndex(b,
e.indexes[b])}else this.calcs[a]=e;this.recalcRequest()},removeCalc:function(a){var e=this.calcs[a];if(e&&e.preset instanceof u){var e=e.preset.indexes,b;for(b in e)this.removeIndex(b,e[b])}delete this.calcs[a]},lock:function(){for(var a in this.indexes)this.indexes[a].lock()},unlock:function(){for(var a in this.indexes)this.indexes[a].unlock()},recalcRequest:function(){this.timer_||(this.timer_=a.setImmediate(this.recalc))},recalc:function(){for(var b in this.items_)this.calcMember(this.items_[b]);
this.indexUpdated=!1;this.timer_=a.clearImmediate(this.timer_)},calcMember:function(a){var e=this.sourceMap_[this.memberSourceMap[a.basisObjectId]];if(a.subscriberCount&&(e.updated||this.indexUpdated)){e.updated=!1;var b={},u,t,f,y;for(y in this.calcs)u=this.calcs[y](e.sourceObject.data,this.indexValues,e.sourceObject),t=a.data[y],a.data[y]===u||"number"==typeof u&&"number"==typeof t&&isNaN(u)&&isNaN(t)||(b[y]=u,f=!0);f&&a.update(b)}},getMember:function(a){return this.keyMap.get(a,!0)},destroy:function(){this.timer_=
clearTimeout(this.timer_);this.indexesBind_=this.memberSourceMap=this.indexUpdated=this.calcs=null;this.keyMap.destroy();this.keyMap=null;for(var a in this.indexes)this.removeIndex(a);x.prototype.destroy.call(this)}});F.exports={IndexConstructor:n,createIndexConstructor:r,getDatasetIndex:v,removeDatasetIndex:d,Index:b,Count:p,Sum:c,Avg:w,VectorIndex:z,Min:M,Max:I,count:k,sum:q,avg:G,max:m,min:f,CalcIndexPreset:u,percentOfRange:function(b,e){var g="min_"+A(),t="max_"+A(),C={};b=a.getter(b);C[g]=f(b,
e);C[t]=m(b,e);var d=function(a,e,u){return(b(u)-e[g])/(e[t]-e[g])};return d.preset=new u({indexes:C,calc:d})},percentOfMax:function(b,e){var g="max_"+A(),t={};b=a.getter(b);t[g]=m(b,e);var f=function(a,e,u){return b(u)/e[g]};return f.preset=new u({indexes:t,calc:f})},percentOfSum:function(b,e){var g="sum_"+A(),t={};b=a.getter(b);t[g]=q(b,e);var f=function(a,e,u){return b(u)/e[g]};return f.preset=new u({indexes:t,calc:f})},IndexMap:D}},"i.js":function(c,F,a,p,w,z,M){function h(a){var b=S(a);return function(){b.apply(Q,
arguments);this.service&&b.apply(this.service,arguments);b.apply(this,arguments)}}function n(a){var b=S(a);return function(){var t=[this].concat(B(arguments));b.apply(Q,t);this.transport&&this.transport["emit_"+a].apply(this.transport,t);b.apply(this,arguments)}}function s(a){return String(a).replace(m,function(a){a=a.charCodeAt(0).toString(16).toUpperCase();return"%"+(2>a.length?"0":"")+a})}function v(b,t){var C={};f.test(t.method)?("multipart/form-data"!=t.contentType&&(C["Content-Type"]=t.contentType+
(t.encoding?";charset="+t.encoding:"")),A.test("gecko")&&(C.Connection="close")):A.test("ie")&&(C["If-Modified-Since"]="Thu, 01 Jan 1970 00:00:00 GMT");a.object.iterate(D(C,t.headers),function(a,b){null!=b&&"function"!=typeof b&&this.setRequestHeader(a,b)},b)}function d(b){var t=this.xhr;t&&("number"!=typeof b&&(b=t.readyState),b!=this.prevReadyState_&&(this.prevReadyState_=b,this.emit_readyStateChanged(b),b==G?(this.clearTimeout(),t.onreadystatechange=a.fn.$undef,"unknown"==typeof t.responseText||
!t.responseText&&!t.getAllResponseHeaders()?(this.emit_abort(),b=this.stateOnAbort):(this.processResponse(),this.isSuccessful()?(this.emit_success(this.getResponseData()),b=O.READY):(this.processErrorResponse(),this.emit_failure(this.data.error),b=O.ERROR)),this.emit_complete(this)):b=O.PROCESSING,this.setState(b,this.data.error)))}a.require("d.js");a.require("4.js");a.require("5.js");c=this.path;var A=a.ua,D=a.object.extend,B=a.array.from,L=a.object.slice,H=a.object.merge,S=a.event.create,O=a.data.STATE,
x=a.data.Object,b=a.event.Emitter,I=[],Q=new b({abort:function(){for(var a=B(I),b=0;b<a.length;b++)a[b].abort();return a},handler:{start:function(b){a.array.add(I,b.transport)},complete:function(b){a.array.remove(I,b.transport)}}}),R=x.subclass({className:c+".AbstractRequest",influence:null,initData:null,requestData:null,transport:null,stateOnAbort:O.UNDEFINED,emit_start:n("start"),emit_timeout:n("timeout"),emit_abort:n("abort"),emit_success:n("success"),emit_failure:n("failure"),emit_complete:n("complete"),
emit_stateChanged:function(a){x.prototype.emit_stateChanged.call(this,a);if(this.influence)for(a=0;a<this.influence.length;a++)this.influence[a].setState(this.state,this.state.data)},init:function(){x.prototype.init.call(this);this.influence=[]},setInfluence:function(a){this.influence=B(a)},clearInfluence:function(){this.influence=null},doRequest:a.fn.$undef,getResponseData:a.fn.$undef,destroy:function(){x.prototype.destroy.call(this);this.requestData=this.initData=null;this.clearInfluence()}}),r=
b.subclass({className:c+".AbstractTransport",requestClass:R,requests:null,poolLimit:null,poolHashGetter:a.fn.$true,emit_start:h("start"),emit_timeout:h("timeout"),emit_abort:h("abort"),emit_success:h("success"),emit_failure:h("failure"),emit_complete:h("complete"),init:function(){this.requests={};this.requestQueue=[];this.inprogressRequests=[];b.prototype.init.call(this);this.addHandler(k,this);this.poolLimit&&this.addHandler(q,this)},getRequestByHash:function(a){var b=this.requests[a];if(!b){for(var t in this.requests)if(this.requests[t].isIdle()&&
-1!=!this.requestQueue.indexOf(this.requests[t])){b=this.requests[t];delete this.requests[t];break}b||(b=new this.requestClass({transport:this}));this.requests[a]=b}return b},prepare:a.fn.$true,prepareRequestData:a.fn.$self,request:function(a){if(this.prepare()){a=L(a);var b=this.poolHashGetter(this.prepareRequestData(a)),b=this.getRequestByHash(b,!0);b.initData&&b.abort();b.initData=a;b.requestData=a;b.setInfluence(a.influence||this.influence);this.poolLimit&&this.inprogressRequests.length>=this.poolLimit?
(this.requestQueue.push(b),b.setState(O.PROCESSING)):b.doRequest();return b}},abort:function(){for(var a=0,b;b=this.inprogressRequests[a];a++)b.abort();for(a=0;b=this.requestQueue[a];a++)b.setState(O.ERROR);this.inprogressRequests=[];this.requestQueue=[]},stop:function(){this.stopped||(this.stoppedRequests=this.inprogressRequests.concat(this.requestQueue),this.abort(),this.stopped=!0)},resume:function(){if(this.stoppedRequests){for(var a=0,b;b=this.stoppedRequests[a];a++)b.transport.request(b.initData);
this.stoppedRequests=null}this.stopped=!1},destroy:function(){for(var a in this.requests)this.requests[a].destroy();this.requests={};this.stoppedRequests=this.requestQueue=this.inprogressRequests=null;b.prototype.destroy.call(this)}}),k={start:function(b,t){a.array.add(this.inprogressRequests,t)},complete:function(b,t){a.array.remove(this.inprogressRequests,t)}},q={complete:function(){var b=this.requestQueue.shift();b&&a.nextTick(function(){b.doRequest()})}},G=4,f=/^(POST|PUT|PATCH|LINK|UNLINK)$/i,
m=/[\%\=\&\<\>\s\+]/g,W="native",t=function(){if("XMLHttpRequest"in p)return function(){return new XMLHttpRequest};var a=p.ActiveXObject;if(a)for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],t=0;W=b[t];t++)try{if(new a(W))return function(){return new a(W)}}catch(e){}throw 35;}();w=R.subclass({className:c+".AjaxRequest",requestStartTime:0,timeout:3E4,timer_:null,debug:!1,emit_readyStateChanged:n("readyStateChanged"),init:function(){R.prototype.init.call(this);
this.xhr=t()},isIdle:function(){return this.xhr.readyState==G||0==this.xhr.readyState},isSuccessful:function(){try{var a=this.xhr.status;return void 0==a||0==a||200<=a&&300>a}catch(b){}return!1},processResponse:function(){this.update({contentType:this.xhr.getResponseHeader("content-type"),responseText:this.xhr.responseText,responseXML:this.xhr.responseXML,status:this.xhr.status})},getResponseData:function(){if(/^application\/json/i.test(this.data.contentType))try{return a.json.parse(String(this.data.responseText))}catch(b){}else return this.data.responseText},
processErrorResponse:function(){this.update({error:{code:"SERVER_ERROR",msg:this.xhr.responseText}})},prepare:a.fn.$true,prepareRequestData:function(a){var b=[],t=a.url;a=L(a);for(var e in a.params){var g=a.params[e];null!=g&&null!=g.toString()&&b.push(s(e)+"="+s(g.toString()))}b=b.join("&");!a.postBody&&f.test(a.method)&&(a.postBody=b||"",b="");a.routerParams&&(t=t.replace(/:([a-z\_\-][a-z0-9\_\-]+)/gi,function(e,b){if(b in a.routerParams)return a.routerParams[b]}));b&&(t+=(-1==t.indexOf("?")?"?":
"&")+b);a.requestUrl=t;return a},doRequest:function(){this.send(this.prepareRequestData(this.requestData))},send:function(a){this.update({responseText:"",responseXML:"",status:"",error:""});A.test("gecko1.8.1-")&&a.asynchronous&&(this.xhr=t());this.emit_start();var b=this.xhr;this.prevReadyState_=-1;b.onreadystatechange=d.bind(this);a.asynchronous||d.call(this,0);b.open(a.method,a.requestUrl,a.asynchronous);v(b,a);this.setTimeout(this.timeout);var C=a.postBody;if(f.test(a.method)&&A.test("ie9-"))if("object"==
typeof C&&"undefined"!=typeof C.documentElement&&"string"==typeof C.xml)C=C.xml;else if("string"==typeof C)C=C.replace(/\r/g,"");else if(null==C||""==C)C="[No data]";b.send(C);return!0},repeat:function(){this.requestData&&(this.abort(),this.doRequest())},abort:function(){this.isIdle()||(this.clearTimeout(),this.xhr.abort(),this.xhr.readyState!=G&&0!=this.xhr.readyState&&d.call(this,G))},setTimeout:function(a){this.xhr.asynchronous&&("ontimeout"in this.xhr?(this.xhr.timeout=a,this.xhr.ontimeout=this.timeoutAbort.bind(this)):
this.timer_=setTimeout(this.timeoutAbort.bind(this),a))},clearTimeout:function(){this.timer_&&(this.timer_=clearTimeout(this.timer_))},timeoutAbort:function(){this.update({error:{code:"TIMEOUT_ERROR",message:"Timeout error"}});this.emit_timeout(this);this.abort()},destroy:function(){this.abort();this.xhr=null;R.prototype.destroy.call(this)}});var C=r.subclass({className:c+".AjaxTransport",requestClass:w,emit_readyStateChanged:h("readyStateChanged"),asynchronous:!0,method:"GET",contentType:"application/x-www-form-urlencoded",
encoding:null,requestHeaders:a.Class.extensibleProperty(),init:function(){r.prototype.init.call(this);this.params=L(this.params)},setParam:function(a,b){this.params[a]=b},setParams:function(a){this.clearParams();for(var b in a)this.setParam(b,a[b])},removeParam:function(a){delete this.params[a]},clearParams:function(){for(var a in this.params)delete this.params[a]},prepareRequestData:function(a){var b=a.url||this.url;if(!b)throw 36;D(a,{requestUrl:b,url:b,method:a.method||this.method,contentType:a.contentType||
this.contentType,encoding:a.encoding||this.encoding,asynchronous:this.asynchronous,headers:H(this.requestHeaders,a.headers),postBody:a.postBody||this.postBody,params:H(this.params,a.params),routerParams:a.routerParams,influence:a.influence});return a}});F.exports={createEvent:h,transportDispatcher:Q,AbstractRequest:R,AbstractTransport:r,AjaxTransport:C,AjaxRequest:w,Transport:C,request:function(b,t,f){"string"==typeof b&&(b={url:b,asynchronous:!(!t&&!f)});var e=new C(b);e.addHandler({success:t&&function(a,
b,e){t(e)},failure:f&&function(a,b,e){f(e)},complete:function(){a.nextTick(function(){e.destroy()})}});b=e.request();if(!b.requestData.asynchronous)return b.getResponseData()}}},"h.js":function(c,F,a,p,w,z,M){function h(a,b){var f={},d;a&&a.length&&(d=f.inserted=a);b&&b.length&&(d=f.deleted=b);if(d)return f}function n(b,f){return function $(f){if(!f)return null;if(f.__extend__)return f;"string"==typeof f||Array.isArray(f)||(f="object"==typeof f?a.object.keys(f):null);return A(a.event.createHandler(f,
b),{__extend__:$})}(f)}function s(a,b,f,d){return new Q(A({keyGetter:b,itemClass:f,create:function(a,b){var g=Q.prototype.create.call(this,a,b);g.setDataset(new d);return g}},a))}function v(a,b){if(!a.length)return 0;var f,d=b.object.basisObjectId,c=b.value,e,g,T=0,k=a.length-1;do if(f=T+k>>1,g=a[f],e=g.value,e===c)if(g=g.object.basisObjectId,d<g)k=f-1;else if(d>g)T=f+1;else return d==g?f:0;else if(c<e)k=f-1;else if(c>e)T=f+1;else return c==e?f:0;while(T<=k);return f+(e<c)}function d(a,b){return+(a.value>
b.value)||-(a.value<b.value)||a.object.basisObjectId-b.object.basisObjectId}a.require("4.js");a.require("5.js");z=this.path;M=a.Class;var A=a.object.extend,D=a.object.values,B=a.getter,L=a.fn.$self,H=a.fn.$true,S=a.fn.$false,O=a.array.from,x=a.event.create,b=a.data.SUBSCRIPTION,I=a.data.Object,Q=a.data.KeyObjectMap,R=a.data.AbstractDataset,r=a.data.Dataset,k=a.data.DatasetWrapper;b.add("SOURCE",{sourceChanged:function(a,f){f&&b.unlink("source",a,f);a.source&&b.link("source",a,a.source)},sourcesChanged:function(a,
f){var d;if(d=f.inserted)for(var c=0;d[c];c++)b.link("source",a,d[c]);if(d=f.deleted)for(c=0;d[c];c++)b.unlink("source",a,d[c])}},function(a,b){for(var f=b.sources||(b.source?[b.source]:[]),d=0,c;c=f[d++];)a("source",b,c)});b.addProperty("minuend");b.addProperty("subtrahend");var q=M(R,{className:z+".Merge",subscribeTo:b.SOURCE,emit_sourcesChanged:x("sourcesChanged","delta"),sources:null,rule:function(a,b){return 0<a},listen:{source:{itemsChanged:function(a,b){var f=this.members_,d={},c,e;if(b.inserted)for(var g=
0;c=b.inserted[g];g++)e=c.basisObjectId,f[e]?f[e].count++:f[e]={count:1,object:c},d[e]=f[e];if(b.deleted)for(g=0;c=b.deleted[g];g++)e=c.basisObjectId,d[e]=f[e],f[e].count--;this.applyRule(d)},destroy:function(a){this.removeSource(a)}}},init:function(){R.prototype.init.call(this);var a=this.sources;this.sources=[];a&&a.forEach(this.addSource,this)},setRule:function(a){"function"!=typeof a&&(a=q.UNION);this.rule!==a&&(this.rule=a,this.applyRule())},applyRule:function(a){var b=this.members_,f=this.rule,
d=this.sources.length,c=[],e=[],g,T;a||(a=b);for(var k in a)a=b[k],g=d&&a.count&&f(a.count,d),g!=!!this.items_[k]&&(g?c:e).push(a.object),0==a.count&&delete b[k];(T=h(c,e))&&this.emit_itemsChanged(T);return T},addSource:function(b){if(b instanceof R&&a.array.add(this.sources,b)){this.listen.source&&b.addHandler(this.listen.source,this);var f=this.members_,d;for(d in b.items_)f[d]?f[d].count++:f[d]={count:1,object:b.items_[d]};this.applyRule();this.emit_sourcesChanged({inserted:[b]});return!0}},removeSource:function(b){if(a.array.remove(this.sources,
b)){this.listen.source&&b.removeHandler(this.listen.source,this);var f=this.members_,d;for(d in b.items_)f[d].count--;this.applyRule();this.emit_sourcesChanged({deleted:[b]});return!0}},setSources:function(b){for(var f=O(this.sources),d=0,c;c=b[d];d++)c instanceof R&&(a.array.remove(f,c)||this.addSource(c));f.forEach(this.removeSource,this)},clear:function(){O(this.sources).forEach(this.removeSource,this)},destroy:function(){R.prototype.destroy.call(this);this.sources=null}});q.UNION=q.prototype.rule;
q.INTERSECTION=function(a,b){return a==b};q.DIFFERENCE=function(a,b){return 1==a};q.MORE_THAN_ONE_INCLUDE=function(a,b){return 1==b||1<a};q.AT_LEAST_ONE_EXCLUDE=function(a,b){return 1==b||a<b};var G=function(a){return!this.has(a)};c=M(R,{className:z+".Subtract",subscribeTo:b.MINUEND+b.SUBTRAHEND,minuend:null,emit_minuendChanged:x("minuendChanged","oldMinuend"),subtrahend:null,emit_subtrahendChanged:x("subtrahendChanged","oldSubtrahend"),listen:{minuend:{itemsChanged:function(a,b){if(this.subtrahend){var f=
h(b.inserted&&b.inserted.filter(G,this.subtrahend),b.deleted&&b.deleted.filter(this.has,this));f&&this.emit_itemsChanged(f)}},destroy:function(){this.setOperands(null,this.subtrahend)}},subtrahend:{itemsChanged:function(a,b){if(this.minuend){var f=h(b.deleted&&b.deleted.filter(G,this),b.inserted&&b.inserted.filter(this.has,this));f&&this.emit_itemsChanged(f)}},destroy:function(){this.setOperands(this.minuend,null)}}},init:function(){R.prototype.init.call(this);var a=this.minuend,b=this.subtrahend;
this.subtrahend=this.minuend=null;(a||b)&&this.setOperands(a,b)},setOperands:function(a,b){var f,d=!1;!1==a instanceof R&&(a=null);!1==b instanceof R&&(b=null);var c=this.minuend,e=this.subtrahend;if(c!==a){d=!0;this.minuend=a;var g=this.listen.minuend;g&&(c&&c.removeHandler(g,this),a&&a.addHandler(g,this));this.emit_minuendChanged(c)}if(e!==b){d=!0;this.subtrahend=b;if(g=this.listen.subtrahend)e&&e.removeHandler(g,this),b&&b.addHandler(g,this);this.emit_subtrahendChanged(e)}if(!d)return!1;if(a&&
b){var d=[],c=[],k;for(k in this.items_)a.items_[k]&&!b.items_[k]||d.push(this.items_[k]);for(k in a.items_)this.items_[k]||b.items_[k]||c.push(a.items_[k]);(f=h(c,d))&&this.emit_itemsChanged(f)}else this.itemCount&&this.emit_itemsChanged(f={deleted:this.getItems()});return f},setMinuend:function(a){return this.setOperands(a,this.subtrahend)},setSubtrahend:function(a){return this.setOperands(this.minuend,a)},clear:function(){this.setOperands()}});var f={datasetChanged:function(a){this.setSource(a)},
destroy:function(){this.setSource()}},m=M(R,{className:z+".SourceDataset",subscribeTo:b.SOURCE,source:null,sourceMap_:null,emit_sourceChanged:x("sourceChanged","oldSource"),sourceWrapper_:null,listen:{source:{destroy:function(){this.setSource()}}},init:function(){this.sourceMap_={};var a=this.source;a&&(this.source=null);R.prototype.init.call(this);a&&this.setSource(a)},setSource:function(a){var b=null,d=this.sourceWrapper_;a instanceof k&&(b=a,a=b.dataset);d!==b&&(d&&d.removeHandler(f,this),b&&b.addHandler(f,
this),this.sourceWrapper_=b);!1==a instanceof R&&(a=null);if(this.source!==a){b=this.source;d=this.listen.source;this.source=a;if(d){var c=d.itemsChanged;b&&(b.removeHandler(d,this),c&&c.call(this,b,{deleted:b.getItems()}));a&&(a.addHandler(d,this),c&&c.call(this,a,{inserted:a.getItems()}))}this.emit_sourceChanged(b)}},clear:function(){this.setSource()},destroy:function(){R.prototype.destroy.call(this);this.sourceMap_=null}}),W=M(m,{className:z+".MapFilter",map:L,filter:S,rule:B(H),ruleEvents:n(function(a){var b=
this.map?this.map(a):object;if(!1==b instanceof I||this.filter(b))b=null;var f=this.sourceMap_[a.basisObjectId],d=f.member;if(d!==b){var c=this.members_,e,g,k;f.member=b;d&&(f=d.basisObjectId,this.removeMemberRef&&this.removeMemberRef(d,a),0==--c[f]&&(delete c[f],k=[d]));b&&(d=b.basisObjectId,this.addMemberRef&&this.addMemberRef(b,a),c[d]?c[d]++:(c[d]=1,g=[b]));(e=h(g,k))&&this.emit_itemsChanged(e)}},"update"),addMemberRef:null,removeMemberRef:null,listen:{source:{itemsChanged:function(a,b){var f=
this.sourceMap_,d=this.members_,c=[],e=[],g,k,m,q=this.ruleEvents;r.setAccumulateState(!0);if(b.inserted)for(var y=0;g=b.inserted[y];y++){m=this.map?this.map(g):g;if(!1==m instanceof I||this.filter(m))m=null;q&&g.addHandler(q,this);f[g.basisObjectId]={sourceObject:g,member:m};m&&(k=m.basisObjectId,d[k]?d[k]++:(d[k]=1,c.push(m)),this.addMemberRef&&this.addMemberRef(m,g))}if(b.deleted)for(y=0;g=b.deleted[y];y++)k=g.basisObjectId,m=f[k].member,q&&g.removeHandler(q,this),delete f[k],m&&(k=m.basisObjectId,
0==--d[k]&&(delete d[k],e.push(m)),this.removeMemberRef&&this.removeMemberRef(m,g));r.setAccumulateState(!1);(b=h(c,e))&&this.emit_itemsChanged(b)}}},setMap:function(a){"function"!=typeof a&&(a=L);if(this.map!==a)return this.map=a,this.applyRule()},setFilter:function(a){"function"!=typeof a&&(a=S);if(this.filter!==a)return this.filter=a,this.applyRule()},setRule:function(a){"function"!=typeof a&&(a=H);if(this.rule!==a)return this.rule=a,this.applyRule()},applyRule:function(){var a=this.sourceMap_,
b=this.members_,f,d,c,e,g,k=[],m=[],q,y;for(y in a){g=a[y];e=g.sourceObject;f=g.member;d=this.map?this.map(e):e;if(!1==d instanceof I||this.filter(d))d=null;f!=d&&(g.member=d,f&&(c=f.basisObjectId,this.removeMemberRef&&this.removeMemberRef(f,e),b[c]--),d&&(f=d.basisObjectId,this.addMemberRef&&this.addMemberRef(d,e),f in b?b[f]++:(b[f]=1,k.push(d))))}for(c in this.items_)0==b[c]&&(delete b[c],m.push(this.items_[c]));(q=h(k,m))&&this.emit_itemsChanged(q);return q}});p=M(W,{className:z+".Subset",filter:function(a){return!this.rule(a)}});
w=M(W,{className:z+".Split",subsetClass:R,subsetWrapperClass:k,keyMap:null,map:function(a){return this.keyMap.resolve(a)},setRule:function(a){"function"!=typeof a&&(a=H);if(this.rule!==a)return this.rule=a,this.keyMap.keyGetter=a,this.applyRule()},addMemberRef:function(a,b){a.dataset.emit_itemsChanged({inserted:[b]})},removeMemberRef:function(a,b){a.dataset.emit_itemsChanged({deleted:[b]})},init:function(){this.keyMap&&!1!=this.keyMap instanceof Q||(this.keyMap=s(this.keyMap,this.rule,this.subsetWrapperClass,
this.subsetClass));W.prototype.init.call(this)},getSubset:function(a,b){return this.keyMap.get(a,b)},destroy:function(){W.prototype.destroy.call(this);this.keyMap.destroy();this.keyMap=null}});x=M(m,{className:z+".Slice",rule:B(H),ruleEvents:n(function(a){var b=this.sourceMap_[a.basisObjectId];a=this.rule(a);var f=this.index_;a!==b.value&&(f.splice(v(f,b),1),b.value=a,f.splice(v(f,b),0,b),this.applyRule())},"update"),index_:null,orderDesc:!1,offset:0,limit:10,listen:{source:{itemsChanged:function(a,
b){var f=this.sourceMap_,c=this.index_,k=this.ruleEvents,e=!1,g=!1,m,q=b.inserted,I=b.deleted;if(I){I.length>c.length-I.length&&(e=!0,g=I.length!=c.length,c.length=0);for(var y=0,E;E=I[y];y++)e||(m=f[E.basisObjectId],c.splice(v(c,m),1)),delete f[E.basisObjectId],k&&E.removeHandler(k,this);if(g)for(var Y in f)m=f[Y],c.splice(v(c,m),0,m)}if(q){g=!c.length;for(y=0;E=q[y];y++)m={object:E,value:this.rule(E)},f[E.basisObjectId]=m,g?c.push(m):c.splice(v(c,m),0,m),k&&E.addHandler(k,this);g&&c.sort(d)}this.applyRule()}}},
emit_rangeChanged:x("rangeChanged","oldOffset","oldLimit"),init:function(){this.index_=[];m.prototype.init.call(this)},setRange:function(a,b){var f=this.offset,d=this.limit,c=!1;if(f!=a||d!=b)this.offset=a,this.limit=b,c=this.applyRule(),this.emit_rangeChanged(f,d);return c},setOffset:function(a){return this.setRange(a,this.limit)},setLimit:function(a){return this.setRange(this.offset,a)},applyRule:function(){var b=this.offset,f=b+this.limit;this.orderDesc&&(b=this.index_.length-f,f=b+this.limit);
for(var d=a.object.slice(this.members_),b=this.index_.slice(Math.max(0,b),Math.max(0,f)),f=[],c,k=0,e;e=b[k];k++){var g=e.object.basisObjectId;d[g]?delete d[g]:(f.push(e.object),this.members_[g]=e.object)}for(g in d)delete this.members_[g];(c=h(f,D(d)))&&this.emit_itemsChanged(c);return c},destroy:function(){m.prototype.destroy.call(this);this.index_=null}});z=M(m,{className:z+".Cloud",subsetClass:R,subsetWrapperClass:k,rule:B(S),ruleEvents:n(function(a){var b=this.sourceMap_,f=this.members_,d=a.basisObjectId,
c=b[d].list,b=b[d].list={},d=this.rule(a),e,g=[],k=[],m;if(Array.isArray(d))for(var I=0;I<d.length;I++)(m=this.keyMap.get(d[I],!0))&&!m.has(a)&&(y=m.basisObjectId,b[y]=m,c[y]||(m.dataset.emit_itemsChanged({inserted:[a]}),f[y]?f[y]++:(g.push(m),f[y]=1)));for(var y in c)b[y]||(m=c[y],m.dataset.emit_itemsChanged({deleted:[a]}),--f[y]||(delete f[y],k.push(m)));(e=h(g,k))&&this.emit_itemsChanged(e)},"update"),keyMap:null,map:L,listen:{source:{itemsChanged:function(a,b){var f=this.sourceMap_,d=this.members_,
c=this.ruleEvents,e,g,k,m=[],I=[];r.setAccumulateState(!0);if(e=b.inserted)for(var y=0,E;E=e[y];y++){var Y=this.rule(E),q={object:E,list:{}};f[E.basisObjectId]=q;if(Array.isArray(Y))for(var x=0,l={};x<Y.length;x++)(g=this.keyMap.get(Y[x],!0))&&!l[g.basisObjectId]&&(k=g.basisObjectId,l[k]=!0,q.list[k]=g,g.dataset.emit_itemsChanged({inserted:[E]}),d[k]?d[k]++:(m.push(g),d[k]=1));c&&E.addHandler(c,this)}if(e=b.deleted)for(y=0;E=e[y];y++){g=E.basisObjectId;Y=f[g].list;delete f[g];for(k in Y)g=Y[k],g.dataset.emit_itemsChanged({deleted:[E]}),
--d[k]||(delete d[k],I.push(g));c&&E.removeHandler(c,this)}r.setAccumulateState(!1);(b=h(m,I))&&this.emit_itemsChanged(b)}}},init:function(){this.keyMap&&!1!=this.keyMap instanceof Q||(this.keyMap=s(this.keyMap,this.rule,this.subsetWrapperClass,this.subsetClass));m.prototype.init.call(this)},getSubset:function(a,b){return this.keyMap.get(a,b)},destroy:function(){m.prototype.destroy.call(this);this.keyMap.destroy();this.keyMap=null}});F.exports={createRuleEvents:n,Merge:q,Subtract:c,SourceDataset:m,
MapFilter:W,Subset:p,Split:w,Slice:x,Cloud:z}},"g.js":function(c,F,a,p,w,z,M){function h(a){ba[a]=ba[a]||0;return a+ba[a]++}function n(a,b){var l=g[a];if(l){for(var f=0,d;d=l[f];f++)d[0][d[1]]=b;delete g[a]}e[a]=b}function s(a,b,l){if(e[a])return e[a];var f=g[a];f||(f=g[a]=[]);f.push([b,l]);return T}function v(){var a=I(arguments),b=a.pop(),e=a[0],l=a[1],f=a[2],g;if("function"!=typeof b)throw 34;switch(a.length){case 0:g=function(){return b()};break;case 1:g=function(a,P,l){return e in a?b(P[e]):
l};break;case 2:g=function(a,P,f){return e in a||l in a?b(P[e],P[l]):f};break;case 3:g=function(a,P,g){return e in a||l in a||f in a?b(P[e],P[l],P[f]):g};break;default:g=function(e,l,K){for(var f=!1,g=[],d=0,c;c=a[d];d++)f=f||c in e,g.push(l[c]);return f?b.apply(null,g):K}}g.args=a;return g.calc=g}function d(){return v.apply(null,I(arguments).concat(function(){for(var a=[],b=arguments.length;0<b--;){if(null==arguments[b])return null;a.push(arguments[b])}return a.join("-")}))}function A(a,b){if(!Array.isArray(a))return null;
if(!Array.isArray(b)||a.length!=b.length)return a||null;for(var e=0;e<a.length;e++)if(a[e]!==b[e])return a;return b}function D(P,e,l){if(!P.all.itemCount){P.aliases[e]=e;l="string"==typeof l||Array.isArray(l)||"function"==typeof l&&l.calc!==l?{type:l}:a.object.slice(l);if("type"in l){"string"==typeof l.type&&(l.type=s(l.type,P.fields,e));if(Array.isArray(l.type)){var f=l.type.slice();l.type=function(a,b){return-1!=f.indexOf(a)?a:b};l.defValue=-1!=f.indexOf(l.defValue)?l.defValue:f[0]}l.type===Array&&
(l.type=A);"function"!=typeof l.type&&(l.type=b)}var g=l.type||b;-1!=[t,C,u,$].indexOf(g)&&(l.id=!0);l.id&&(P.index||(P.index=new ca(String)),P.idFields[e]=!0,P.idField||P.compositeKey?(P.idField=null,P.compositeKey=d.apply(null,O(P.idFields))):P.idField=e);l.calc?L(P,e,l.calc):P.fields[e]=g;P.defaults[e]="defValue"in l?l.defValue:g();P.entityClass.prototype["get_"+e]=function(a){return a&&this.modified&&e in this.modified?this.modified[e]:this.data[e]};P.entityClass.prototype["set_"+e]=function(a,
b){return this.set(e,a,b)};U[e]||(U[e]={destroy:function(){this.set(e,null)}})}}function B(a,b,e){e in a.fields&&!1==b in a.aliases&&(a.aliases[b]=e)}function L(a,b,e){if(!b||!a.fields[b]){a.calcs||(a.calcs=[]);var l={args:e.args||[],wrapper:e},f=a.calcs.length,g=0;if(e.args)for(var d=0;d<a.calcs.length;d++)-1!=e.args.indexOf(a.calcs[d].key)&&(g=d+1);if(b){l.key=b;for(d=0;d<a.calcs.length;d++)if(-1!=a.calcs[d].args.indexOf(b)){f=d;break}if(g>f)return;a.idField&&b==a.idField&&(a.compositeKey=e);a.fields[b]=
function(a,b){return b}}else f=g;a.calcs.splice(Math.min(f,g),0,l)}}a.require("4.js");a.require("5.js");a.require("h.js");var H=this.path,S=a.Class,O=a.object.keys,x=a.object.extend,b=a.fn.$self,I=a.array.from,Q=a.event.Emitter;c=a.event.create;var R=a.data.Object,r=a.data.Slot,k=a.data.Dataset;z=a.data.dataset.Subset;var q=a.data.dataset.Split,G=a.data.STATE,f={},m={string:1,number:1},W=[],t=function(a){return isNaN(a)?null:Number(a)},C=function(a){return isNaN(a)?null:Number(a)},u=function(a){return isNaN(a)?
null:parseInt(a,10)},$=function(a){return null==a?null:String(a)},ba={},e={},g={},T=function(){},ca=a.Class(null,{className:H+".Index",items:null,fn:String,init:function(a){this.items={};"function"==typeof a&&(this.fn=a)},calcWrapper:function(a,b){var e=this.fn(a,b);if(e!==b&&this.items[e])throw 33;return e},get:function(a,b){var e=this.items[a];if(!b||e instanceof b)return e},add:function(a,b){var e=this.items[a];if(b&&(!e||e===b))return this.items[a]=b,!0},remove:function(a,b){if(this.items[a]===
b)return delete this.items[a],!0},destroy:function(){this.items=null}});M=function(a,b){return function(e){return a.prototype[b].call(this,e&&e.map(this.wrapper))}};p=function(a,b){return function(){this.name||(this.name=h(b));a.prototype.init.call(this)}};w=function(b){return function(b){var P=a.object.slice(this.items_),e=[];if(b){k.setAccumulateState(!0);for(var l=0;l<b.length;l++){var f=this.wrapper(b[l]);f&&(P[f.basisObjectId]=!1)}k.setAccumulateState(!1)}for(var g in this.items_)!1==g in P&&
e.push(this.items_[g]);for(g in P)P[g]&&P[g].destroy();return e.length?e:null}};var N=S(k,{className:H+".EntitySet",name:null,wrapper:b,init:p(k,"EntitySet"),sync:w(k),set:M(k,"set"),add:M(k,"add"),remove:M(k,"remove"),destroy:function(){k.prototype.destroy.call(this);this.wrapper=null}}),y=S(N,{className:H+".ReadOnlyEntitySet",set:a.fn.$false,add:a.fn.$false,remove:a.fn.$false,clear:a.fn.$false});z=S(z,{className:H+".EntityCollection",name:null,init:p(z,"EntityCollection"),sync:w(z)});p=S(q,{className:H+
".EntityGrouping",name:null,subsetClass:y,init:p(q,"EntityGrouping"),sync:w(q),getSubset:function(a,b){var e=q.prototype.getSubset.call(this,a,b);e&&e.dataset&&(e.dataset.wrapper=this.wrapper);return e}});var E=function(a,l){if(this instanceof E){a||(a=b);if(!l||e[l])l=h("UntitledEntitySetType");var f=new Y({entitySetClass:{wrapper:a}}),g=f.entitySetClass,d=function(a,b){return null!=a?(b instanceof N||(b=f.createEntitySet()),b.set(a instanceof k?a.getItems():I(a)),b):null};"string"==typeof a&&(g.prototype.wrapper=
s(a,g.prototype,"wrapper"));n(l,d);x(d,{type:f,typeName:l,toString:function(){return this.typeName+"()"},entitySetType:f,extend:function(){return g.extend.apply(g,arguments)},reader:function(a){if(Array.isArray(a)){var b=g.prototype.wrapper;return a.map(b.reader||b)}return a}});return d}},Y=S(null,{className:H+".EntitySetConstructor",entitySetClass:N,extendConstructor_:!0,createEntitySet:function(){return new this.entitySetClass}}),fa=function(a){if(this instanceof fa){var b;b=a.singleton?function(a){var b=
e.get();b?a&&b.update(a):b=new f(a||{});return b}:function(a,b){if(null!=a){if(a===b||a.entityType===e)return a;var P,l=e.idField;if(m[typeof a]){if(!l)return;P=a;a={};a[l]=P}else e.compositeKey?P=e.compositeKey(a,a):l&&(P=a[l]);null!=P&&(b=e.index.get(P,e.entityClass));b&&b.entityType===e?b.update(a):b=new f(a);return b}};var e=new l(a||{},b),f=e.entityClass;n(e.name,b);x(b,{all:e.all,type:e,typeName:e.name,entityType:e,toString:function(){return this.typeName+"()"},reader:function(a){return e.reader(a)},
addField:function(a,b){e.addField(a,b)},addCalcField:function(a,b){e.addCalcField(a,b)},get:function(a){return e.get(a)},getSlot:function(a,b){return e.getSlot(a,b)},extend:function(){return f.extend.apply(f,arguments)}});return b}},U={},l=S(null,{className:H+".EntityType",wrapper:null,all:null,fields:null,idFields:null,defaults:null,aliases:null,slots:null,singleton:!1,index:null,entityClass:null,init:function(b,l){this.name=b.name;if(!this.name||e[this.name])this.name=h("UntitledEntityType");this.fields=
{};this.idFields={};this.defaults={};this.aliases={};this.slots={};var f=b.index;f&&f instanceof ca&&(this.index=f);this.wrapper=l;this.all=new y(a.object.complete({wrapper:l},b.all));if(this.singleton=!!b.singleton){var g;this.get=function(){return g};this.all.addHandler({itemsChanged:function(a,b){g=b.inserted?b.inserted[0]:null}},this)}this.entityClass=aa(this,this.all,this.fields,this.defaults,this.slots);this.entityClass.extend({entityType:this,type:l,typeName:this.name,state:b.state||this.entityClass.prototype.state});
for(var d in b.fields)D(this,d,b.fields[d]);for(d in b.aliases)B(this,d,b.aliases[d]);b.constrains&&b.constrains.forEach(function(a){L(this,null,a)},this);W.push(this)},reader:function(a){var b={};if(m[typeof a])return this.idField?a:null;if(!a||null==a)return null;for(var e in a){var l=this.aliases[e];if(l){var f=this.fields[l].reader;b[l]=f?f(a[e]):a[e]}}return b},get:function(a){a=this.getId(a);if(null!=a)return this.index.get(a,this.entityClass)},getId:function(a){if((this.idField||this.compositeKey)&&
null!=a){if(m[typeof a])return a;if(a&&a.entityType===this)return a.__id__;a instanceof R&&(a=a.data);return this.compositeKey?this.compositeKey(a,a):a[this.idField]}},getSlot:function(a){var b=this.getId(a);if(null!=b){var e=this.slots[b];e||(m[typeof a]&&(e={},this.idField&&!this.compositeKey&&(e[this.idField]=a),a=e),e=this.slots[b]=new r({delegate:this.get(b),data:a}));return e}}}),V=S(R,{className:H+".BaseEntity",isTarget:!0,setDelegate:function(){},modified:null,emit_rollbackUpdate:c("rollbackUpdate")}),
aa=function(a,b,e,l,g){function d(b,e,l){var f=a.calcs,g=b.data,K=!1,J=b.__id__,E;try{if(f)for(var V=0,y;y=f[V];V++){var aa=y.key,k=g[aa],m=y.wrapper(e,g,k);aa&&m!==k&&(g[aa]=m,e[aa]=k,K=!0)}E=a.compositeKey?a.compositeKey(e,g,J):a.idField&&a.idField in e?g[a.idField]:J;E!==J&&a.index.calcWrapper(E,J)}catch(Y){K=!1;E=J;for(aa in e)b.data[aa]=e[aa];if(l&&!b.modified)for(aa in l){b.modified=l;break}}E!==J&&(b.__id__=E,c(b,J,E));return K}function c(b,e,l){var f=a.index;null!=e&&(f.remove(e,b),g[e]&&
g[e].setDelegate());null!=l&&(f.add(l,b),g[l]&&g[l].setDelegate(b))}return S(V,{className:H+".Entity",extendConstructor_:!1,init:function(a){this.delegate=null;this.data={};V.prototype.init.call(this);this.fieldHandlers_={};var P,f={},g;for(g in e)g in a?(f[g]=l[g],P=e[g](a[g])):"function"==typeof l[g]?(f[g]=void 0,P=l[g](a)):P=l[g],P&&P!==this&&P instanceof Q&&P.addHandler(U[g],this)&&(this.fieldHandlers_[g]=!0),this.data[g]=P;d(this,f);b.emit_itemsChanged({inserted:[this]})},toString:function(){return"[object "+
this.constructor.className+"("+this.entityType.name+")]"},getId:function(){return this.__id__},get:function(a,b){return b&&this.modified&&a in this.modified?this.modified[a]:this.data[a]},set:function(b,l,f,g){var J=e[b];if(!J)return!1;var E,c=this.modified;J===A&&c&&b in c&&(l=A(l,c[b]));l=J(l,this.data[b]);J=this.data[b];if(l===J||l&&J&&l.constructor===Date&&J.constructor===Date&&+l===+J)!f&&c&&b in c&&(E={rollback:{key:b,value:c[b]}},delete c[b],O(c).length||(this.modified=null));else a:{E={};
if(!a.idFields[b])if(f)c||(this.modified=c={}),!1===b in c?(E.rollback={key:b,value:void 0},c[b]=J):c[b]===l&&(E.rollback={key:b,value:l},delete c[b],O(c).length||(this.modified=null));else if(c&&b in c)if(c[b]!==l){E.rollback={key:b,value:c[b]};c[b]=l;break a}else return!1;this.data[b]=l;this.fieldHandlers_[b]&&(J.removeHandler(U[b],this),this.fieldHandlers_[b]=!1);l&&l!==this&&l instanceof Q&&l.addHandler(U[b],this)&&(this.fieldHandlers_[b]=!0);E.key=b;E.value=J;E.delta={};E.delta[b]=J}if(!g&&E){b=
E.key;f=E.delta||{};var V;E.rollback&&(V={},V[E.rollback.key]=E.rollback.value);d(this,f,V)&&(b=!0);b&&(this.emit_update(f),E.delta=f);V&&this.emit_rollbackUpdate(V)}return E||!1},update:function(a,b){if(a){var e,l={},P,f={},g,J;for(J in a)if(g=this.set(J,a[J],b,!0))g.key&&(e=!0,l[g.key]=g.value),g.rollback&&(P=!0,f[g.rollback.key]=g.rollback.value);d(this,l,f)&&(e=!0);e&&this.emit_update(l);P&&this.emit_rollbackUpdate(f)}return e?l:!1},reset:function(){this.update(l)},clear:function(){var a={},b;
for(b in this.data)a[b]=void 0;return this.update(a)},commit:function(a){if(this.modified){var b=this.modified;this.modified=null}this.update(a);b&&this.emit_rollbackUpdate(b)},rollback:function(){if(this.state!=G.PROCESSING){if(this.modified){var a=this.modified;this.modified=null;this.update(a);this.emit_rollbackUpdate(a)}this.setState(G.READY)}},destroy:function(){for(var a in this.fieldHandlers_)this.fieldHandlers_[a]&&this.data[a].removeHandler(U[a],this);this.fieldHandlers_=f;null!=this.__id__&&
c(this,this.__id__,null);R.prototype.destroy.call(this);b.emit_itemsChanged({deleted:[this]});this.data=f;this.modified=null}})};F.exports={isEntity:function(a){return a&&a instanceof V},createType:function(b,e){var l=b||{};"string"==typeof b?l={name:l,fields:e||{}}:e&&(l=a.object.merge(l,{fields:e}));return new fa(l)},createSetType:function(a,b){return 1<arguments.length?new E(b,a):new E(a)},validate:function(){for(var b in g)a.dev.warn(H+": type `"+b+"` is not defined, but used by "+g[b].length+
" type(s)")},getTypeByName:function(a){return e[a]},NumericId:t,NumberId:C,IntId:u,StringId:$,Index:ca,CalculateField:v,calc:v,EntityType:fa,Entity:aa,BaseEntity:V,EntitySetType:E,EntitySet:N,ReadOnlyEntitySet:y,Collection:z,Grouping:p}},"y.js":function(c,F,a,p,w,z,M){function h(a){return null==a?a:String(a)}a.require("g.js");a.require("i.js");a.require("j.js");a.require("h.js");a.require("2.js");a.require("l.js");var n=a.entity.createType("Event",{id:a.entity.IntId,startDate:{type:String,defValue:function(){return(new Date).add("day",
-7).toISOString()}},endDate:{type:String,defValue:function(){return(new Date).toISOString()}},title:h,description:h,main_entry:"Entry",status:String,progress:Number,providers:{type:Array,defValue:function(){return app.type.Provider.all.getItems().filter(function(a){return a.data.enabled}).map(function(a){return a.data.id})}},entries:a.entity.createSetType("Entry")}),s=n.entityType.reader;n.entityType.reader=function(d){d&&d.entries&&d.entries.forEach(function(c){c.data&&c.data.weather&&d.entries.push({id:-c.id,
created:c.data.created,source:"weather",type:"weather",data:a.object.complete({created:c.data.created},c.data.weather)})});return s.call(this,d)};var v;n.inited=new a.data.dataset.Subset({source:n.all,rule:function(a){return a.data.id},syncAction:app.service["default"].createAction({url:"/api/event",success:function(d){a.array(d.events).map(n.reader).map(n)}}),handler:{stateChanged:function(){this.state==a.data.STATE.READY||this.state==a.data.STATE.UNDEFINED?v||(v=setTimeout(function(){n.inited.deprecate()},
5E3)):v=clearTimeout(v)}}});new a.ui.Node({active:!0,dataSource:n.inited});n.extend({syncAction:app.service["default"].createAction({url:"/api/event/:id",request:function(){return{routerParams:{id:this.data.id}}},success:function(a){this.update(n.reader(a.event))}}),save:app.service["default"].createAction({method:"POST",request:function(){return this.data.id?{url:"/api/event/:id",routerParams:{id:this.data.id},params:a.object.slice(this.data,["title","description"])}:{url:"/api/event/create",params:{start_date:this.data.startDate,
end_date:this.data.endDate,providers:this.data.providers}}},success:function(d){this.data.id||a.net.request({timeout:6E4,method:"POST",url:"/api/event/"+d.event.id+"/start"});this.update(n.reader(d.event))}}),remove:app.service["default"].createAction({method:"POST",url:"/api/event/:id/remove",request:function(){return{routerParams:{id:this.data.id}}},success:function(a){a.ok&&this.destroy()}})});F.exports=n},"f.js":function(c,F,a,p,w,z,M){F.exports={Event:a.resource("y.js").fetch(),Entry:a.resource("z.js").fetch(),
Provider:a.resource("10.js").fetch()}},"e.js":function(c,F,a,p,w,z,M){function h(a){return 10>a?"0"+a:a}function n(a){return 100>a?"0"+h(a):a}function s(a){return!(a%400&&(!(a%100)||a%4))}function v(a,d){return 1==a?28+s(d):A[a]}function d(a,d,c){var x=function(d,c){switch(c){case "y":return String(a.getFullYear()).substr(2);case "Y":return a.getFullYear();case "d":return a.getDate();case "D":return h(a.getDate());case "m":return a.getMonth()+1;case "M":return h(a.getMonth()+1);case "h":return a.getHours();
case "H":return h(a.getHours());case "i":return h(a.getHours()%12||12);case "p":return 12<a.getHours()?"pm":"am";case "P":return 12<a.getHours()?"PM":"AM";case "I":return h(a.getMinutes());case "s":return a.getSeconds();case "S":return h(a.getSeconds());case "z":return a.getMilliseconds();case "Z":return n(a.getMilliseconds())}},r=function(d,c){switch(c){case "y":return String(a.getUTCFullYear()).substr(2);case "Y":return a.getUTCFullYear();case "d":return a.getUTCDate();case "D":return h(a.getUTCDate());
case "m":return a.getUTCMonth()+1;case "M":return h(a.getUTCMonth()+1);case "h":return a.getUTCHours();case "H":return h(a.getUTCHours());case "i":return h(a.getUTCHours()%12||12);case "p":return 12<a.getUTCHours()?"pm":"am";case "P":return 12<a.getUTCHours()?"PM":"AM";case "I":return h(a.getUTCMinutes());case "s":return a.getUTCSeconds();case "S":return h(a.getUTCSeconds());case "z":return a.getUTCMilliseconds();case "Z":return n(a.getUTCMilliseconds())}};return d.replace(H,c?r:x)}var A=[31,28,31,
30,31,30,31,31,30,31,30,31],D={day:864E5,hour:36E5,minute:6E4,second:1E3},B={},L={};a.object.iterate({year:"FullYear",month:"Month",day:"Date",hour:"Hours",minute:"Minutes",second:"Seconds",millisecond:"Milliseconds"},function(a,d){B[a]=function(a){return a["get"+d]()};L[a]=function(a,b){return a["set"+d](b)}});var H=/%([yYdDmMhHipPIsSzZ])/g,S=/\D/,O=/(.{10,})([\-\+]\d{1,2}):?(\d{1,2})?$/;a.object.extend(Date.prototype,{isLeapYear:function(){return s(this.getFullYear())},getMonthDayCount:function(){return v(this.getMonth(),
this.getFullYear())},add:function(a,d){var c=B[a];if(!c)throw 30;var x;if("year"==a||"month"==a)x=this.getDate(),28<x&&this.setDate(1);L[a](this,c(this)+d);28<x&&(c=this.getMonthDayCount(),this.setDate(Math.min(x,c)));return this},diff:function(a,d){if("year"==a||"month"==a){var c=0<Number(this)-Number(d)?-1:1,x=0<c?this:d,r=0<c?d:this,k=x.getFullYear(),k=r.getFullYear()-k;if("year"==a)return c*k;x=x.getMonth();r=r.getMonth();return c*(k?(1<k?12*(k-1):0)+(11-x)+(r+1):r-x)}c=Math.floor((d-this)/D[a]);
return c+Number(0!=B[a](new Date(d-c*D[a]))-B[a](this))},set:function(a,d){var c=L[a];if(!c)throw 31;var x;if("year"==a||"month"==a)x=this.getDate(),28<x&&this.setDate(1);c(this,d);28<x&&(c=this.getMonthDayCount(),this.setDate(Math.min(x,c)));return this},get:function(a){if(B[a])return B[a](this);throw 32;},toISODateString:function(){return d(this,"%Y-%M-%D",!0)},toISOTimeString:function(){return d(this,"%H:%I:%S.%Z",!0)},fromDate:function(a){a instanceof Date&&(this.setFullYear(a.getFullYear(),a.getMonth(),
a.getDate()),this.setTime(a.getTime()));return this},toFormat:function(a){return d(this,a)}});a.object.complete(Date.prototype,{toISOString:function(){return this.toISODateString()+"T"+this.toISOTimeString()+"Z"},fromISOString:function(a){return this.fromDate(x(a))}});var x=function(){function a(b,d,k,x,I,f,m){return new Date(b,d-1,k,x||0,(I||0)-c,f||0,m?m.substr(0,3):0)}var d=(new Date).getTimezoneOffset(),c;return function(x){return a.apply(c=d,String(x||"").replace(O,function(a,b,d,x){c+=x?60*
d+1*x:1*d;return b}).split(S))}}();F.exports={monthNumToAbbr:"jan feb mar apr may jun jul aug sep oct nov dec".split(" "),dayNumToAbbr:"mon tue wed thr fri sat sun".split(" "),isLeapYear:s,getMonthDayCount:v,format:d,fromISOString:x}},"x.js":function(c,F,a,p,w,z,M){a.require("2.js");a.require("f.js");c=new a.ui.Node({autoDelegate:!0,template:a.template.get("#k"),binding:{dates:a.resource("11.js").fetch(),providers:a.resource("12.js").fetch(),local:a.resource("13.js").fetch()},action:{create:function(){this.target.save()}}});
F.exports=c},"w.js":function(c,F,a,p,w,z,M){a.require("e.js");a.require("2.js");a.require("f.js");var h="January February March April May June July August September October November December".split(" "),n=new a.ui.Node.subclass({template:a.template.get("#9"),binding:{source:"data:",sourceImage:{events:"update",getter:function(a){return app.type.Provider.assets[a.data.source]}},content:"data:data",type:"data:type",id:"data:id",url:'data:data.url || ""',time:{events:"update",getter:function(a){return a.data.created.split(" ")[1].split(":").slice(0,
2).join(":")}},hidden:"data:hidden"},action:{remove:function(a){this.target.toggleHidden();a.die()}}});c=n.subclass({template:a.template.get("#a"),binding:{content:{events:"update",getter:function(a){return a.data.data.title.replace(/(https?:\/\/[a-z0-9\.\-]+\/[^\s\.\,\"]+)/ig,'<a href="$1" target="_blank">$1</a>')}}}});p=n.subclass({template:a.template.get("#b"),binding:{imageUrl:"data:data.photo",width:"data:data.width",height:"data:data.height",title:{events:"update",getter:function(a){return(a.data.data.title||
"").replace(/(https?:\/\/[a-z0-9\.\-]+\/[^\s\.\,\"]+)/ig,'<a href="$1" target="_blank">$1</a>')}}}});w=p.subclass({template:a.template.get("#c"),binding:{videoUrl:"data:data.video",v_width:"data:data.v_width",v_height:"data:data.v_height",videoFormat:{events:"update",getter:function(a){return a.data.data.video.split(".").pop()}}}});z=n.subclass({template:a.template.get("#d"),binding:{image:"data:data.pic",title:"data:data.title"}});var s={text:c,photo:p,video:w,weather:z},v=new a.ui.Node({active:!0,
handler:{update:function(a,c){"status"in c&&this.deprecate()}},template:a.template.get("#e"),binding:{id:"data:",status:"data:",title:new a.ui.Node({autoDelegate:!0,template:a.template.get("#f"),binding:{title:{events:"update",getter:function(a){return a.data.title||""}}},action:{change:function(d){if("blur"==d.type||"keyup"==d.type&&d.key==d.KEY.ENTER){if(this.target.modified&&"title"in this.target.modified){var c=this.data.id;a.net.request({method:"POST",params:{title:this.data.title},url:"/api/event/"+
this.data.id},function(a){app.type.Event(c).set("title",a.event.title)})}}else this.target.set("title",this.tmpl.input.value,!0)}},handler:{targetChanged:function(){var d=this;a.nextTick(function(){d.data.title||d.focus()})}}}),startDate:{events:"update",getter:function(d){d=a.date.fromISOString(d.data.startDate);return h[d.getMonth()]+" "+d.getDate()+", "+d.getFullYear()}},endDate:{events:"update",getter:function(d){d=a.date.fromISOString(d.data.endDate);return h[d.getMonth()]+" "+d.getDate()+", "+
d.getFullYear()}},description:new a.ui.Node({autoDelegate:!0,template:a.template.get("#g"),binding:{description:{events:"update",getter:function(a){return a.data.description||""}}},action:{change:function(c){if("blur"==c.type||"keyup"==c.type&&c.key==c.KEY.ENTER){if(this.target.modified&&"description"in this.target.modified){var n=this.data.id;a.net.request({method:"POST",params:{description:this.data.description},url:"/api/event/"+this.data.id},function(a){app.type.Event(n).set("description",a.event.description)})}}else this.target.set("description",
this.tmpl.input.value,!0)}}}),entries:new a.ui.Node({autoDelegate:!0,handler:{update:function(){this.setDataSource(this.data.entries)}},template:a.template.get("#h"),binding:{visible:{events:"update",getter:function(a){return"ready"==a.data.status}}},sorting:"data.created",grouping:{groupGetter:function(a){return a.data.created.split(" ")[0]},childClass:{template:a.template.get("#i"),binding:{title:{events:"update",getter:function(a){a=a.data.title.split("-");return h[a[1]-1]+" "+Number(a[2])}}}}},
childClass:n,childFactory:function(a){return new (s[a.delegate.data.type]||n)(a)}}),progress:new a.ui.Node({autoDelegate:!0,template:a.template.get("#j"),binding:{visible:{events:"update",getter:function(a){return"wait"==a.data.status||"progress"==a.data.status}},progress:"data:"}})}});a.router.add("/event/:id",{match:function(a){v.setDelegate(app.type.Event(a))},leave:function(){v.setDelegate()}});F.exports=v},"v.js":function(c,F,a,p,w,z,M){a.require("e.js");a.require("2.js");a.require("c.js");a.require("f.js");
var h="January February March April May June July August September October November December".split(" ");F.exports=new a.ui.Node({template:a.template.get("#6"),action:{create:function(){a.router.navigate("/add-event")}},dataSource:app.type.Event.inited,active:!0,sorting:"data.id",sortingDesc:!0,childClass:{template:a.template.get("#7"),binding:{title:"data:",hasTitle:{events:"update",getter:function(a){return!!a.data.title}},noTitle:{events:"update",getter:function(a){return!a.data.title}},startDate:{events:"update",
getter:function(c){c=a.date.fromISOString(c.data.startDate);return h[c.getMonth()]+" "+c.getDate()+", "+c.getFullYear()}},endDate:{events:"update",getter:function(c){c=a.date.fromISOString(c.data.endDate);return h[c.getMonth()]+" "+c.getDate()+", "+c.getFullYear()}},cover:"satellite:"},action:{showDetails:function(){a.router.navigate("/event/"+this.data.id)},remove:function(){this.target.remove()}},satelliteConfig:{cover:{existsIf:function(a){return a.data.main_entry},delegate:function(a){return a.data.main_entry},
instanceOf:a.ui.Node.subclass({template:a.template.get("#8"),binding:{url:"data:data.photo"}})}}}})},"11.js":function(c,F,a,p,w,z,M){a.require("e.js");a.require("2.js");a.require("o.js");a.require("s.js");var h="January February March April May June July August September October November December".split(" "),n=new a.ui.calendar.Calendar({maxDate:new Date,sections:["Month"],handler:{change:function(){"startDate"==n.dateType?v.update({startDate:a.date.format(this.selectedDate.value,"%Y-%M-%D")}):v.update({endDate:a.date.format(this.selectedDate.value,
"%Y-%M-%D")});s.hide()}}}),s=new a.ui.popup.Popup({template:a.template.get("#l"),dir:"bottom center top center",childNodes:[n]}),v=new a.ui.Node({autoDelegate:!0,template:a.template.get("#m"),binding:{startDate:{events:"update",getter:function(c){c=a.date.fromISOString(c.data.startDate);return h[c.getMonth()]+" "+c.getDate()+", "+c.getFullYear()}},endDate:{events:"update",getter:function(c){c=a.date.fromISOString(c.data.endDate);return h[c.getMonth()]+" "+c.getDate()+", "+c.getFullYear()}}},action:{pickStartDate:function(c){n.selectedDate.set(a.date.fromISOString(this.data.startDate));
n.dateType="startDate";s.show(c.sender)},pickEndDate:function(c){n.selectedDate.set(a.date.fromISOString(this.data.endDate));n.dateType="endDate";s.show(c.sender)}}});F.exports=v},"o.js":function(c,F,a,p,w,z,M){function h(a,b){return S["string"==typeof a&&a.toUpperCase()]||b}a.require("4.js");a.require("p.js");a.require("9.js");a.require("q.js");a.require("r.js");a.require("3.js");a.require("2.js");p=this.path;w=a.Class;var n=a.dom,s=a.dom.event,v=a.cssom,d=a.layout,A=a.array.from;z=a.event.create;
var D=a.ui.Node;c=a.template.define(p,{Popup:a.resource("r.tmpl"),Balloon:a.resource("s.tmpl"),popupManager:a.resource("t.tmpl")});var B={VERTICAL:"V",HORIZONTAL:"H"},L={L:"LEFT",R:"RIGHT",T:"TOP",B:"BOTTOM",C:"CENTER"},H={LEFT:"RIGHT",RIGHT:"LEFT",TOP:"BOTTOM",BOTTOM:"TOP",CENTER:"CENTER"},S=function(){for(var a=["LEFT","CENTER","RIGHT"],b=["TOP","CENTER","BOTTOM"],c={},d={},h=0;3>h;h++)for(var r=0;3>r;r++)d[a[h]+" "+b[r]]=a[h]+" "+b[r],d[b[r]+" "+a[h]]=a[h]+" "+b[r];for(var k in d)for(var q in d)c[k+
" "+q]=d[k]+" "+d[q];return c}();z=w(D,{className:p+".Popup",template:c.Popup,binding:{visible:{events:"show hide",getter:function(a){return a.visible?"visible":"hidden"}},orientation:{events:"layoutChanged",getter:function(a){return(a.orientation+"-"+a.dir.split(" ").slice(2,4).join("-")).toLowerCase()}}},action:{hide:function(){this.hide()}},emit_beforeShow:z("beforeShow"),emit_show:z("show"),emit_hide:z("hide"),emit_realign:z("realign"),emit_layoutChanged:z("layoutChanged","oldOrientation","oldDir"),
visible:!1,autorotate:!1,zIndex:0,dir:"",defaultDir:"RIGHT BOTTOM RIGHT TOP",orientation:B.VERTICAL,hideOnAnyClick:!0,hideOnKey:!1,hideOnScroll:!0,ignoreClickFor:null,init:function(){D.prototype.init.call(this);this.ignoreClickFor=A(this.ignoreClickFor);this.dir?this.defaultDir=this.dir=h(this.dir,"RIGHT BOTTOM RIGHT TOP"):this.dir=this.defaultDir=h(this.defaultDir,"RIGHT BOTTOM RIGHT TOP");this.setLayout(this.defaultDir,this.orientation)},templateSync:function(){D.prototype.templateSync.call(this);
this.realign()},setLayout:function(a,b,c){var d=this.dir,n=this.orientation;this.dir=h(a,this.dir);"string"==typeof b&&(this.orientation=b);if(d!=this.dir||n!=this.orientation)this.emit_layoutChanged(n,d),c||this.realign()},flip:function(a){var b=this.dir.split(" ");a=a==B.VERTICAL;b[0+a]=H[b[0+a]];b[2+a]=H[b[2+a]];this.setLayout(b.join(" "))},rotate:function(a){var b=this.dir.split(" "),c=[];a=(a%4+4)%4;if(!a)return b;var d=b[0].charAt(0),h=b[1].charAt(0),r="LTRTRBLBLCCTRCCBCCCCCCCC".indexOf(d+h)>>
1,d=(r&252)+((r&3)+a&3)<<1;c.push(L["LTRTRBLBLCCTRCCBCCCCCCCC".charAt(d)],L["LTRTRBLBLCCTRCCBCCCCCCCC".charAt(d+1)]);d=b[2].charAt(0);h=b[3].charAt(0);r="LTRTRBLBLCCTRCCBCCCCCCCC".indexOf(d+h)>>1;a="C"!=d&&"C"!=h&&b[0]==b[2]!=(b[1]==b[3])?-a+4:a;d=(r&252)+((r&3)+a&3)<<1;c.push(L["LTRTRBLBLCCTRCCBCCCCCCCC".charAt(d)],L["LTRTRBLBLCCTRCCBCCCCCCCC".charAt(d+1)]);return c},isFitToViewport:function(a){if(this.visible&&this.relElement){var b=new d.Box(this.relElement,!1,this.element.offsetParent),c=new d.Viewport(this.element.offsetParent),
n=this.element.offsetWidth,s=this.element.offsetHeight;a=h(a,this.dir).split(" ");var r="CENTER"==a[0]?b.left+(b.width>>1):b[a[0].toLowerCase()],b="CENTER"==a[1]?b.top+(b.height>>1):b[a[1].toLowerCase()];return("LEFT"!=a[2])*(r<n>>("CENTER"==a[2]))||("RIGHT"!=a[2])*(c.width-r<n>>("CENTER"==a[2]))||("TOP"!=a[3])*(b<s>>("CENTER"==a[3]))||("BOTTOM"!=a[3])*(c.height-b<s>>("CENTER"==a[3]))?!1:{x:r,y:b}}},setZIndex:function(a){this.zIndex=isNaN(a)?"auto":a;v.setStyle(this.element,{"z-index":a})},realign:function(){this.setZIndex(this.zIndex);
if(this.visible&&this.relElement){for(var a=this.dir.split(" "),b,c=0,n=a,s=a[2],r=a[3],k="number"!=typeof this.autorotate&&this.autorotate.length?this.autorotate.length:3;this.autorotate&&c<=k;){if(b=this.isFitToViewport(n.join(" "))){s=n[2];r=n[3];this.setLayout(n.join(" "),null,!0);break}if(c==k)break;if(Array.isArray(this.autorotate))var q=this.autorotate[c++],n="string"==typeof q?h(q,n.join(" ")).split(" "):this.rotate(q);else n=this.rotate(++c*this.autorotate)}b||(b=new d.Box(this.relElement,
!1,this.element.offsetParent),b={x:"CENTER"==a[0]?b.left+(b.width>>1):b[a[0].toLowerCase()],y:"CENTER"==a[1]?b.top+(b.height>>1):b[a[1].toLowerCase()]});a=new d.Box(this.element.offsetParent);c={left:"auto",right:"auto",top:"auto",bottom:"auto"};switch(s){case "LEFT":c.left=b.x+"px";break;case "CENTER":c.left=Math.round(b.x-this.element.offsetWidth/2)+"px";break;case "RIGHT":c.right=a.width-b.x+"px"}switch(r){case "TOP":c.top=b.y+"px";break;case "CENTER":c.top=Math.round(b.y-this.element.offsetHeight/
2)+"px";break;case "BOTTOM":c.bottom=a.height-b.y+"px"}v.setStyle(this.element,c);this.emit_realign()}},show:function(a,b,c){this.relElement=n.get(a)||this.relElement;this.setLayout(h(b,this.defaultDir),c);this.visible?this.realign():this.relElement&&(v.visibility(this.element,!1),O.appendChild(this),this.emit_beforeShow(),this.visible=!0,this.realign(),v.visibility(this.element,!0),this.emit_show())},hide:function(){this.visible&&(this.visible=!1,this.parentNode&&O.removeChild(this),this.emit_hide())},
hideAll:function(){O.clear()},destroy:function(){this.hide();D.prototype.destroy.call(this)}});p=w(z,{className:p+".Balloon",template:c.Balloon});var O=new D({template:c.popupManager,selection:!0,emit_childNodesModified:function(a){if(a.deleted)for(var b=a.deleted.length-1,c;c=a.deleted[b];b--)c.hide();a.inserted&&!a.deleted&&this.childNodes.length==a.inserted.length&&(s.addGlobalHandler("click",this.hideByClick,this),s.addGlobalHandler("keydown",this.hideByKey,this),s.addGlobalHandler("scroll",this.hideByScroll,
this),s.addHandler(window,"resize",this.realignAll,this));this.lastChild?this.lastChild.select():(s.removeGlobalHandler("click",this.hideByClick,this),s.removeGlobalHandler("keydown",this.hideByKey,this),s.removeGlobalHandler("scroll",this.hideByScroll,this),s.removeHandler(window,"resize",this.realignAll,this));D.prototype.emit_childNodesModified.call(this,a)},insertBefore:function(c,b){D.prototype.insertBefore.call(this,c,b)&&c.setZIndex(a.ui.window?a.ui.window.getWindowTopZIndex():2001)},removeChild:function(a){a&&
(a.hideOnAnyClick&&a.nextSibling&&this.removeChild(a.nextSibling),D.prototype.removeChild.call(this,a))},realignAll:function(){for(var a=this.firstChild;a;a=a.nextSibling)a.realign()},clear:function(){this.firstChild&&this.removeChild(this.firstChild)},hideByClick:function(a){if(this.firstChild){a=n.axis(a.sender,n.AXIS_ANCESTOR_OR_SELF);for(var b=this.lastChild;b;b=b.previousSibling)if(-1!=a.indexOf(b.element)||a.some(function(a){return-1!=b.ignoreClickFor.indexOf(a)})){for(;b=b.nextSibling;)if(b.hideOnAnyClick){this.removeChild(b);
break}return}this.removeChild(this.getChild(!0,"hideOnAnyClick"))}},hideByKey:function(a){var b=this.lastChild;if(b&&b.hideOnKey){var c=!1;"function"==typeof b.hideOnKey?c=b.hideOnKey(a.key):Array.isArray(b.hideOnKey)&&(c=-1!=b.hideOnKey.indexOf(a.key));c&&b.hide()}},hideByScroll:function(a){a=a.sender;if(!n.parentOf(a,this.element))for(var b=this.lastChild;b;){var c=b.previousSibling;b.hideOnScroll&&b.relElement&&b.offsetParent!==a&&n.parentOf(a,b.relElement)&&b.hide();b=c}}});a.ready(function(){n.insert(document.body,
O.element,n.INSERT_BEGIN);O.realignAll()});F.exports={ORIENTATION:B,DIR:{LEFT:"LEFT",RIGHT:"RIGHT",TOP:"TOP",BOTTOM:"BOTTOM",CENTER:"CENTER"},Popup:z,Balloon:p}},"p.js":function(c,F,a,p,w,z,M){function h(a,b,f){return null!=b?a.insertBefore(e(b)?b:d(b),f||null):null}function n(a,b){return a.outerHTML||D("",b?a:a.cloneNode(!0)).innerHTML}function s(a){return a&&(e(a)||a.nodeType)?a:"string"==typeof a?H.getElementById(a):null}function v(e,c,d){var y,l=[];d="string"==typeof d?O(d):d||a.fn.$true;c&(r|
I|R)&&d(e)&&l.push(e);switch(c){case b:case I:for(y=e;(y=y[t])&&y!==e.document;)d(y)&&l.push(y);break;case q:for(y=e[C];y;)d(y)&&l.push(y),y=y[u];break;case Q:case R:e[C]&&(c=new g(e),c.nodes(d,l));break;case G:c=new g(e,d);for(c.cursor_=e[u]||e[t];y=c.next();)l.push(y);break;case f:for(y=e;y=y[u];)d(y)&&l.push(y);break;case k:d(e[t])&&l.push(e[t]);break;case m:c=new g(e,d,g.BACKWARD);for(c.cursor_=e[$]||e[t];y=c.next();)l.push(y);break;case W:for(y=e;y=y[$];)d(y)&&l.push(y)}return l}function d(a){return H.createTextNode(null!=
a?a:"")}function A(){for(var a=H.createDocumentFragment(),b=arguments.length,e=A.array=[],f=0;f<b;f++)e.push(h(a,arguments[f]));return a}function D(b){var e=void 0!=b&&"string"!=typeof b,f=(e?b.description:b)||"",g="div",l=f.match(/^([a-z0-9_\-]+)(.*)$/i);l&&(g=l[1],f=l[2]);if(""!=f){for(var c=[],d={},P;l=y.exec(f);){if(l[8])throw 42;P=l[1]||l[2]||l[3];l[1]?d.id=P:l[2]?c.push(P):"class"!=P&&(d[P]=l[4]?l[5]||l[6]||l[7]||"":P)}ca&&d.name&&/^(input|textarea|select)$/i.test(g)&&(g="<"+g+" name="+d.name+
">")}f=H.createElement(g);if(d){d.style&&N&&(f.style.cssText=d.style);for(var J in d)f.setAttribute(J,d[J],0)}c&&c.length&&(f.className=c.join(" "));1<arguments.length&&h(f,A.apply(0,a.array.flatten(S(arguments,1))));if(e&&(b.css&&a.cssom&&a.cssom.setStyle(f,b.css),a.dom.event))for(var K in b)"function"==typeof b[K]?a.dom.event.addHandler(f,K,b[K],f):b[K]instanceof a.dom.event.Handler&&a.dom.event.addHandler(f,K,b[K].handler,b[K].thisObject);return f}function B(a,b){return a[t]?a[t].replaceChild(b,
a):a}function L(a){if(H.selection){var b=H.selection.createRange();0!=b.compareEndPoints("StartToEnd",b)&&b.collapse(a);return b.getBookmark().charCodeAt(2)-2}return 0}a.require("d.js");c=this.path;var H=p.document;p=a.Class;var S=a.array.from,O=a.getter,x=H.createElement("div"),b=1,I=2,Q=4,R=8,r=16,k=32,q=64,G=128,f=256,m=512,W=1024,t="parentNode",C="firstChild",u="nextSibling",$="previousSibling",ba;ba="function"==typeof x.compareDocumentPosition?function(a,b){return a.compareDocumentPosition(b)}:
function(a,b){return a==b?0:a.document!=b.document?33:a.sourceIndex>b.sourceIndex?2|8*b.contains(a):4|16*a.contains(b)};var e;"undefined"!=typeof Node?(e=function(a){return a instanceof Node},Node.prototype.contains||(Node.prototype.contains=function(a){return!!(this.compareDocumentPosition(a)&16)})):e=function(a){return a&&a.ownerDocument===H};var g=p(null,{className:c+".TreeWalker",root_:null,cursor_:null,filter:a.fn.$true,init:function(a,b,e){this.setRoot(a);this.setDirection(e);"function"==typeof b&&
(this.filter=b)},setDirection:function(b){a.object.extend(this,b?{a:"lastChild",b:$,c:u,d:C}:{a:C,b:u,c:$,d:"lastChild"})},setRoot:function(a){this.root_=a||H;this.reset()},reset:function(){this.cursor_=null},first:function(a){this.reset();return this.next(a)},last:function(a){this.reset();return this.prev(a)},nodes:function(a,b){var e;b||(b=[]);for(this.reset();e=this.next(a);)b.push(e);return b},next:function(a){a=a||this.filter;var b=this.cursor_||this.root_;do for(var e=b[this.a];!e;){if(b===
this.root_)return this.cursor_=null;(e=b[this.b])||(b=b[t])}while(!a(b=e));return this.cursor_=b},prev:function(a){a=a||this.filter;var b=this.cursor_,e=this.c,f=this.d;do{var l=b?b[e]:this.root_[f];if(l){for(;l[f];)l=l[f];b=l}else b&&(b=b[t]);if(!b||b===this.root_){b=null;break}}while(!a(b));return this.cursor_=b},destroy:function(){this.cursor_=this.root_=null}});g.BACKWARD=!0;var T=["textContent","innerText","nodeValue"],ca=function(){var a=H.createElement("input");a.name="a";return!/name/.test(n(a))}(),
N;x.setAttribute("style","color: red");N="red"!==x.style.color;var y=/#([a-z0-9_:\-]+)|\.([a-z0-9_:\-]+)|\[([a-z0-9_:\-]+)(="((?:\\.|[^"])*)"|='((?:\\.|[^'])*)'|=((?:\\.|[^\]])*))?\s*\]|\s*(\S)/gi;F.exports={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_TYPE_NODE:10,DOCUMENT_NODE:9,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12,AXIS_ANCESTOR:b,AXIS_ANCESTOR_OR_SELF:I,AXIS_DESCENDANT:Q,AXIS_DESCENDANT_OR_SELF:R,
AXIS_SELF:r,AXIS_PARENT:k,AXIS_CHILD:q,AXIS_FOLLOWING:G,AXIS_FOLLOWING_SIBLING:f,AXIS_PRECEDING:m,AXIS_PRECEDING_SIBLING:W,INSERT_BEGIN:"begin",INSERT_END:"end",INSERT_BEFORE:"before",INSERT_AFTER:"after",TreeWalker:g,outerHTML:n,textContent:function(a){for(var b=0,e;e=T[b++];)if(null!=a[e])return a[e];return v(a,Q,function(a){return 3==a.nodeType}).map(O("nodeValue")).join("")},get:s,tag:function(a,b){var e=s(a)||H;return"*"==b&&e.all?S(e.all):S(e.getElementsByTagName(b||"*"))},axis:v,findAncestor:function(a,
b,e){for(;a&&a!==e&&!b(a);)a=a.parentNode;return a||null},createElement:D,createText:d,createFragment:A,insert:function(a,b,f,g){a=s(a)||a;switch(f){case void 0:case "end":g=null;break;case "begin":g=a[C];break;case "before":break;case "after":g=g[u];break;default:f=Number(f),g=0<=f&&f<a.childNodes.length?a.childNodes[f]:null}f=!e(a);if(b&&Array.isArray(b))if(f){f=[];for(var l=0,c=b.length;l<c;l++)f[l]=a.insertBefore(b[l],g)}else a.insertBefore(A.apply(0,b),g),f=A.array;else f=f?b&&a.insertBefore(b,
g):h(a,b,g);return f},remove:function(a){return a[t]?a[t].removeChild(a):a},replace:B,swap:function(a,b){if(a===b||ba(a,b)&25)return!1;B(a,x);B(b,a);B(x,b);return!0},clone:function(a,b){var e=a.cloneNode(!b);e.attachEvent&&v(e,R).forEach(Event.clearHandlers);return e},clear:function(a){for(a=s(a);a.lastChild;)a.removeChild(a.lastChild);return a},wrap:function(b,e,f){var g=[];f=a.getter(f||a.fn.$self);for(var l in e)for(var c=0;c<b.length;c++){var d=f(b[c]);g[c]=e[l](b[c],c,d)?D(l,d):b[c]}return g},
setAttribute:function(a,b,e){null==e?a.removeAttribute(b):a.setAttribute(b,e)},parentOf:function(a,b){return a.contains(b)},isInside:function(a,b){return a==b||b.contains(a)},focus:function(a,b){try{a=s(a),a.focus(),b&&a.select&&a.select()}catch(e){}},setSelectionRange:function(a,b,e){3>arguments.length&&(e=b);if(a.setSelectionRange)a.setSelectionRange(b,e);else if(a.createTextRange){var f=a.createTextRange();f.collapse(!0);f.moveStart("character",b);f.moveEnd("character",e-b);f.select()}},getSelectionStart:function(a){return"undefined"!=
typeof a.selectionStart?a.selectionStart:L(!0)},getSelectionEnd:function(a){return"undefined"!=typeof a.selectionEnd?a.selectionEnd:L(!1)}}},"10.js":function(c,F,a,p,w,z,M){a.require("g.js");a.require("l.js");c=a.entity.createType("Provider",{id:a.entity.StringId,title:String,enabled:Boolean});c.all.sync([{id:"instagram",title:"Instagram"},{id:"twitter",title:"Twitter"},{id:"foursquare",title:"Foursquare"},{id:"facebook",title:"Facebook"}]);c.assets={instagram:"res/5jmIgrt08XS4w3uQga33fw.png",twitter:"res/eeJAfI-8iZkLWmv0c_HMVQ.png",
foursquare:"res/l5sxV1gmop93otZQ-MocqQ.png",facebook:"res/S9P1qHtsWyou0VhQNl7UUA.png",weather:"res/QdoVTxrca3Gp7N6VZ3ljQQ.png"};F.exports=c},"r.js":function(c,F,a,p,w,z,M){function h(a,b){if(k)try{return parseFloat(d.getComputedStyle(a,null)[b])}catch(c){}return 0}function n(a,b){if(k)return h(a,"height");L.setStyle(b,{borderTop:a.currentStyle.borderTopWidth+" solid red",borderBottom:a.currentStyle.borderBottomWidth+" solid red",paddingTop:a.currentStyle.paddingTop,paddingBottom:a.currentStyle.paddingBottom,
fontSize:0.01,height:0,overflow:"hidden"});return a.offsetHeight-b.offsetHeight}function s(a,b){if(r)a.onresize=b;else{var c=A.createElement({description:"iframe",css:{position:"absolute",width:"100%",height:"100%",border:"none",left:0,zIndex:-1,top:"-2000px"}});A.insert(a,c);c.onload=function(){(c.contentWindow.onresize=b)()}}}a.require("d.js");a.require("p.js");a.require("q.js");a.require("7.js");a.require("2.js");c=this.path;var v=p.document,d=v.defaultView;p=a.Class;var A=a.dom,D=a.ua,B=a.object.extend,
L=a.cssom,H=a.cssom.classList,S=a.ui.Node,O=D.test("IE"),x=D.test("IE7+"),b=D.test("IE8-"),I=!1;w=A.createElement("");z=["","-webkit-"];for(M=0;M<z.length;M++)try{if("-webkit-"!=z[M]||!a.ua.is("opera")){var Q=z[M]+"box";w.style.display=Q;if(w.style.display==Q){I=z[M];break}}}catch(R){}var r="undefined"!=typeof w.onresize,k=d&&d.getComputedStyle,q={top:NaN,left:NaN,bottom:NaN,right:NaN,width:NaN,height:NaN,defined:!1},G=p(null,{className:c+".Box",init:function(a,b,c){this.reset();this.element=A.get(a);
this.offsetElement=c;b||this.recalc(this.offsetElement)},reset:function(){B(this,q)},set:function(a,b){if(this.defined){switch(a.toLowerCase()){case "left":this.left=b;this.right=this.left+this.width;break;case "right":this.right=b;this.left=this.right-this.width;break;case "width":this.width=b;this.right=this.left+this.width;break;case "top":this.top=b;this.bottom=this.top+this.height;break;case "bottom":this.bottom=b;this.top=this.bottom-this.height;break;case "height":this.height=b,this.bottom=
this.top+this.height}(0>=this.width||0>=this.height)&&this.reset()}return this},recalc:function(a){this.reset();var c=this.element;if(c){var d=c,k=v.documentElement;if(c.getBoundingClientRect)d=c.getBoundingClientRect(),this.top=d.top,this.left=d.left,O&&(x?b&&(this.top+=k.scrollTop-k.clientTop,this.left+=k.scrollLeft-k.clientLeft):c!=v.body&&(this.top-=v.body.clientTop-v.body.scrollTop,this.left-=v.body.clientLeft-v.body.scrollLeft)),a&&(a!==v.body?(a=new G(a),this.top-=a.top,this.left-=a.left,a.destroy()):
(this.top+=a.scrollTop+k.scrollTop,this.left+=a.scrollLeft+k.scrollLeft));else if(v.getBoxObjectFor){var q=v.getBoxObjectFor(k),d=v.getBoxObjectFor(c);this.top=d.screenY-q.screenY;this.left=d.screenX-q.screenX;if(D.test("FF1.5-")){if(d=c.offsetParent)this.top-=d.scrollTop,this.left-=d.scrollLeft;d!=v.body&&(this.top+=k.scrollTop,this.left+=k.scrollLeft)}if(D.test("FF2+")){if(this.top&&(d=k.scrollTop,2<d)){for(var q=0,r=Math.floor(Math.log(d)/Math.LN2);0<=r;r-=3)q+=1<<r;d>q&&(this.top-=1)}this.left&&
(this.left-=1<k.scrollLeft)}a&&(a=new G(a),this.top-=a.top,this.left-=a.left,a.destroy())}else if(c!=a)for(this.top=c.offsetTop,this.left=c.offsetLeft,this.top-=v.body.clientTop-v.body.scrollTop,this.left-=v.body.clientLeft-v.body.scrollLeft;(d=d.offsetParent)&&d!=a;)this.top+=d.offsetTop+d.clientTop-d.scrollTop,this.left+=d.offsetLeft+d.clientLeft-d.scrollLeft;else this.top=this.left=0;this.width=c.offsetWidth;this.height=c.offsetHeight;this.bottom=this.top+this.height;this.right=this.left+this.width;
this.defined=!0}return this.defined},intersect:function(a){if(!this.defined)return!1;!1==a instanceof G&&(a=new G(a));return a.defined&&a.right>this.left&&a.left<this.right&&a.bottom>this.top&&a.top<this.bottom},destroy:function(){this.offsetElement=this.element=null}}),Q=p(G,{className:c+".Intersection",init:function(a,b,c){this.boxA=a instanceof G?a:new G(a,!0);this.boxB=b instanceof G?b:new G(b,!0);c||this.recalc()},recalc:function(){this.reset();if(!this.boxA.recalc()||!this.boxB.recalc())return!1;
this.boxA.intersect(this.boxB)&&(this.top=Math.max(this.boxA.top,this.boxB.top),this.left=Math.max(this.boxA.left,this.boxB.left),this.bottom=Math.min(this.boxA.bottom,this.boxB.bottom),this.right=Math.min(this.boxA.right,this.boxB.right),this.width=this.right-this.left,this.height=this.bottom-this.top,0>=this.width||0>=this.height?this.reset():this.defined=!0);return this.defined},destroy:function(){G.prototype.destroy.call(this);this.boxB=this.boxA=null}});w=p(G,{className:c+".Viewport",recalc:function(){this.reset();
var a=this.element;if(a){var b=a;this.width=a.clientWidth;this.height=a.clientHeight;if(a.getBoundingClientRect){var c=a.getBoundingClientRect();this.top=c.top;for(this.left=c.left;b=b.offsetParent;)this.top-=b.scrollTop,this.left-=b.scrollLeft}else if(v.getBoxObjectFor)for(c=v.getBoxObjectFor(a),this.top=c.y,this.left=c.x;b=b.offsetParent;)this.top-=b.scrollTop,this.left-=b.scrollLeft;else c=new G(a),this.top=c.top+a.clientTop,this.left=c.left+a.clientLeft;this.bottom=this.top+this.height;this.right=
this.left+this.width;this.defined=!0}return this.defined}});M=a.template.define(c,{Panel:a.resource("p.tmpl"),Stack:a.resource("q.tmpl")});z=p(S,{className:c+".VerticalPanel",template:M.Panel,flex:0,templateSync:function(){S.prototype.templateSync.call(this);this.flex?!1!==I&&L.setStyleProperty(this.element,I+"box-flex",this.flex):!1===I&&s(this.element,function(){this.parentNode&&this.parentNode.realign()}.bind(this))}});c=p(S,{className:c+".VerticalPanelStack",template:M.Stack,childClass:z,init:function(){this.cssRule=
L.uniqueRule();this.cssRule.setProperty("overflow","auto");this.ruleClassName=this.cssRule.token;S.prototype.init.call(this)},templateSync:function(){S.prototype.templateSync.call(this);!1===I&&(a.nextTick(this.realign.bind(this)),s(this.childNodesElement,this.realign.bind(this)))},insertBefore:function(a,b){if(a=S.prototype.insertBefore.call(this,a,b))return a.flex&&H(a.element).add(this.ruleClassName),this.realign(),a},removeChild:function(a){if(S.prototype.removeChild.call(this,a))return a.flex&&
H(a.element).remove(this.ruleClassName),this.realign(),a},realign:function(){if(!1===I&&this.tmpl){var a=this.element,b=this.lastChild.element,c=this.tmpl.ruller,d=(new G(b,!1,a)).bottom-h(a,"paddingTop")-h(a,"borderTopWidth")||0,a=n(a,c);if(k)d+=h(b,"marginBottom");else{var q=c.offsetHeight;c.style.height=b.currentStyle.marginBottom;d+=c.offsetHeight-q}if(d=a-d){for(a=b=0;q=this.childNodes[a];a++)q.flex&&(b++,d+=n(q.element,c));b&&this.cssRule.setProperty("height",Math.max(0,d/b)+"px")}}},destroy:function(){S.prototype.destroy.call(this);
this.cssRule.destroy();this.cssRule=null}});F.exports={Box:G,Intersection:Q,Viewport:w,VerticalPanel:z,VerticalPanelStack:c,addBlockResizeHandler:s}},"u.js":function(c,F,a,p,w,z,M){a.require("2.js");a.require("c.js");var h=new a.ui.Node({template:a.template.get("#4"),selection:!0,childClass:{autoDelegate:!0,template:a.template.get("#5"),binding:{content:"satellite:"},emit_select:function(){this.lazyContent&&(this.setSatellite("content",this.lazyContent.fetch()),this.lazyContent=null);a.ui.Node.prototype.emit_select.call(this)}},
childNodes:[{autoDelegate:!0,selected:!0,lazyContent:a.resource("x.js")}],handler:{update:function(c,h){"id"in h&&this.data.id&&a.router.navigate("/event/"+this.data.id)}}});a.router.add(/^(\/add-event|\/?)$/,{enter:function(a){h.setDelegate(app.type.Event({}))},leave:function(){h.data.id?h.setDelegate():h.target.destroy()}});F.exports=h},"t.js":function(c,F,a,p,w,z,M){a.require("2.js");F.exports=new a.ui.Node({template:a.template.get("#3"),binding:{},action:{}})},"d.js":function(c,F,a,p,w,z,M){function h(a){var c=
1E6;a=String(a).split(".");for(var d=0,h=0;4>d&&d<a.length;d++,c/=100)h+=a[d]*c;return h}function n(a){a=a.toLowerCase();if(a in d)return d[a];var c=a.match(/^([a-z]+)(([\d\.]+)([+-=]?))?$/i);if(c){d[a]=!1;var n=c[1].toLowerCase(),s=h(c[3]),c=c[4]||"=";if(n=v[n])return d[a]=!s||"="==c&&n==s||"+"==c&&n>=s||"-"==c&&n<s}return!1}var s=p.document;c=p.navigator&&p.navigator.userAgent||"";p=p.opera;var v={},d={},A="unknown";w={MSIE:["Internet Explorer","msie","ie"],Gecko:["Gecko","gecko"],Safari:["Safari",
"safari"],"iPhone OS":["iPhone","iphone"],AdobeAir:["AdobeAir","air"],AppleWebKit:["WebKit"],Chrome:["Chrome","chrome"],FireFox:["FireFox","firefox","ff"],Iceweasel:["FireFox","firefox","ff"],Shiretoko:["FireFox","firefox","ff"],Opera:["Opera","opera"]};for(var D in w)if(!("MSIE"==D&&p||"Safari"==D&&/chrome/i.test(c)||"AppleWebKit"==D&&/iphone/i.test(c))&&c.match(RegExp(D+".(\\d+(\\.\\d+)*)","i"))){z=w[D];A=p&&"function"==typeof p.version?p.version():RegExp.$1;M=h(A);for(var A=z[0]+" "+A,B=0;B<z.length;B++)v[z[B].toLowerCase()]=
M}a.platformFeature.datauri=!1;"undefined"!=typeof Image&&function(){var c=new Image;c.onload=function(){a.platformFeature.datauri=!0};c.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=="}();if(n("IE7-"))try{s.execCommand("BackgroundImageCache",!1,!0)}catch(L){}F.exports={prettyName:A,test:function(){return a.array(arguments).some(n)},is:n,cookies:{set:function(a,c,d,h){s.cookie=a+"="+(null==c?"":escape(c))+";path="+(h||(0==location.pathname.indexOf("/")?"":"/")+location.pathname)+
(d?";expires="+(new Date(Date.now()+1E3*d)).toGMTString():"")},get:function(a){return(a=s.cookie.match(RegExp("(^|;)\\s*"+a+"\\s*=\\s*(.*?)\\s*(;|$)")))&&unescape(a[2])},remove:function(a,c){s.cookie=a+"=;expires="+(new Date(0)).toGMTString()+";path="+(c||(0==location.pathname.indexOf("/")?"":"/")+location.pathname)}}}},"c.js":function(c,F,a,p,w,z,M){function h(){var c=n.hash.substr(1)||"/";if(c!=L){var d=[],h=[];L=c;for(var b in A){var I=A[b],s=c.match(I.regexp);s?(D[b]||d.push(I),D[b]=s):D[b]&&
(h.push(I),delete D[b])}for(c=0;I=h[c];c++)for(var I=a.array.from(I.callbacks),p=0;s=I[p];p++)s.callback.leave&&s.callback.leave.call(s.context);for(c=0;I=d[c];c++)for(I=a.array.from(I.callbacks),p=0;s=I[p];p++)s.callback.enter&&s.callback.enter.call(s.context);for(b in D)for(I=A[b],d=a.array.from(D[b],1),I=a.array.from(I.callbacks),c=0;s=I[c];c++)s.callback.match&&s.callback.match.apply(s.context,d)}}a.require("d.js");a.require("9.js");a.namespace(String(this.path));var n=p.location;c=p.document.documentMode;
c=a.ua.is("IE")&&(!c||7>=c);var s="onhashchange"in p&&!c,v=/:\w+/g,d=/\\\*\w+/g,A={},D={},B=!1,L,H;F.exports={debug:!1,add:function(c,h,n){var b=A[c],I;b||(b=A[c]={source:c,callbacks:[],regexp:"[object RegExp]"!=Object.prototype.toString.call(c)?RegExp("^"+a.string.forRegExp(String(c)).replace(v,"([^/]+)").replace(d,"(.*?)")+"$","i"):c},L&&(I=L.match(b.regexp))&&(D[c]=I));h={cb_:h,callback:"function"!=typeof h?h:{match:h},context:n};b.callbacks.push(h);if(I=D[c])h.callback.enter&&h.callback.enter.call(n),
h.callback.match&&h.callback.match.apply(n,a.array.from(I,1))},remove:function(a,c,d){var b=A[a];if(b)for(var h=0,n;n=b.callbacks[h];h++)if(n.cb_===c&&n.context===d){b.callbacks.splice(h,1);b.callbacks.length||(delete A[a],delete D[a]);break}},stop:function(){B&&(s?a.dom.event.removeHandler(p,"hashchange",h):clearInterval(H),B=!1)},start:function(){B||(s?a.dom.event.addHandler(p,"hashchange",h):H=setInterval(h,50),B=!0,h())},checkUrl:h,navigate:function(a,c){c?n.replace(n.pathname+"#"+a):n.hash=a;
B&&h()}}},"b.js":function(c,F,a,p,w,z,M){a.require("c.js");a.require("2.js");var h=a.ui.Node.prototype.postInit,n=a.ui.Node.prototype.destroy;a.ui.Node.prototype.postInit=function(){h.call(this);this.router&&a.router.add(this.router,this.routerCallback,this)};a.ui.Node.prototype.destroy=function(){this.router&&a.router.remove(this.router,this.routerCallback,this);n.call(this)};a.ui.Node.prototype.routerCallback=a.Class.extensibleProperty({enter:function(){this.select()},leave:function(){this.unselect()}});
F.exports=a.router.exports},"s.js":function(c,F,a,p,w,z,M){function h(a){return{hour:a.getHours(),day:a.getDate()-1,month:a.getMonth(),year:a.getFullYear()}}function n(a,c){var d={},h=S[a];if(h){var r=c.getFullYear(),k=c.getMonth(),q=c.getDate(),r=r-r%h[1],k=h[2]?k-k%h[2]:0,q=h[3]?q:1;d.periodStart=new Date(r,k,q);d.periodEnd=new Date(new Date(r+h[4],k+h[5],q+h[6])-1)}else d.periodStart=new Date(c),d.periodEnd=new Date(c);return d}function s(){for(var a=n(this.nodePeriodName,(new Date(this.periodStart)).add(this.nodePeriodUnit,
-this.nodePeriodUnitCount*(this.getInitOffset(this.periodStart)||0))),c=[],d=0;d<this.nodeCount;d++)c.push(a),a=n(this.nodePeriodName,(new Date(a.periodStart)).add(this.nodePeriodUnit,this.nodePeriodUnitCount));return c}a.require("4.js");a.require("e.js");a.require("p.js");a.require("9.js");a.require("k.js");a.require("2.js");a.require("3.js");c=this.path;p=a.Class;var v=a.dom;w=a.event.create;var d=a.data.value.Property,A=a.ui.Node,D=a.date.monthNumToAbbr,B=a.l10n.dictionary("0.l10n");z=a.template.define(c,
{Calendar:a.resource("u.tmpl"),Section:a.resource("v.tmpl"),SectionMonth:a.resource("w.tmpl"),Node:a.resource("x.tmpl")});var L={};(function(){for(var a=32,c=2147483647;--a;)L[a]=c,c>>=1})();var H={century:function(a){return a.periodStart.getFullYear()+" - "+a.periodEnd.getFullYear()},decade:function(a){return a.periodStart.getFullYear()+" - "+a.periodEnd.getFullYear()},year:function(a){return a.periodStart.getFullYear()},quarter:function(a){return B.token("quarter")},month:function(a){return B.token("monthShort."+
D[a.periodStart.getMonth()])},day:function(a){return a.periodStart.getDate()}},S={century:["year",100,0,0,100,0,0],decade:["year",10,0,0,10,0,0],year:["year",1,0,0,1,0,0],quarter:["month",1,3,0,0,3,0],month:["month",1,1,0,0,1,0],day:["day",1,1,1,0,0,1]},O=p(A,{className:c+".Calendar.Node",childClass:null,periodStart:null,periodEnd:null,emit_periodChanged:w("periodChanged"),emit_select:function(){A.prototype.emit_select.call(this);v.focus(this.element)},template:z.Node,binding:{nodePeriodName:"nodePeriodName",
title:{events:"periodChanged",getter:function(a){return H[a.nodePeriodName](a)}},before:{events:"periodChanged",getter:function(a){return a.parentNode&&a.periodStart<a.parentNode.periodStart?"before":""}},after:{events:"periodChanged",getter:function(a){return a.parentNode&&a.periodEnd>a.parentNode.periodEnd?"after":""}}},action:{click:function(a){var c=this.parentNode&&this.parentNode.parentNode;c&&!this.isDisabled()&&c.templateAction("click",a,this)}},setPeriod:function(a,c,d){if(d||this.periodStart-
a.periodStart||this.periodEnd-a.periodEnd)this.periodStart=a.periodStart,this.periodEnd=a.periodEnd,this.isPeriodEnabled(this.periodStart,this.periodEnd)?this.enable():this.disable(),c&&(c>=this.periodStart&&c<=this.periodEnd?this.select():this.unselect()),this.emit_periodChanged()}}),x=p(A,{className:c+".CalendarSection",emit_periodChanged:w("periodChanged"),emit_selectedDateChanged:w("selectedDateChanged"),template:z.Section,binding:{sectionName:"sectionName",title:{events:"periodChanged",getter:function(a){return a.getTitle(a.periodStart)||
"-"}},tabTitle:{events:"selectedDateChanged",getter:function(a){return a.getTabTitle(a.selectedDate)||"-"}}},childClass:O,minDate:null,maxDate:null,periodStart:null,periodEnd:null,setPeriod:function(a,c){if(c||this.periodStart-a.periodStart||this.periodEnd-a.periodEnd){var d=this.periodStart,h=this.periodEnd;this.periodStart=a.periodStart;this.periodEnd=a.periodEnd;var r=s.call(this);this.minDate=r[0].periodStart;this.maxDate=r[r.length-1].periodEnd;if(this.firstChild)for(var k=0,q;q=this.childNodes[k];k++)q.setPeriod(r[k],
this.selectedDate,c);this.emit_periodChanged(d,h)}},selectedDate:null,setSelectedDate:function(a){if(this.selectedDate-a){var c=this.selectedDate;this.selectedDate=a;(a=this.getNodeByDate(this.selectedDate))?a.select():this.selectedDate?this.setViewDate(this.selectedDate):this.selection.clear();this.emit_selectedDateChanged(c)}},isPrevPeriodEnabled:!0,isNextPeriodEnabled:!0,periodName:"period",nodeCount:12,nodePeriodName:"-",nodePeriodUnit:"-",nodePeriodUnitCount:1,selection:!0,init:function(){var a=
this.selectedDate||new Date;this.selectedDate=null;this.setViewDate(a);this.childNodes=s.call(this).map(function(a){return{isPeriodEnabled:this.isPeriodEnabled,disabled:!this.isPeriodEnabled(a.periodStart,a.periodEnd),nodePeriodName:this.nodePeriodName,periodStart:a.periodStart,periodEnd:a.periodEnd}},this);A.prototype.init.call(this);this.setSelectedDate(a)},getTitle:function(){},getTabTitle:function(){},getNodeByDate:function(a){if(a&&this.periodStart<=a&&a<=this.periodEnd){a:{var c=this.childNodes;
if(c.length){var d,h,r=0,k=c.length,q;do if(h=c[d=r+k>>1],a<(q=h.periodStart))k=d-1;else if(a>(h=h.periodEnd))r=d+1;else{a=a>=q&&a<=h?d:-1;break a}while(r<=k)}a=-1}if(-1!=a)return this.childNodes[a]}return null},prevPeriod:function(){this.isPrevPeriodEnabled&&this.setPeriod(n(this.periodName,new Date(+this.periodStart-1)))},nextPeriod:function(){this.isNextPeriodEnabled&&this.setPeriod(n(this.periodName,new Date(+this.periodEnd+1)))},setViewDate:function(a){this.setPeriod(n(this.periodName,a))},rebuild:function(){this.setPeriod(n(this.periodName,
this.selectedDate),!0)},getInitOffset:function(){}});x.Month=p(x,{className:c+".CalendarSection.Month",sectionName:"Month",periodName:"month",nodeCount:42,nodePeriodName:"day",nodePeriodUnit:"day",getTabTitle:function(a){return a.getDate()},getInitOffset:function(a){return 1+((new Date(a)).set("day",1).getDay()+5)%7},template:z.SectionMonth,binding:{year:{events:"periodChanged",getter:function(a){return a.periodStart.getFullYear()}},title:B.token("month").compute("periodChanged",function(a){return D[a.periodStart.getMonth()]})}});
x.Year=p(x,{className:c+".CalendarSection.Year",sectionName:"Year",periodName:"year",nodePeriodName:"month",nodePeriodUnit:"month",getTitle:function(a){return a.getFullYear()},binding:{tabTitle:B.token("month").compute("selectedDateChanged",function(a){return D[a.selectedDate.getMonth()]})}});x.YearDecade=p(x,{className:c+".CalendarSection.YearDecade",sectionName:"YearDecade",periodName:"decade",nodePeriodName:"year",nodePeriodUnit:"year",getInitOffset:function(){return 1},getTabTitle:function(a){return a.getFullYear()},
getTitle:function(a){return a.getFullYear()+" - "+this.periodEnd.getFullYear()}});x.Century=p(x,{className:c+".CalendarSection.Century",sectionName:"Century",periodName:"century",nodePeriodName:"decade",nodePeriodUnit:"year",nodePeriodUnitCount:10,getTabTitle:function(b){b=b.getFullYear();b-=b%10;return b+"-"+a.number.lead(Number(b.toString().substr(-2))+9,2)},getInitOffset:function(){return 1}});x.YearQuarters=p(x,{className:c+".CalendarSection.YearQuarter",sectionName:"YearQuarter",periodName:"year",
nodeCount:4,nodePeriodName:"quarter",nodePeriodUnit:"month",nodePeriodUnitCount:3});x.Quarter=p(x,{className:c+".CalendarSection.Quarter",sectionName:"Quarter",periodName:"quarter",nodeCount:3,nodePeriodName:"month",nodePeriodUnit:"month",binding:{title:B.token("quarter").compute("periodChanged",function(a){return 1})}});c=p(A,{className:c+".Calendar",emit_change:w("change"),emit_childNodesModified:function(a){if(a.inserted)for(var c=0,d;d=a.inserted[c++];)d.setViewDate(this.date.value),this.selectedDate.link(d,
d.setSelectedDate);if(a.deleted)for(c=0;d=a.deleted[c++];)this.selectedDate.unlink(d,d.setSelectedDate);A.prototype.emit_childNodesModified.call(this,a);this.selection&&!this.selection.itemCount&&this.firstChild&&this.firstChild.select()},template:z.Calendar,binding:{today:function(){return(new Date).toFormat("%D.%M.%Y")}},action:{moveNext:function(){this.selection.pick().nextPeriod()},movePrev:function(){this.selection.pick().prevPeriod()},selectToday:function(){this.selectedDate.set(new Date)}},
templateAction:function(a,c,d){A.prototype.templateAction.call(this,a,c);d instanceof O&&(a=d.periodStart,c=this.selection.pick(),this.selectedDate.set((new Date(this.selectedDate.value)).add(c.nodePeriodUnit,this.selectedDate.value.diff(c.nodePeriodUnit,a))),this.nextSection(!1))},satelliteConfig:{shadowTabs:a.ui.ShadowNodeList.subclass({className:c+".ShadowTabs",getChildNodesElement:function(a){return a.tmpl.sectionTabs},childClass:{className:c+".ShadowTab",getElement:function(a){return a.tmpl.tabElement}}})},
selection:!0,childClass:x,childFactory:function(){},date:null,sections:["Month","Year","YearDecade"],minDate:null,maxDate:null,map:null,periodEnableByDefault:!0,init:function(){var a=new Date;this.selectedDate=new d(new Date(this.date||a));this.date=new d(new Date(this.date||a));A.prototype.init.call(this);this.isPeriodEnabled=this.isPeriodEnabled.bind(this);this.sections&&this.setChildNodes(this.sections.map(function(a){return new x[a]({isPeriodEnabled:this.isPeriodEnabled,selectedDate:this.selectedDate.value})},
this))},setMinDate:function(a){if(this.minDate!=a){this.minDate=a;a=0;for(var c;c=this.childNodes[a];a++)c.rebuild()}},setMaxDate:function(a){if(this.maxDate!=a){this.maxDate=a;a=0;for(var c;c=this.childNodes[a];a++)c.rebuild()}},setSection:function(b){(b=a.array.search(this.childNodes,"sectionName",b))&&b.select()},nextSection:function(a){var c=this.selection.pick();(c=a?c.nextSibling:c.previousSibling)?(c.select(),c.setViewDate(this.selectedDate.value)):a||this.emit_change()},selectDate:function(a){0!=
a-this.date.value&&this.date.set(a)},getNextPeriod:function(a,c){if(!this.isNextPeriodEnabled(a,c))return!1;if(this.map){var d=c?1:-1,s=c?"start":"till",r=c?"till":"start",k=(new Date(a)).add("millisecond",d),q=this.map[this.periodEnableByDefault?"disabled":"enabled"];if(q){var G=n("year",k);for(G.periodEnd.getFullYear()==k.getFullYear()&&(G[s]=k);!this.isPeriodEnabled(G.periodStart,G.periodEnd);)G=n("year",k.add("year",d));for(G[r]=n("month",G[s])[r];!this.isPeriodEnabled(G.periodStart,G.periodEnd);)G=
n("month",k.add("month",d));var f=h(G[s]),r=h(G[r]);if(q=q[r.year]&&q[r.year][r.month])for(this.periodEnableByDefault&&(s=L[G.periodEnd.getMonthDayCount()],q=q&s^s),s=f.day;s!=r.day+d;s+=d){if(q>>s&1){k=new Date(f.year,f.month,s+1);break}}else return n("day",G[s])}}return n("day",k)},isNextPeriodEnabled:function(b,c){if(!c&&this.minDate&&this.minDate>b||c&&this.maxDate&&this.maxDate<b)return!1;if(this.map)if(this.periodEnableByDefault){if(!c&&this.minDate)return this.isPeriodEnabled(this.minDate,
b);if(c&&this.maxDate)return this.isPeriodEnabled(b,this.maxDate)}else{var d=c?1:-1,h=b.getFullYear(),r=(new Date(b)).add("millisecond",d),k=r.getFullYear(),q=a.object.keys(this.map.enable).filter(function(a){return d*a>=d*k}),s=q.length;if(s)for(var q=q.sort(function(a,b){return d*(a>b)||-d*(a<b)}),f=0;f<s;f++){var m=n("year",new Date(q[f],0));if(this.isPeriodEnabled(c&&q[f]==h?r:m.periodStart,c||q[f]!=h?m.periodEnd:r))return!0}return!1}return!0},isPeriodEnabled:function(a,c){if(this.minDate&&this.minDate>
c||this.maxDate&&this.maxDate<a)return!1;var d=this.map&&this.map[this.periodEnableByDefault?"disabled":"enabled"];if(d){var s=h(a),r=h(c),k,q,n,f=s.month,m=new Date(s.year,s.month),p=11-s.month,t=p+1+12*(r.year-s.year-1)+(r.month+1)-1;if(this.periodEnableByDefault){if(0==t)return!(k=d[s.year])||!(q=k[s.month])||(q^2147483647)>>s.day&L[r.day-s.day+1];for(var C=0;C<=t;C++){if(!C||p==C%12)if(k=d[m.getFullYear()],!k)return!0;q=k[f=m.getMonth()];if(!q)return!0;n=L[m.getMonthDayCount()];if(C/t?1==C/t?
(q&n^n)&L[r.day+1]:q&n^n:(q&n^n)>>s.day)return!0;m.setMonth(f+1)}}else{if(0==t)return(k=d[s.year])&&(q=k[s.month])&&q>>s.day&L[r.day-s.day+1];for(C=0;C<=t;C++){if(!C||p==C%12||!k)if(k=d[m.getFullYear()],!k){C+=12;m.setMonth(f+12);continue}if((q=k[f=m.getMonth()])&&(C/t?1==C/t?q&L[r.day+1]:q:q>>s.day))return!0;m.setMonth(f+1)}}return!1}return!0},destroy:function(){A.prototype.destroy.call(this);this.date.destroy();this.date=null;this.selectedDate.destroy();this.selectedDate=null;delete this.isPeriodEnabled;
this.tabElementMap_=null}});F.exports={Calendar:c,CalendarSection:x}},"z.js":function(c,F,a,p,w,z,M){a.require("g.js");a.require("l.js");var h=a.entity.createType("Entry",{id:a.entity.IntId,source:String,type:String,created:String,data:function(a){return a||""},hidden:Boolean}),n=h.entityType.reader;h.entityType.reader=function(a){a&&"0"===a.hidden&&(a.hidden=!1);a&&a.data&&(a.created=a.data.created,a.data.video&&(a.type="video"));return n.call(this,a)};h.extend({toggleHidden:app.service["default"].createAction({method:"POST",
url:"/api/event_item/:id/update",request:function(){this.set("hidden",!this.data.hidden,!0);return{routerParams:{id:this.data.id},params:{hidden:Number(this.data.hidden)}}},success:function(a){this.commit(h.reader(a.event_item))}})});F.exports=h},"a.js":function(c,F,a,p,w,z,M){a.require("7.js");var h=a.template.TYPE_ELEMENT,n=a.template.TYPE_ATTRIBUTE,s=a.template.TYPE_TEXT,v=a.template.TYPE_COMMENT,d=a.template.TOKEN_TYPE,A=a.template.TOKEN_BINDINGS,D=a.template.TOKEN_REFS,B=a.template.ATTR_NAME,
L=a.template.ATTR_NAME_BY_TYPE,H=a.template.ELEMENT_NAME,S=a.template.ELEMENT_ATTRS,O={},x=function(){function a(b,c){for(var d=0,f;f=b[d];d++)-1==f.indexOf(":")&&q.push(f+":"+c)}function b(a){var c=k.length,c=r[c]||"r"+c;k.push(c+"="+a);return c}function c(q,r,p){for(var u,x,z,e,g=0,T=0,ca=0,N;N=q[g];g++,T++,e=!1){g?q[g+1]?(N[d]==q[g-1][d]&&N[d]==s&&ca++,u=r+".childNodes["+(p?T:T+(ca?" + "+ca+" * TEXT_BUG":""))+"]"):u=r+".lastChild":u=r+".firstChild";if(x=N[D])e=!0,u=b(u),a(x,u);N[A]&&(N[A]&&"number"==
typeof N[A]&&(N[A]=N[D][N[A]-1]),e||(e=!0,u=b(u)),n.push([N[d],u,N[A]]));if(N[d]==h){z=-1;r==m&&f.push(u+".basisTemplateId");e||(u=b(u),z=k.length);for(var y=[],E=[],Y=S,fa;fa=N[Y];Y++)fa[d]==h||fa[d]==s||fa[d]==v?E.push(fa):y.push(fa);for(var Y=0,U;U=y[Y];Y++)if(6!=U[d]){fa=L[U[d]]||U[B];if(x=U[D])e=!0,a(x,b(u+'.getAttributeNode("'+fa+'")'));if(x=U[A])switch(e=!0,fa){case "class":U=0;for(var l;l=x[U];U++)l=[2,u,l[1],fa,l[0]].concat(l.slice(2)),n.push(l);break;case "style":for(U=0;l=x[U];U++)for(var V=
0,aa;aa=l[0][V];V++)n.push([2,u,aa,fa,l[0],l[1],l[2]]);break;default:for(U=0;aa=x[0][U];U++)n.push([2,u,aa,fa,x[0],x[1],N[H]])}}E.length&&c(E,u,p);e||z!=k.length||k.pop()}}}var r="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),k,q,n,f,m;return function(a,b,d){k=[];q=[];n=[];f=[];m=b||"_";c(a,m,d);return{path:k,ref:q,binding:n,markedElementList:f}}}(),b=function(){function b(a,d,f){var k=[],h=a[5];a=a[4];for(var r,n,s=0;s<h.length;s++)if("string"==typeof h[s])k.push('"'+h[s].replace(/"/g,
'\\"')+'"');else if(r=a[h[s]],n=r.indexOf(":"),-1==n)k.push("l10n"==d?'"{'+r+'}"':"bool"==d?"(__"+r+'||"")':"__"+r);else{var p=null,v=r.substr(n+1).replace(c,function(a,b){p=b;return""});p?k.push(f[r.substr(n+1)]):k.push('__l10n["'+v+'"]')}1==k.length&&k.push('""');return k.join("+")}var c=/\.\{([a-zA-Z_][a-zA-Z0-9_\-]*)\}/,d={disabled:"*",checked:["input"],value:["input","textarea"],minlength:["input"],maxlength:["input"],readonly:["input"],selected:["option"]},r={disabled:!0,checked:!0,selected:!0,
readonly:!0},k={1:"bind_element",3:"bind_textNode",8:"bind_comment"};return function(q){function p(b){T[b]=!0;m.push(v+"="+b+"("+a.array(arguments,1)+");")}for(var f={},m,v,t=[],C=[],u,x,A=[],e={},g=1,T={resolve:!0},ca,N=0,y;y=q[N];N++){var E=y[0],Y=y[1],z=y[2];if(-1==["set","templateId_"].indexOf(z)){var U=z.split(":");(ca="anim"==U[0])&&(z=U[1]);m=f[z];v="_"+N;u="__"+z;if("l10n"==U[0]&&U[1]){var U=U[1],l=null,V=U.replace(c,function(a,b){l=b;return""});if(l){!1==U in e&&(u="$l10n_"+g++,e[U]=u,A.push('set("'+
u+'",'+u+")"),t.push(u+'=tools.l10nToken("'+V+'").computeToken()'),m=f[l],m||(m=f[l]=[],t.push("__"+l)),m.push(u+".set(__"+l+");"));z=e[U];v="_"+N;u="__"+z;m=f[z];m||(m=f[z]=[],t.push(u));E==s?(t.push(v+"="+Y),p(k[E],Y,v,"value")):(u='"'+y[B]+'"',t.push(v),p("bind_attr",Y,u,v,b(y,!1,e)));continue}x||(x={});f[V]||(f[V]=[],x[V]=[]);m=f[V];m.l10n=!0;if(E==s){x[V].push(Y+".nodeValue=value;");m.push(Y+'.nodeValue=__l10n["'+V+'"]'+(l?"[__"+l+"]":"")+";");continue}else x[V].push("bind_attr("+[Y,'"'+y[B]+
'"',"NaN",b(y,"l10n",e)]+");")}m||(m=f[z]=[],t.push(u));if(E!=n)if(m.nodeBind)switch(E){case h:p(k[E],Y,Y,"value!==null?String(value):null");break;case s:m.push(Y+".nodeValue=value;")}else t.push(v+"="+Y),p(k[E],Y,v,"value"),m.nodeBind=v;else switch(u=y[B],u){case "class":u="";U="value";E=y[4];U=y.length;if(6<=U)if(6==U||"string"==typeof y[6])6==U?(U='value?"'+z+'":""',y[5]&&(u=E+z)):(E="",U='value?"'+y[6]+'":""',y[5]&&(u=y[6]));else{if(!y[6].length)continue;7==U?(U=y[6].map(function(a){return'value=="'+
a+'"'}).join("||")+'?value:""',y[5]&&(u=E+y[6][y[5]-1])):(E="",U=y[6].map(function(a,b){return'value=="'+a+'"?"'+this[b]+'"'},y[7]).join(":")+':""',y[5]&&(u=y[7][y[5]-1]))}else U='typeof value=="string"||typeof value=="number"?value:(value?"'+z+'":"")';t.push(v+'="'+u+'"');p("bind_attrClass",Y,v,U,'"'+E+'"',ca);break;case "style":t.push(v+'=""');p("bind_attrStyle",Y,'"'+y[6]+'"',v,b(y,!1,e));break;default:ca=d[u],t.push(v+"="+b(y,"l10n",e)),p("bind_attr",Y,'"'+u+'"',v,ca&&r[u]?b(y,"bool",e)+'?"'+
u+'":""':b(y,!1,e)),!ca||"*"!=ca&&-1==ca.indexOf(y[6].toLowerCase())||m.push("if("+Y+"."+u+"!="+v+")"+Y+"."+u+"="+(r[u]?"!!"+v:v)+";")}}}C.push(';function set(bindName,value){if(typeof bindName=="string")value=resolve.call(instance,bindName,value,Attaches);switch(bindName){');for(z in f)C.push('case"'+z+'":'+(f[z].nodeBind?"case "+f[z].nodeBind+":":"")+(f[z].l10n?f[z].join(""):"if(__"+z+"!==value){__"+z+"=value;"+f[z].join("")+"}")+"break;");C.push("}}");q=[];for(var aa in T)q.push(aa+"=tools."+aa);
return{keys:a.object.keys(f).filter(function(a){return-1==a.indexOf("@")}),tools:q,vars:t,set:C.join(""),l10n:x,l10nCompute:A}}}();F.exports={getFunctions:function(c,d,h,r,k){if(d=O[h&&a.path.relative(h)])return d;c=x(c,"_",k);k=b(c.binding);d=c.markedElementList.join("=");h={keys:k.keys,l10nKeys:a.object.keys(k.l10n)};if(k.l10n){r=[];for(var q in k.l10n)r.push('case"'+q+'":if(value==null)value="{'+q+'}";__l10n[token]=value;'+k.l10n[q].join("")+"break;");h.createL10nSync=new Function("_","__l10n",
"bind_attr","TEXT_BUG","var "+c.path+";return function(token, value){switch(token){"+r.join("")+"}}\n")}h.createInstance=new Function("tid","map","build","tools","__l10n","TEXT_BUG","var getBindings=tools.createBindingFunction(["+k.keys.map(function(a){return'"'+a+'"'})+"]),"+(k.tools.length?k.tools+",":"")+"Attaches=function(){};Attaches.prototype={"+k.keys.map(function(a){return a+":null"})+"};return function createInstance_(id,obj,onAction,onRebuild,bindings,bindingInterface){var _=build(),"+c.path.concat(k.vars)+
",instance={context:obj,action:onAction,rebuild:onRebuild,handler:null,bindings:bindings,bindingInterface:bindingInterface,attaches:null,tmpl:{"+[c.ref,"templateId_:id","set:set"]+"}}"+(d?";if(obj||onAction)"+d+"=(id<<12)|tid":"")+k.set+";instance.handler=bindings?getBindings(bindings,obj,set,bindingInterface):null;"+k.l10nCompute+";return instance}");return h}}},"9.js":function(c,F,a,p,w,z,M){function h(a){return a instanceof e?a.event_:a||p.event}function n(a){return"string"==typeof a?G.getElementById(a):
a}function s(a){return a.target||a.srcElement}function v(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}function d(a){a.preventDefault?a.preventDefault():a.returnValue=!1}function A(a,b){(b=n(b))?R(b,a,A):(d(a),v(a))}function D(a){return a.keyCode||a.which||0}function B(a){return a.charCode||a.keyCode||0}function L(a,b){return"number"==typeof a.which?a.which==b.VALUE:!!(a.button&b.BIT)}function H(a){return a.changedTouches?a.changedTouches[0].pageX:"pageX"in a?a.pageX:a.clientX+(G.documentElement.scrollLeft||
G.body.scrollLeft)}function S(a){return a.changedTouches?a.changedTouches[0].pageY:"pageY"in a?a.pageY:a.clientY+(G.documentElement.scrollTop||G.body.scrollTop)}function O(a){var b=0;"wheelDelta"in a?b=a.wheelDelta:"DOMMouseScroll"==a.type&&(b=-a.detail);return b/Math.abs(b)}function x(a){var b=m(g[a.type]),c=T[a.type],d=new e(a);if(c)c.handler.call(c.thisObject,d),A(a);else if(b)for(a=b.length;0<a--;)c=b[a],c.handler.call(c.thisObject,d)}function b(a){var b=T[a];b&&(Q(a,b.handler,b.thisObject),delete T[a])}
function I(a,b,e){var c=g[a];if(c){a=0;for(var d;d=c[a];a++)if(d.handler===b&&d.thisObject===e)return}else ca?R(G,a,f):G.addEventListener(a,x,!0),c=g[a]=[];c.push({handler:b,thisObject:e})}function Q(a,b,e){var c=g[a];if(c)for(var d=0,l;l=c[d];d++)if(l.handler===b&&l.thisObject===e){c.splice(d,1);c.length||(delete g[a],ca?r(G,a,f):G.removeEventListener(a,x,!0));break}}function R(a,b,c,d){a=n(a);if(!a)throw 28;if("function"!=typeof c)throw 29;a[t]||(a[t]={});var f={handler:c,thisObject:d},l=a[t],V=
l[b];if(V){for(a=0;l=V[a];a++)if(l.handler===c&&l.thisObject===d)return;V.push(f)}else V=l[b]=[f],V.fireEvent=function(a){a=h(a);if(ca&&a&&g[b]&&"undefined"==typeof a.returnValue){x(a);if(!0===a.cancelBubble)return;"undefined"==typeof a.returnValue&&(a.returnValue=!0)}var c=0;a=new e(a);for(var l;l=V[c++];)l.handler.call(l.thisObject,a)},W?a.addEventListener(b,V.fireEvent,!1):a.attachEvent("on"+b,V.fireEvent)}function r(a,b,e,c){a=n(a);var d=a[t];if(d&&(d=d[b]))for(var l=0,g;g=d[l];l++)if(g.handler===
e&&g.thisObject===c){d.splice(l,1);d.length||k(a,b);break}}function k(a,b){a=n(a);var e=a[t];if(e)if("string"!=typeof b)for(b in e)k(a,b);else{var c=e[b];c&&(a.removeEventListener?a.removeEventListener(b,c.fireEvent,!1):a.detachEvent("on"+b,c.fireEvent),delete e[b])}}function q(a){return function(b,e){return a(h(b),e)}}var G=p.document,f=a.fn.$null,m=a.array.from,W=!!G.addEventListener,t="__basisEvents";c={BACKSPACE:8,TAB:9,CTRL_ENTER:10,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,ESCAPE:27,SPACE:32,
PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123};var C={VALUE:1,BIT:1},u={VALUE:2,BIT:4},$={VALUE:3,BIT:2},ba={mousewheel:["mousewheel","DOMMouseScroll"]},e=a.Class(null,{className:this.path+".Event",KEY:c,init:function(b){b=h(b);a.object.extend(a.object.complete(this,b),{event_:b,sender:s(b),key:D(b),charCode:B(b),mouseLeft:L(b,C),mouseMiddle:L(b,u),mouseRight:L(b,$),mouseX:H(b),
mouseY:S(b),wheelDelta:O(b)})},stopBubble:function(){v(this.event_)},stopPropagation:function(){v(this.event_)},preventDefault:function(){d(this.event_)},die:function(){this.stopBubble();this.preventDefault()}}),g={},T={},ca=!W,N={};F.exports={W3CSUPPORT:W,browserEvents:function(a){return ba[a]||[a]},getEventInfo:function(a,b){b||(b="div");var e=b+"-"+a;if(N[e])return N[e];var c=!1,d=!1;if(!W){var l="on"+a,g=G.createElement("div"),f=g.appendChild(G.createElement(b));g[l]=function(){d=!0};try{f.fireEvent(l),
c=!0}catch(P){}}return N[e]={supported:c,bubble:d}},KEY:c,MOUSE_LEFT:C,MOUSE_RIGHT:$,MOUSE_MIDDLE:u,Handler:function(a,b){this.handler=a;this.thisObject=b},Event:e,sender:q(s),cancelBubble:q(v),cancelDefault:q(d),kill:q(A),key:q(D),charCode:q(B),mouseButton:q(L),mouseX:q(H),mouseY:q(S),wheelDelta:q(O),addGlobalHandler:I,removeGlobalHandler:Q,captureEvent:function(a,e,c){T[a]&&b(a);I(a,e,c);T[a]={handler:e,thisObject:c}},releaseEvent:b,addHandler:R,addHandlers:function(a,b,e){a=n(a);for(var c in b)R(a,
c,b[c],e)},removeHandler:r,clearHandlers:k,fireEvent:function(a,b,e){a=n(a);(a=a[t])&&a[b]&&a[b].fireEvent(e)},onUnload:function(a,b){R(p,"unload",a,b)},wrap:h}},"8.js":function(c,F,a,p,w,z,M){function h(b){b=a.template.getL10nTemplate(b);var e=b.templateId,c=ba[e];c||(c=ba[e]=new g(b.source));return c}function n(a){return function(b){b=new d.Event(b);if(!b||"click"!=b.type||3!=b.which){var e=b.sender,c;if(e){do if(c=e.getAttributeNode&&e.getAttributeNode(a))break;while(e=e.parentNode);if(e&&c){var g=
e,f,k;do if(f=e.basisTemplateId,"number"==typeof f&&(k=s(f)))break;while(e=e.parentNode);if(k&&k.action)for(e=c.nodeValue.trim().split(" "),b.actionTarget=g,g=0;c=e[g++];)k.action.call(k.context,c,b)}}}}}function s(a){var b=W[a&4095];return b&&b.instances[a>>12]}a.require("9.js");a.require("3.js");a.require("7.js");a.require("a.js");c=this.path;var v=p.document,d=a.dom.event,A=a.string.camelize,D=a.l10n.token,B=a.template.htmlfgen.getFunctions,L=a.template.TemplateSwitchConfig;w=a.template.TemplateSwitcher;
z=a.template.Template;var H=a.template.TYPE_ELEMENT,S=a.template.TYPE_ATTRIBUTE,O=a.template.TYPE_TEXT,x=a.template.TYPE_COMMENT,b=a.template.TOKEN_TYPE,I=a.template.TOKEN_BINDINGS,Q=a.template.TOKEN_REFS,R=a.template.ATTR_NAME,r=a.template.ATTR_VALUE,k=a.template.ATTR_NAME_BY_TYPE,q=a.template.ELEMENT_NAME,G=a.template.TEXT_VALUE,f=a.template.COMMENT_VALUE,m={},W={},t={svg:"http://www.w3.org/2000/svg"},C=!v.addEventListener&&"__basisTemplate"+parseInt(1E9*Math.random());C&&(p[C]=function(a,b){d.fireEvent(v,
a);var e=m[a];e&&e(b)});var u=function(){var a=v.createElement("div");a.appendChild(v.createTextNode("a"));a.appendChild(v.createTextNode("a"));return 1==a.cloneNode(!0).childNodes.length}(),$=function(){var a=v.createElement("div");a.setAttribute("class","a");return!a.className}(),ba={},e=function(a,c){function g(a,b){var e="event-"+a;if(!m[a]&&(m[a]=n(e),!C))for(var c=0,l=d.browserEvents(a),f;f=l[c++];)d.addGlobalHandler(f,m[a]);C&&s.setAttribute("on"+a,C+'("'+a+'",event)');s.setAttribute(e,b)}
function h(a,b){$&&"class"==a&&(a="className");s.setAttribute(a,b)}for(var s=c||v.createDocumentFragment(),T=c?4:0,p;p=a[T];T++)switch(p[b]){case H:var l=p[q],V=l.split(/:/),l=1<V.length?v.createElementNS(t[V[0]],l):v.createElement(l);e(p,l);s.appendChild(l);break;case S:var l=p[R],V=p[r],aa=l.replace(/^event-/,"");aa!=l?g(aa,V):("class"!=l&&"style"!=l?!p[I]:V)&&h(l,V||"");break;case 4:case 5:(V=p[r-1])&&h(k[p[b]],V);break;case 6:g(p[1],p[2]||p[1]);break;case x:s.appendChild(v.createComment(p[f]||
(p[Q]?"{"+p[Q].join("|")+"}":"")));break;case O:u&&T&&a[T-1][b]==O&&s.appendChild(v.createComment("")),s.appendChild(v.createTextNode(p[G]||(p[Q]?"{"+p[Q].join("|")+"}":"")||(p[I]?"{"+p[I]+"}":"")))}return s};M=function(){function b(){this.set(this.name,this.value)}function c(e,d,g){var P=d&&d.bindingBridge,f=this.attaches&&this.attaches[e],K=null;if(P||f)if(P){if(f&&d===f.value)K=d&&"markup"==d.type?f.tmpl:null;else{f&&(f.tmpl&&(f.tmpl.element.toString=null,h(f.value).clearInstance(f.tmpl)),f.value.bindingBridge.detach(f.value,
b,f));if("markup"==d.type&&d instanceof a.l10n.Token){var k=h(d),q=this.context,r=this.bindings,m=this.bindingInterface,K=k.createInstance(q,null,function Z(){K=s.tmpl=k.createInstance(q,null,Z,r,m);K.element.toString=function(){return d.value};b.call(s)},r,m);K.element.toString=function(){return d.value}}this.attaches||(this.attaches=new g);var s=this.attaches[e]={name:e,value:d,tmpl:K,set:this.tmpl.set};P.attach(d,b,s)}if(K)return K.element;d=P.get(d)}else f&&(f.tmpl&&(f.tmpl.element.toString=null,
h(f.value).clearInstance(f.tmpl)),f.value.bindingBridge.detach(f.value,b,f),this.attaches[e]=null);return d}function d(a,b){return function(e){for(var c=0,d;d=a[c];c++)this(d,b[d](e))}}var g=/\s+/,f="function"==typeof Node&&v instanceof Node?function(a,b,e){a=e instanceof Node&&!e.basisNodeInUse?e:a;a!==b&&b.parentNode.replaceChild(a,b);return a}:function(a,b,e){e=e&&"object"==typeof e&&!e.basisNodeInUse?e:a;if(e!==b)try{b.parentNode.replaceChild(e,b)}catch(c){e=a,b!==e&&b.parentNode.replaceChild(e,
b)}return e},k=function(a,b,e,c){e!==c&&(c?a.setAttribute(b,c):a.removeAttribute(b));return c},q={bind_textNode:function(a,b,e){b=f(a,b,e);b===a&&(a.nodeValue=e);return b},bind_node:f,bind_element:function(a,b,e){b=f(a,b,e);b===a&&"string"==typeof e&&(a.innerHTML=e);return b},bind_comment:f,bind_attr:k,bind_attrClass:p.DOMTokenList&&v&&v.documentElement.classList instanceof p.DOMTokenList?function(b,e,c,d,g){var f=c?d+c:"";f!=e&&(e&&b.classList.remove(e),f&&(b.classList.add(f),g&&(b.classList.add(f+
"-anim"),a.nextTick(function(){b.classList.remove(f+"-anim")}))));return f}:function(b,e,c,d,f){var K=c?d+c:"";if(K!=e){c=b.className;var k="string"!=typeof c;k&&(c=c.baseVal);c=c.split(g);e&&c.remove(e);K&&(c.push(K),f&&(c.add(K+"-anim"),a.nextTick(function(){var a=(k?b.className.baseVal:b.className).split(g);a.remove(K+"-anim");k?b.className.baseVal=a.join(" "):b.className=a.join(" ")})));k?b.className.baseVal=c.join(" "):b.className=c.join(" ")}return K},bind_attrStyle:function(a,b,e,c){if(e!==
c)try{a.style[A(b)]=c}catch(d){}return c},resolve:c,l10nToken:D,createBindingFunction:function(a){var b={};return function(e,c,g,f){if(!e)return{};var k="bindingId"in e?e.bindingId:null,q=b[k];if(!q){for(var q=[],h={},r={},m={},s=!1,n=0,T;T=a[n];n++){var p=e[T],t=p&&p.getter;if(t&&(h[T]=t,q.push(T),p.events))for(var p=String(p.events).trim().split(/\s+|\s*,\s*/),t=0,u;u=p[t];t++)r[u]?r[u].push(T):r[u]=[T]}for(u in r)s=!0,m[u]=d(r[u],h);q={names:q,sync:d(q,h),handler:s?m:null};k&&(b[k]=q)}c&&g&&q.sync.call(g,
c);if(!f)return{};q.handler&&f.attach(c,q.handler,g);return q.handler}}};return function(a){var b=B(a,!0,this.source.url,a.source_,!u),d,g={},f={},K=[],h=0,r=e(a),m=function(){return r.cloneNode(!0)},s=this.templateId;W[s]={template:this,instances:g};if(b.createL10nSync){var T=b.createL10nSync(r,f,k,u);a=0;for(var n;n=b.l10nKeys[a];a++)T(n,D(n).value);if(b.l10nKeys)for(a=0;n=b.l10nKeys[a];a++)n={path:n,token:D(n),handler:function(a){T(this.path,a);for(var b in g)g[b].tmpl.set(this.path,a)}},n.token.attach(n.handler,
n),K.push(n),n=null}d=b.createInstance(s,g,m,q,f,u);return{createInstance:function(a,b,e,c,l){var f=h++;a=d(f,a,b,e,c,l);g[f]=a;return a.tmpl},destroyInstance:function(a){a=a.templateId_;var b=g[a];if(b){b.handler&&b.bindingInterface.detach(b.context,b.handler,b.tmpl.set);for(var e in b.attaches)c.call(b,e,null);delete g[a]}},keys:b.keys,destroy:function(a){for(var e=0,l;l=K[e];e++)l.token.detach(l.handler,l);for(var d in g)if(e=g[d],a&&e.rebuild&&e.rebuild.call(e.context),!a||d in g)for(d in e.handler&&
e.bindingInterface.detach(e.context,e.handler,e.tmpl.set),e.attaches)c.call(d,null);W[s]&&W[s].instances===g&&delete W[s];g=T=K=f=r=m=b=null}}}}();var g=z.subclass({className:c+".Template",__extend__:function(a){return a instanceof g?a:a instanceof L?new T(a):new g(a)},builder:M}),T=w.subclass({className:c+".TemplateSwitcher",templateClass:g});F.exports={Template:g,TemplateSwitcher:T};a.template.extend({buildHtml:e,resolveTemplateById:function(a){return(a=W[a&4095])&&a.template},resolveObjectById:function(a){return(a=
s(a))&&a.context},resolveTmplById:function(a){return(a=s(a))&&a.tmpl}})},"7.js":function(c,F,a,p,w,z,M){function h(b){"string"==typeof b&&(b=a.l10n.token(b));if(!b)return null;var e=b.basisObjectId,c=K[e];c||(c=K[e]=new da(new ia(b)));return c}function n(e){X[b.extname(e)]&&a.resource(e)().startUse()}function s(e){X[b.extname(e)]&&a.resource(e)().stopUse()}function v(){this.destroyBuilder&&D.call(this);for(var a=0,b;b=this.attaches_[a];a++)b.handler.call(b.context)}function d(a){for(var b=[],e=0;e<
a.length;e++)b.push(Array.isArray(a[e])?d(a[e]):a[e]);return b}function A(b,e,c,l){var g=b,f;"function"==typeof g&&(e="baseURI"in b?b.baseURI:e,f="url"in b?b.url:f,g=g());g instanceof a.Token&&(e="baseURI"in b?b.baseURI:e,f="url"in b?b.url:f,g=g.get());Array.isArray(g)?(c&&(g=d(g)),g={tokens:g}):"object"==typeof g&&Array.isArray(g.tokens)||(g=String(g));"string"==typeof g&&(g=ja(g,e,l,f));return g}function D(){var a=A(this.source,this.baseURI),b=this.destroyBuilder,e=this.builder(a.tokens,this),c=
this.deps_;if(c){this.deps_=null;for(var l=0,d;d=c[l];l++)d.bindingBridge.detach(d,D,this)}if(a.deps&&a.deps.length)for(this.deps_=c=a.deps,l=0;d=c[l];l++)d.bindingBridge.attach(d,D,this);this.createInstance=e.createInstance;this.clearInstance=e.destroyInstance;this.getBinding=function(){return{names:[],events:{},handler:null,sync:function(){}}};this.destroyBuilder=e.destroy;if(a=a.resources&&0<a.resources.length?a.resources:null)for(l=0;e=a[l];l++)n(e);if(this.resources)for(l=0;e=this.resources[l];l++)s(e);
this.resources=a;b&&b(!0)}function B(a){return function(){var b;b=(b=document.getElementById(a))&&"SCRIPT"==b.tagName?"text/basis-template"==b.type?b.textContent||b.text:"":"";return b}}function L(){var b=a.array(arguments).join("."),e=ga[b];e||(e=new ka("",b),ga[b]=e);return e}function H(a,b){for(var e=[],c={},l=[],d=0;d<b.length;d++)c[b[d]]||(c[b[d]]=!0,l.push(b[d]));e.source=l.join("/");c={base:!0};for(l=0;l<b.length;l++)d=b[l]||"base",d==a||c[d]||(O(d),c[d]=!0,e.push(d),b.splice.apply(b,[l+1,
0].concat(ea[d].fallback)));e.unshift(a);"base"!=a&&e.push("base");e.value=e.join("/");return e}function S(a,b){for(var e=ea[a].sourcesList,c=0,l;l=e[c];c++)if(l.hasOwnProperty(b))return l[b];return""}function O(e){e||(e="base");if(ea[e])return ea[e].theme;if(!/^([a-z0-9\_\-]+)$/.test(e))throw 27;var c={},l=[c],d=new Z;ea[e]={theme:d,sources:c,sourcesList:l,fallback:[]};var g=function(a,b){!1==a in c&&(c[a]=b,-1!=ea[ha].fallback.indexOf(e)&&L(a).set());return L(a)};a.object.extend(d,{name:e,fallback:function(a){if(d!==
pa&&0<arguments.length){var b="string"==typeof a?a.split("/"):[],c={},b=H(e,b);if(ea[e].fallback.source!=b.source){ea[e].fallback.source=b.source;for(var l in ea){var g=ea[l].fallback,b=H(l,(g.source||"").split("/"));if(b.value!=g.value){c[l]=!0;ea[l].fallback=b;g=ea[l].sourcesList;g.length=b.length;for(var f=0;f<g.length;f++)g[f]=ea[b[f]].sources}}}for(l in c)if(-1!=ea[ha].fallback.indexOf(l)){b=void 0;for(b in ga)L(b).set();break}}b=ea[e].fallback.slice(1);b.source=ea[e].fallback.source;return b},
define:function(a,b){"function"==typeof a&&(a=a());if("string"==typeof a){if("object"==typeof b){var e=a,c=b,l={},f;for(f in c)c.hasOwnProperty(f)&&(l[f]=g(e+"."+f,c[f]));return l}return 1==arguments.length?L(a):g(a,b)}if("object"==typeof a){c=a;for(e in c)c.hasOwnProperty(e)&&g(e,c[e]);return d}},apply:function(){if(e!=ha){ha=e;for(var a in ga)L(a).set();a=0;for(var b;b=qa[a];a++)b.fn.call(b.context,e)}return d},getSource:function(a){return a?S(e,b):c[b]},drop:function(a){c.hasOwnProperty(a)&&(delete c[a],
-1!=ea[ha].fallback.indexOf(e)&&L(a).set())}});ea[e].fallback=H(e,[]);l.push(ea.base.sources);return d}a.require("3.js");c=this.path;p=a.Class;var x=a.cleaner,b=a.path,I=a.array.search,Q=a.array.add,R=a.array.remove,r=[],k={},q=1,G=2,f=4,m=6,W=3,t=8,C=0,u=1,$=2,ba=3,e=4,g={4:"class",5:"style"},T={"class":f,style:5},ca=4,N=/((?:.|[\r\n])*?)(\{(?:l10n:([a-zA-Z_][a-zA-Z0-9_\-]*(?:\.[a-zA-Z_][a-zA-Z0-9_\-]*)*(?:\.\{[a-zA-Z_][a-zA-Z0-9_\-]*\})?)\})?|<(\/|!--(\s*\{)?)?|$)/g,y=/([a-z_][a-z0-9\-_]*)(:|\{|\s*(\/?>)?)/ig,
E=/([a-z_][a-z0-9_\-]*)(:|\{|=|\s*)|(\/?>)/ig,Y=/(.|[\r\n])*?--\x3e/g,fa=/([a-z_][a-z0-9_\-]*(?::[a-z_][a-z0-9_\-]*)?)>/ig,U=/([a-z_][a-z0-9_]*)(\||\}\s*)/ig,l=/"((?:(\\")|[^"])*?)"\s*/g,V=/^/g,aa={text:/((?:.|[\r\n])*?)(?:<\/b:text>|$)/g},P=/\\"/g,J=function(a){var b=[],e=[],c={childs:b},d,g,f,K=!1,J=0,k,h=N,r=0,m;for(a=a.trim();r<a.length||h!=N;)if(d=h.lastIndex=r,(m=h.exec(a))&&m.index===r){r=h.lastIndex;switch(h){case N:k=d+m[1].length;J!=k&&(d=J==d?m[1]:a.substring(J,k),(g=d.replace(/\s*(\r\n?|\n\r?)\s*/g,
""))&&c.childs.push({type:W,len:d.length,value:g}));J=k;m[3]?c.childs.push({type:W,refs:["l10n:"+m[3]],value:"{l10n:"+m[3]+"}"}):"{"==m[2]?(f=r-1,c.childs.push(g={type:W}),h=U):m[4]?"/"==m[4]?(g=null,h=fa):(c.childs.push(g={type:t}),m[5]?(f=r-m[5].length,h=U):(f=r,h=Y)):m[2]&&(K=!0,e.push(c),c.childs.push(g={type:q,attrs:[],childs:[]}),c=g,h=y);break;case fa:m[1]!==(c.prefix?c.prefix+":":"")+c.name?c.childs.push({type:W,value:"</"+m[0]}):c=e.pop();h=N;break;case y:case E:if(":"==m[2]){g.prefix?h=
V:g.prefix=m[1];break}m[1]&&(g.name=m[1],g.type==G&&c.attrs.push(g));if("{"==m[2]){h=g.type==q?U:V;break}if(m[3]){K=!1;if("/>"==m[3])c=e.pop();else if("b"==c.prefix&&c.name in aa){h=aa[c.name];break}h=N;break}if("="==m[2]){h=l;break}g={type:G};h=E;break;case Y:g.value=a.substring(f,r-3);h=N;break;case U:g.refs?g.refs.push(m[1]):g.refs=[m[1]];"|"!=m[2]&&(g.type==W?(r-=m[2].length-1,g.value=a.substring(f,r),h=N):g.type==t?h=Y:g.type==G&&"="==a[r]?(r++,h=l):(g={type:G},h=E));break;case l:g.value=m[1].replace(P,
'"');g={type:G};h=E;break;case aa.text:c.childs.push({type:W,value:m[1]});c=e.pop();h=N;break;default:throw 25;}h==N&&(J=r)}else if(h==U&&g&&g.type==t)h=Y;else{K&&(c=e.pop());g&&c.childs.pop();if(g=c.childs.pop())g.type!=W||g.refs?c.childs.push(g):J-="len"in g?g.len:g.value.length;K=!1;h=N}J!=r&&c.childs.push({type:W,value:a.substring(J,r)});b.templateTokens=!0;return b},K={},ia=a.Token.subclass({className:c+".L10nProxyToken",token:null,url:"",init:function(a){this.url=a.dictionary.resource.url+":"+
a.name;this.token=a;this.set();a.attach(this.set,this)},set:function(){return a.Token.prototype.set.call(this,"markup"==this.token.type?'<span class="basisjs-markup" data-basisjs-l10n="'+(this.token.name+"@"+this.token.dictionary.resource.url)+'">'+String(this.token.value)+"</span>":"")},destroy:function(){a.Token.prototype.destroy.call(this);this.token=null}}),ja=function(){function c(a){return(a.prefix?a.prefix+":":"")+a.name}function l(a,b){w[b]||("#"==b.charAt(0)?w[b]=String.fromCharCode("x"==
b.charAt(1)||"X"==b.charAt(1)?parseInt(b.substr(2),16):b.substr(1)):Z&&(Z.innerHTML=a,w[b]=Z.firstChild?Z.firstChild.nodeValue:a));return w[b]||a}function d(a){return(a=a.refs)&&a.length?a:0}function P(a,b){function e(a){for(var b,c=[],g=[],d={},f=0;f<a.length;f++)f%2?(b=a[f],d[b]||(d[b]=c.length,c.push(b)),g.push(d[b])):a[f]&&g.push(a[f].replace(H,l));return[c,g]}var c=0,d,g;if(b)switch(a){case "class":if(d=b.match(v)){for(var f=[],c=[],K=0,J;J=d[K];K++)(g=J.match(x))?c.push([g[1]||"",g[2]]):f.push(J);
b=f.join(" ")}break;case "style":f=[];c=[];if(d=b.match(z))for(K=0;J=d[K];K++)g=J.match(X),J=g[1],b=g[2].trim(),g=b.split(E),1<g.length?(g=e(g),g.push(J),c.push(g)):f.push(J+": "+b.replace(H,l));f.push("");b=f.join(";");break;default:d=b.split(B),1<d.length?c=e(d):b=b.replace(H,l)}c&&!c.length&&(c=0);return{binding:c,value:b,type:T[a]||2}}function K(a,b,e){a=a.attrs;for(var l=[],g,f=0,J;J=a[f];f++)if("b"==J.prefix)switch(J.name){case "ref":for(J=(J.value||"").trim().split(/\s+/),g=0;g<J.length;g++)k(b,
J[g])}else if(g=J.name.match(/^event-(.+)$/))l.push(g[1]==J.value?[m,g[1]]:[m,g[1],J.value]);else{g=P(J.name,J.value);var h=[g.type,g.binding,d(J)];2==g.type&&h.push(c(J));!g.value||e&&g.binding&&2==g.type||h.push(g.value);l.push(h)}return l.length?l:0}function k(a,b){a[$]||(a[$]=[]);Q(a[$],b);"element"!=b&&(a[u]=1==a[$].length?b:0)}function V(a,b){var e=a[$].indexOf(b);if(-1!=e){var c=a[u]&&"number"==typeof a[u];a[$].splice(e,1);c&&e==a[u]-1&&(a[u]=b);a[$].length?c&&(a[u]-=e<a[u]-1):a[$]=0}}function aa(a){var b=
{};if(a.attrs)for(var e=0,l;l=a.attrs[e];e++)b[c(l)]=l.value;return b}function s(a,b){for(var e=0;e<b.length;e++)Q(a,b[e])}function n(f,m,y){function v(a,b,c){a=aa(a);b&&(a.name=b);if(a.name&&ja.test(a.name)){var l=D[a.ref||"element"];if(l&&l.token[C]==q){b=l.token;var d=T[a.name],f=e-!!d,J=b&&I(b,a.name,function(a){return d?g[a[C]]:a[ba]});J||"remove"==c||(J=[d||G,0,0],d||J.push(a.name),J.push(""),b||(b=[],l.token.push(b)),b.push(J));l="class"==a.name||"style"==a.name;switch(c){case "set":c=P(a.name,
a.value);J[u]=c.binding;y.optimizeSize&&J[u]&&!l?J.length=f:J[f]=c.value||"";if(l&&!J[u]&&!J[f]){R(b,J);break}break;case "append":c=P(a.name,a.value);if(c.binding){var K=J[u];if(K){if("style"==a.name){for(var k={},m=0,h;h=c.binding[m];m++)k[h[2]]=!0;h=m=0;for(var V;V=K[m];m++)k[V[2]]||(K[h++]=V);K.length=h}K.push.apply(K,c.binding)}else J[u]=c.binding}c.value&&(J[f]+=(J[f]&&"class"==a.name?" ":"")+c.value);if(l&&!J[u]&&!J[f]){R(b,J);break}break;case "remove":J&&R(b,J)}}}}for(var x=[],z=0,X,E;X=f[z];z++){var B=
d(X),w=B&&1==B.length?B[0]:0;switch(X.type){case q:if("b"==X.prefix){var Z=aa(X);switch(X.name){case "resource":case "style":Z.src&&m.resources.push(b.resolve(m.baseURI+Z.src));break;case "l10n":Z.src&&(m.dictURI=b.relative(a.path.baseURI,m.baseURI+Z.src));break;case "define":if("name"in Z&&!m.defines[Z.name])switch(Z.type){case "bool":m.defines[Z.name]=["true"==Z["default"]?1:0];break;case "enum":X=Z.values?Z.values.trim().split(" "):[],m.defines[Z.name]=[X.indexOf(Z["default"])+1,X]}break;case "text":X=
X.childs[0];f[z--]=a.object.extend(X,{refs:(Z.ref||"").trim().split(/\s+/),value:"notrim"in Z?X.value:X.value.replace(/^\s*[\r\n]+|[\r\n]\s*$/g,"")});break;case "include":if(w=Z.src){w=(B=/^#\d+$/.test(w))?w.substr(1):w;w=B?r[w]:/^[a-z0-9\.]+$/i.test(w)&&!/\.tmpl$/.test(w)?L(w):a.resource(b.resolve(m.baseURI+w));if(!w)continue;if(-1==ea.indexOf(w)){Q(m.deps,w);ea.push(w);B?(w.source.bindingBridge&&Q(m.deps,w.source),B=A(w.source,w.baseURI,!0,y)):B=A(w,w.url?b.dirname(w.url)+"/":"",!0,y);ea.pop();
B.resources&&!1=="no-style"in Z&&s(m.resources,B.resources);B.deps&&s(m.deps,B.deps);var D=p(B.tokens),w=(X.childs||[]).slice();Z["class"]&&w.push({type:q,prefix:"b",name:"append-class",attrs:[{type:G,name:"value",value:Z["class"]}]});Z.id&&w.push({type:q,prefix:"b",name:"set-attr",attrs:[{type:G,name:"name",value:"id"},{type:G,name:"value",value:Z.id}]});Z.ref&&D.element&&Z.ref.trim().split(/\s+/).map(function(a){k(D.element.token,a)});for(var Z=0,N;N=w[Z];Z++)if(N.type==q&&"b"==N.prefix)switch(N.name){case "replace":case "before":case "after":var da=
aa(N);if(X=da.ref&&D[da.ref]){var da=X.owner.indexOf(X.token),F;-1!=da&&(da+="after"==N.name,F="replace"==N.name,X.owner.splice.apply(X.owner,[da,F].concat(n(N.childs,m,y)||[])))}break;case "prepend":case "append":da=aa(N);(X=(X=(X="ref"in da?da.ref:"element")&&D[X])&&X.token)&&X[C]==q&&(da=n(N.childs,m,y)||[],"prepend"==N.name?X.splice.apply(X,[ca,0].concat(da)):X.push.apply(X,da));break;case "attr":case "set-attr":v(N,!1,"set");break;case "append-attr":v(N,!1,"append");break;case "remove-attr":v(N,
!1,"remove");break;case "class":case "append-class":v(N,"class","append");break;case "set-class":v(N,"class","set");break;case "remove-class":v(N,"class","remove");break;case "add-ref":da=aa(N);(X=(X=(X="ref"in da?da.ref:"element")&&D[X])&&X.token)&&da.name&&k(X,da.name);break;case "remove-ref":da=aa(N),(X=(X=(X="ref"in da?da.ref:"element")&&D[X])&&X.token)&&V(X,da.name||da.ref)}else B.tokens.push.apply(B.tokens,n([N],m,y)||[]);D.element&&V(D.element.token,"element");x.push.apply(x,B.tokens)}}}continue}E=
[1,w,B,c(X)];E.push.apply(E,K(X,E,y.optimizeSize)||[]);E.push.apply(E,n(X.childs,m,y)||[]);break;case W:B&&2==B.length&&I(B,"element")&&(w=B[+!B.lastSearchIndex]);if(w&&(Z=ia(w,m.dictURI).split(/[:@\{]/),"l10n"==Z[0]&&3==Z.length))if(Z[2]){if(Z=Z.slice(1).join("@"),Z=a.l10n.token(Z),N=h(Z),m.l10nResolved=!0,N&&"markup"==Z.type){f[z--]=J('<b:include src="#'+N.templateId+'"/>')[0];continue}}else R(B,w),0==B.length&&(B=null),w=0,X.value=X.value.replace(/\}$/,"@undefined}");E=[3,w,B];B&&X.value=="{"+
B.join("|")+"}"||E.push(X.value.replace(H,l));break;case t:if(y.optimizeSize&&!w&&!B)continue;E=[8,w,B];y.optimizeSize||B&&X.value=="{"+B.join("|")+"}"||E.push(X.value.replace(H,l))}for(;0===E[E.length-1];)E.pop();x.push(E)}return x.length?x:0}function ia(a,b){if("string"!=typeof a)return a;var e=a.split(":");2==e.length&&"l10n"==e[0]&&-1==e[1].indexOf("@")&&(e[1]=e[1]+"@"+b);return e.join(":")}function p(a,b,e,c){e||(e={});c=c||0;for(var l;l=a[c];c++)if(l[C]!=m){var g=l[$];if(g)for(var d=g.length-
1,f;f=g[d];d--)-1!=f.indexOf(":")?V(l,f):(e[f]&&V(e[f].token,f),l[u]==f&&(l[u]=d+1),e[f]={owner:a,token:l});switch(l[C]){case W:l[u]=ia(l[u],b);break;case G:if(l[u])for(l=l[u][0],d=0;d<l.length;d++)l[d]=ia(l[d],b);break;case q:p(l,b,e,ca)}}return e}function y(a,b,c,l){var g=0;l=l||0;for(var d;d=a[l];l++)if(d[C]==q&&(g+=y(d,b,c,ca)),d[C]==f||d[C]==G&&"class"==d[ba]){var P=d[u],J=e-(d[C]==f);if(P){for(var K=(d[J]||"").trim().split(" "),k=0,m;m=P[k];k++)if(!(2<m.length)){var h=m[1].split(":").pop(),
V=b.defines[h];V?(m.push.apply(m,V),V.used=!0,V[0]&&(1==V.length?Q(K,m[0]+h):Q(K,m[0]+V[1][V[0]-1]))):g++}d[J]=K.join(" ");c.optimizeSize&&!d[J]&&(d.length=J)}}return g}var ja=/^[a-z_][a-z0-9_\-]*$/i,v=/(\S+)/g,x=/^([a-z_][a-z0-9_\-]*)?\{((anim:)?[a-z_][a-z0-9_\-]*)\}$/i,z=/\s*[^:]+?\s*:(?:\(.*?\)|".*?"|'.*?'|[^;]+?)+(?:;|$)/gi,X=/\s*([^:]+?)\s*:((?:\(.*?\)|".*?"|'.*?'|[^;]+?)+);?$/i,E=/\{([a-z_][a-z0-9_]*)\}/i,B=/\{([a-z_][a-z0-9_]*|l10n:[a-z_][a-z0-9_]*(?:\.[a-z_][a-z0-9_]*)*(?:\.\{[a-z_][a-z0-9_]*\})?)\}/i,
H=/&([a-z]+|#[0-9]+|#x[0-9a-f]{1,4});?/gi,w=a.NODE_ENV?require("./template/htmlentity.json"):{},Z=a.NODE_ENV?null:document.createElement("div"),ea=[];return function(b,e,c,l){c=c||{};var g=[],d={sourceUrl:l,baseURI:e||"",tokens:null,resources:[],deps:[],defines:{},unpredictable:!0,warns:g};d.dictURI=l?a.path.relative(a.path.baseURI,d.baseURI+a.path.basename(l,a.path.extname(l))+".l10n"):e||"";b.templateTokens?b.warns&&g.push.apply(g,b.warns):b=J(""+b);d.tokens=n(b,d,c);d.tokens||(d.tokens=[[3,0,0,
""]]);k(d.tokens[0],"element");p(d.tokens,d.dictURI);d.unpredictable=!!y(d.tokens,d,c);delete d.defines;delete d.l10nResolved;g.length||(d.warns=!1);return d}}(),X={".css":!0},da=p(null,{className:c+".Template",__extend__:function(a){return a instanceof da?a:a instanceof ma?new oa(a):new da(a)},source:"",baseURI:"",init:function(a){if(4096==r.length)throw 26;this.attaches_=[];this.setSource(a||"");this.templateId=r.push(this)-1},bindingBridge:{attach:function(a,b,e){for(var c=0,l;l=a.attaches_[c];c++)if(l.handler==
b&&l.context==e)return;a.attaches_.push({handler:b,context:e})},detach:function(a,b,e){for(var c=0,l;l=a.attaches_[c];c++)if(l.handler==b&&l.context==e){a.attaches_.splice(c,1);break}},get:function(){}},createInstance:function(a,b,e,c,l){D.call(this);return this.createInstance(a,b,e,c,l)},clearInstance:function(a){},getBinding:function(a){D.call(this);return this.getBinding(a)},setSource:function(e){var c=this.source;if(c!=e){if("string"==typeof e){var l=e.match(/^([a-z]+):/);if(l){var d=l[1];e=e.substr(l[0].length);
switch(d){case "file":e=a.resource(e);break;case "id":e=B(e);break;case "tokens":e=a.string.toObject(e);e.isDecl=!0;break;case "path":e=L(e)}}}if(c&&c.bindingBridge){if(l=c.url&&k[c.url])R(l,this),l.length||delete k[c.url];this.baseURI="";this.source.bindingBridge.detach(c,v,this)}e&&e.bindingBridge&&(e.url&&(this.baseURI=b.dirname(e.url)+"/",k[e.url]||(k[e.url]=[]),Q(k[e.url],this)),e.bindingBridge.attach(e,v,this));this.source=e;v.call(this)}},destroy:function(){this.destroyBuilder&&this.destroyBuilder();
this.source=this.resources=this.getBinding=this.createInstance=this.attaches_=null}}),ma=function(b){a.object.extend(this,b)},oa=a.Class(null,{className:c+".TemplateSwitcher",ruleRet_:null,templates_:null,templateClass:da,ruleEvents:null,rule:String,init:function(a){this.ruleRet_=[];this.templates_=[];this.rule=a.rule;if((a=a.events)&&a.length){this.ruleEvents={};for(var b=0,e;e=a[b];b++)this.ruleEvents[e]=!0}x.add(this)},resolve:function(a){a=this.rule(a);var b=this.ruleRet_.indexOf(a);-1==b&&(this.ruleRet_.push(a),
b=this.templates_.push(new this.templateClass(a))-1);return this.templates_[b]},destroy:function(){this.ruleRet_=this.templates_=this.rule=null}}),Z=p(null,{className:c+".Theme",get:L}),ka=p(a.Token,{className:c+".SourceWrapper",path:"",url:"",baseURI:"",init:function(b,e){this.path=e;a.Token.prototype.init.call(this,"")},get:function(){return this.value&&this.value.bindingBridge?this.value.bindingBridge.get(this.value):this.value},set:function(){var a=S(ha,this.path);this.value!=a&&(this.value&&
this.value.bindingBridge&&this.value.bindingBridge.detach(this.value,ka.prototype.apply,this),this.url=(this.value=a)&&a.url||"",this.baseURI=("object"==typeof a||"function"==typeof a)&&"baseURI"in a?a.baseURI:b.dirname(this.url)+"/",this.value&&this.value.bindingBridge&&this.value.bindingBridge.attach(this.value,ka.prototype.apply,this),this.apply())},destroy:function(){this.baseURI=this.url=null;this.value&&this.value.bindingBridge&&this.value.bindingBridge.detach(this.value,this.apply,this);a.Token.prototype.destroy.call(this)}}),
ea={},ga={},pa=O(),ha="base",qa=[];x.add({destroy:function(){for(var a in ga)ga[a].destroy();ga=ea=null;a=0;for(var b;b=r[a];a++)b.destroy();r=null}});F.exports={DECLARATION_VERSION:2,TYPE_ELEMENT:q,TYPE_ATTRIBUTE:G,TYPE_ATTRIBUTE_CLASS:f,TYPE_ATTRIBUTE_STYLE:5,TYPE_ATTRIBUTE_EVENT:m,TYPE_TEXT:W,TYPE_COMMENT:t,TOKEN_TYPE:C,TOKEN_BINDINGS:u,TOKEN_REFS:$,ATTR_NAME:ba,ATTR_VALUE:e,ATTR_NAME_BY_TYPE:g,ELEMENT_NAME:3,ELEMENT_ATTRS:ca,ELEMENT_CHILDS:5,TEXT_VALUE:3,COMMENT_VALUE:3,L10nProxyToken:ia,TemplateSwitchConfig:ma,
TemplateSwitcher:oa,Template:da,SourceWrapper:ka,switcher:function(b,e){var c=a.array(arguments);e=c.pop();return new ma({rule:e,events:c.join(" ").trim().split(/\s+/)})},tokenize:J,getDeclFromSource:A,makeDeclaration:ja,getL10nTemplate:h,Theme:Z,theme:O,getThemeList:function(){return a.object.keys(ea)},currentTheme:function(){return ea[ha].theme},setTheme:function(a){return O(a).apply()},onThemeChange:function(a,b,e){qa.push({fn:a,context:b});e&&a.call(b,ha)},define:pa.define,get:L,getPathList:function(){return a.object.keys(ga)}};
O("base").define({"#1":a.resource("0.tmpl"),"#2":a.resource("1.tmpl"),"#3":a.resource("2.tmpl"),"#4":a.resource("3.tmpl"),"#5":a.resource("4.tmpl"),"#6":a.resource("5.tmpl"),"#7":a.resource("6.tmpl"),"#8":a.resource("7.tmpl"),"#9":a.resource("8.tmpl"),"#a":a.resource("9.tmpl"),"#b":a.resource("a.tmpl"),"#c":a.resource("b.tmpl"),"#d":a.resource("c.tmpl"),"#e":a.resource("d.tmpl"),"#f":a.resource("e.tmpl"),"#g":a.resource("f.tmpl"),"#h":a.resource("g.tmpl"),"#i":a.resource("h.tmpl"),"#j":a.resource("i.tmpl"),
"#k":a.resource("j.tmpl"),"#l":a.resource("k.tmpl"),"#m":a.resource("l.tmpl"),"#n":a.resource("m.tmpl"),"#o":a.resource("n.tmpl"),"#p":a.resource("o.tmpl")})},"6.js":function(c,F,a,p,w,z,M){function h(){}function n(a){var b=a.constructor.prototype;a.setDelegate=b.setDelegate;a.destroy=b.destroy}function s(a){return a.sortingValue||0}function v(a,b){a=a.sortingValue||0;b=b.sortingValue||0;return+(a>b)||-(a<b)}function d(a,b){a=a.sortingValue||0;b=b.sortingValue||0;return-(a>b)||+(a<b)}function A(a){return a.childNodes.sort(a.sortingDesc?
d:v)}function D(a,b,e,c){if(!a.length)return 0;c=!!c;var d,g,f=0,k=a.length-1;do if(d=f+k>>1,g=e(a[d]),c?b>g:b<g)k=d-1;else if(c?b<g:b>g)f=d+1;else return b==g?d:0;while(f<=k);return d+(g<b^c)}function B(a,b,e,c,d){if(b!==e){var g=a,f=[];c&&(a.contextSelection=e,a.selected&&f.push(a));for(;g;){if((c=!g.selection||d&&g===a?g.firstChild:null)&&c.contextSelection!==b)throw 6;for(;!c;){if(g===a){f.length&&(b&&b.remove(f),e&&e.add(f));return}c=g.nextSibling;c||(g=g.parentNode)}g=c;g.selected&&f.push(g);
g.contextSelection=e}}}function L(a,b){a.contextDisabled!=b&&(a.contextDisabled=b,a.disabled||(b?a.emit_disable():a.emit_enable()))}function H(a,b){var e=b.length-1;a.childNodes=b;a.firstChild=b[0]||null;a.lastChild=b[e]||null;for(var c=e;e=b[c];c--)e.nextSibling=b[c+1]||null,e.previousSibling=b[c-1]||null,a.insertBefore(e,e.nextSibling)}function S(a,b){var e;if("function"==typeof a.childFactory&&(e=a.childFactory(b),e instanceof a.childClass))return e;if(!e)throw 9;throw 10;}a.require("4.js");a.require("5.js");
c=this.path;var O=a.Class,x=a.object.complete,b=a.array,I=a.array.remove,Q=a.fn.$undef,R=a.getter,r=a.fn.nullGetter;p=O.oneFunctionProperty;w=a.event.create;var k=a.event.events;z=a.data.SUBSCRIPTION;var q=a.data.STATE,G=a.data.AbstractData,f=a.data.Object,m=a.data.AbstractDataset,W=a.data.Dataset,t=a.data.DatasetWrapper,C={ANY:!0,NONE:!1,PARENT:"parent",OWNER:"owner"},u={};z.addProperty("owner");z.addProperty("dataSource");var $=O.customExtendProperty({},function(a,b){for(var c in b){var d=b[c];
O.isClass(d)&&(d={instanceOf:d});if(d&&"object"==typeof d){var f=!1,K=d.instanceOf,k={},m={key:c,config:k};O.isClass(K)&&K.isSubclassOf(G)||(K=g);k.instanceOf=K;typeof d.config&&(k.config=d.config);"function"==typeof d.existsIf&&(f=k.existsIf=d.existsIf);"function"==typeof d.delegate&&(f=k.delegate=d.delegate);"function"==typeof d.dataSource&&(f=k.dataSource=d.dataSource);if(f){var d=e.__extend__(d.hook||{update:!0}),h;for(h in d)if(d[h]===ba){m.hook=d;break}}a[c]=m}else a[c]=null}}),ba=function(){var a=
this.owner,b=this.context.key,e=this.context.config,c=!e.existsIf||e.existsIf(a),d=a.satellite[b];c?d?(e.delegate&&d.setDelegate(e.delegate(a)),e.dataSource&&d.setDataSource(e.dataSource(a))):(c=("function"==typeof e.config?e.config(a):e.config)||{},c.owner=a,e.delegate&&(c.delegate=e.delegate(a)),e.dataSource&&(c.dataSource=e.dataSource(a)),d=new e.instanceOf(c),a.satellite[b]=d,a.emit_satelliteChanged(b,null),a.listen.satellite&&d.addHandler(a.listen.satellite,a)):d&&(delete a.satellite[b],a.emit_satelliteChanged(b,
d),d.destroy())},e=p(ba,{}),g=O(f,{className:c+".AbstractNode",subscribeTo:f.prototype.subscribeTo+z.DATASOURCE,isSyncRequired:function(){return this.state==q.UNDEFINED||this.state==q.DEPRECATED},syncEvents:{activeChanged:!1},emit_update:function(a){f.prototype.emit_update.call(this,a);if(a=this.parentNode)a.matchFunction&&this.match(a.matchFunction),a.insertBefore(this,this.nextSibling)},listen:{owner:{destroy:function(){this.setOwner()}}},autoDelegate:C.NONE,name:null,childNodes:null,emit_childNodesModified:w("childNodesModified",
"delta")&&function(a){k.childNodesModified.call(this,a);var b=this.listen.childNode,e;if(b){if(e=a.inserted)for(var c=0,d;d=e[c];c++)d.addHandler(b,this);if(e=a.deleted)for(c=0;d=e[c];c++)d.removeHandler(b,this)}},childNodesState:q.UNDEFINED,emit_childNodesStateChanged:w("childNodesStateChanged","oldState"),childClass:g,dataSource:null,emit_dataSourceChanged:w("dataSourceChanged","oldDataSource"),dataSourceWrapper_:null,dataSourceMap_:null,destroyDataSourceMember:!0,parentNode:null,nextSibling:null,
previousSibling:null,firstChild:null,lastChild:null,sorting:r,sortingDesc:!1,emit_sortingChanged:w("sortingChanged","oldSorting","oldSortingDesc"),grouping:null,emit_groupingChanged:w("groupingChanged","oldGrouping"),groupingClass:null,groupNode:null,groupId:NaN,satelliteConfig:$,satellite:null,emit_satelliteChanged:w("satelliteChanged","name","oldSatellite"),owner:null,emit_ownerChanged:w("ownerChanged","oldOwner"),init:function(){f.prototype.init.call(this);var a=this.childNodes,b=this.dataSource;
a&&(this.childNodes=null);b&&(this.dataSource=null);var e=this.grouping;e&&(this.grouping=null,this.setGrouping(e));this.childClass&&(this.childNodes=[],b?this.setDataSource(b):a&&this.setChildNodes(a));a=this.satellite;this.satellite={};if(a)for(var c in a)this.setSatellite(c,a[c]);if(this.satelliteConfig!==$)for(c in this.satelliteConfig)(a=this.satelliteConfig[c])&&"object"==typeof a&&(b={context:a,owner:this},a.hook&&this.addHandler(a.hook,b),ba.call(b));if(c=this.owner)this.owner=null,this.setOwner(c)},
setChildNodesState:function(a,b){var e=String(a),c=this.childNodesState;if(!q.values[e])throw 7;if(c!=e||c.data!=b)this.childNodesState=Object(e),this.childNodesState.data=b,this.emit_childNodesStateChanged(c)},appendChild:function(a){},insertBefore:function(a,b){},removeChild:function(a){},replaceChild:function(a,b){},clear:function(a){},setChildNodes:function(a){},setGrouping:function(a,b){},setSorting:function(a,b){},setDataSource:function(a){},setOwner:function(a){a&&!1!=a instanceof g||(a=null);
if(a&&this.parentNode)throw 8;var b=this.owner;if(b!==a){var e=this.listen.owner;e&&(b&&b.removeHandler(e,this),a&&a.addHandler(e,this));if(b)for(var c in b.satellite)if(b.satellite[c]===this){b.setSatellite(c,null);break}this.owner=a;this.emit_ownerChanged(b);this.autoDelegate!=C.OWNER&&this.autoDelegate!==C.ANY||this.setDelegate(a)}},setSatellite:function(a,b){var e=this.satellite[a];!1==b instanceof G&&(b=null);if(e!=b&&!this.satelliteConfig[a]){var c=this.listen.satellite;e&&(delete this.satellite[a],
e instanceof g&&e.setOwner(null),c&&e.removeHandler(c,this));b&&(this.satellite[a]=b,b instanceof g&&b.setOwner(this),c&&b.addHandler(c,this));this.emit_satelliteChanged(a,e)}},getChildNodesDataset:function(){return u[this.basisObjectId]||new fa({sourceNode:this})},destroy:function(){f.prototype.destroy.call(this);this.dataSource?this.setDataSource():this.firstChild&&this.clear();this.parentNode&&this.parentNode.removeChild(this);this.grouping&&(this.grouping.setOwner(),this.grouping=null);this.owner&&
this.setOwner();if(this.satellite){for(var a in this.satellite){var b=this.satellite[a];b.owner=null;b.destroy()}this.satellite=null}this.lastChild=this.firstChild=this.nextSibling=this.previousSibling=this.parentNode=this.childNodes=null}}),T=O(g,{className:c+".PartitionNode",autoDestroyIfEmpty:!1,nodes:null,first:null,last:null,init:function(){this.nodes=[];g.prototype.init.call(this)},insert:function(a,b){var e=this.nodes,c=b?e.indexOf(b):-1;-1==c?(e.push(a),this.last=a):e.splice(c,0,a);this.first=
e[0];a.groupNode=this;this.emit_childNodesModified({inserted:[a]})},remove:function(a){var b=this.nodes;I(b,a)&&(this.first=b[0]||null,this.last=b[b.length-1]||null,a.groupNode=null,this.emit_childNodesModified({deleted:[a]}));!this.first&&this.autoDestroyIfEmpty&&this.destroy()},clear:function(){if(this.first){for(var a=this.nodes,b=a.length;0<b--;)a[b].groupNode=null;this.nodes=[];this.last=this.first=null;this.emit_childNodesModified({deleted:a});this.autoDestroyIfEmpty&&this.destroy()}},destroy:function(){g.prototype.destroy.call(this);
this.last=this.first=this.nodes=null}}),ca={datasetChanged:function(a){this.setDataSource(a)},destroy:function(){this.setDataSource()}},N={childClass:g,childFactory:null,listen:{dataSource:{itemsChanged:function(e,c){var d={},g=[];if(c.deleted)if(d.deleted=g,this.childNodes.length==c.deleted.length){for(var g=b(this.childNodes),f=0,K;K=g[f];f++)n(K);f=this.dataSource;this.dataSource=null;this.clear(!0);this.dataSource=f;this.dataSourceMap_={}}else for(f=0;K=c.deleted[f];f++){K=K.basisObjectId;var k=
this.dataSourceMap_[K];n(k);delete this.dataSourceMap_[K];this.removeChild(k);g.push(k)}if(c.inserted)for(d.inserted=[],f=0;K=c.inserted[f];f++){var m=k=S(this,{delegate:K});m.setDelegate=a.fn.$undef;m.destroy=h;this.dataSourceMap_[K.basisObjectId]=k;d.inserted.push(k);this.firstChild&&this.insertBefore(k)}this.firstChild?this.emit_childNodesModified(d):this.setChildNodes(d.inserted);if(this.destroyDataSourceMember&&g.length)for(f=0;K=g[f];f++)K.destroy()},stateChanged:function(a){this.setChildNodesState(a.state)},
destroy:function(a){this.dataSource===a&&this.setDataSource()}}},getChild:function(b,e){return a.array.search(this.childNodes,b,e)},getChildByName:function(a){return this.getChild(a,"name")},appendChild:function(a){return this.insertBefore(a)},insertBefore:function(a,b){if(!this.childClass)throw 11;if(a.firstChild)for(var e=this;e=e.parentNode;)if(e===a)throw 12;var c=a&&a instanceof this.childClass;if(this.dataSource&&(!c||this.dataSourceMap_[a.delegate.basisObjectId]!==a))throw 13;c||(a=S(this,
a instanceof f?{delegate:a}:a));if(a.owner)throw 14;var c=a.parentNode===this,d=this.childNodes,g=this.grouping,k=a.groupNode,m=null,h=this.sorting,q,n=!1,T,e=-1,p,t;c&&(p=a.nextSibling,t=a.previousSibling);h!==r&&(b=null,q=this.sortingDesc,T=h(a)||0,c&&(T===a.sortingValue?n=!0:(!p||(q?p.sortingValue<=T:p.sortingValue>=T))&&(!t||(q?t.sortingValue>=T:t.sortingValue<=T))&&(a.sortingValue=T,n=!0)));if(g){m=g.getGroupNode(a,!0);g=m.nodes;if(k===m&&(n||h===r&&p===b))return a;h!==r?k===m&&n?e=p&&p.groupNode===
m?g.indexOf(p):g.length:(e=D(g,T,s,q),a.sortingValue=T):e=b&&b.groupNode===m?g.indexOf(b):g.length;if(e<g.length)b=g[e];else if(m.last)b=m.last.nextSibling;else for(e=m,b=null;(e=e.nextSibling)&&!(b=e.first););if(a===b||c&&p===b)return k!==m&&(k&&k.remove(a),m.insert(a,b)),a;e=-1}else if(h!==r){if(n)return a;e=D(d,T,s,q);b=d[e];a.sortingValue=T;if(a===b||c&&p===b)return a}else{if(b&&b.parentNode!==this)throw 15;if(c){if(p===b)return a;if(a===b)throw 16;}}c?(p?(p.previousSibling=t,a.nextSibling=null):
this.lastChild=t,t?(t.nextSibling=p,a.previousSibling=null):this.firstChild=p,-1==e?I(d,a):(q=d.indexOf(a),d.splice(q,1),e-=q<e),k&&(k.remove(a),k=null)):a.parentNode&&a.parentNode.removeChild(a);k!=m&&m.insert(a,b);if(b){-1==e&&(e=d.indexOf(b));if(-1==e)throw 17;a.nextSibling=b;d.splice(e,0,a)}else e=d.length,d.push(a),b={previousSibling:this.lastChild},this.lastChild=a;a.parentNode=this;a.previousSibling=b.previousSibling;0==e?this.firstChild=a:b.previousSibling.nextSibling=a;b.previousSibling=
a;c||(B(a,a.contextSelection,this.selection||this.contextSelection,!0),L(a,this.disabled||this.contextDisabled),a.match&&a.match(this.matchFunction),a.autoDelegate!=C.PARENT&&a.autoDelegate!==C.ANY||a.setDelegate(this),this.dataSource||this.emit_childNodesModified({inserted:[a]}),a.listen.parentNode&&this.addHandler(a.listen.parentNode,a));return a},removeChild:function(a){if(!a||a.parentNode!==this)throw 18;if(!1==a instanceof this.childClass)throw 19;if(this.dataSource&&this.dataSource.has(a.delegate))throw 20;
var b=this.childNodes.indexOf(a);if(-1==b)throw 21;this.childNodes.splice(b,1);a.parentNode=null;a.nextSibling?a.nextSibling.previousSibling=a.previousSibling:this.lastChild=a.previousSibling;a.previousSibling?a.previousSibling.nextSibling=a.nextSibling:this.firstChild=a.nextSibling;a.nextSibling=null;a.previousSibling=null;a.listen.parentNode&&this.removeHandler(a.listen.parentNode,a);B(a,a.contextSelection,null,!0);a.groupNode&&a.groupNode.remove(a);this.dataSource||this.emit_childNodesModified({deleted:[a]});
a.autoDelegate!=C.PARENT&&a.autoDelegate!==C.ANY||a.setDelegate();return a},replaceChild:function(a,b){if(this.dataSource)throw 22;if(null==b||b.parentNode!==this)throw 23;this.insertBefore(a,b);return this.removeChild(b)},clear:function(a){if(this.dataSource&&this.dataSource.itemCount)throw 24;if(this.firstChild){a&&B(this,this.selection||this.contextSelection,null,!1,!0);var b=this.childNodes;this.lastChild=this.firstChild=null;this.childNodes=[];this.emit_childNodesModified({deleted:b});for(var e=
b.length;0<e--;){var c=b[e];c.listen.parentNode&&c.parentNode.removeHandler(c.listen.parentNode,c);c.parentNode=null;c.groupNode=null;a?(c.nextSibling=null,c.previousSibling=null,c.autoDelegate!=C.PARENT&&c.autoDelegate!==C.ANY||c.setDelegate()):c.destroy()}if(this.grouping)for(b=this.grouping.childNodes,e=b.length-1;a=b[e];e--)a.clear()}},setChildNodes:function(a,b){this.dataSource||this.clear(b);if(a&&(!1=="length"in a&&(a=[a]),a.length)){var e=this.emit_childNodesModified;this.emit_childNodesModified=
Q;for(var c=0,d=a.length;c<d;c++)this.insertBefore(a[c]);this.emit_childNodesModified=e;this.emit_childNodesModified({inserted:this.childNodes})}},setDataSource:function(a){var b=null,e=this.dataSourceWrapper_;a&&this.childClass||(a=null);a instanceof t&&(b=a,a=b.dataset);e!==b&&(e&&e.removeHandler(ca,this),b&&b.addHandler(ca,this),this.dataSourceWrapper_=b);!1==a instanceof m&&(a=null);if(this.dataSource!==a){b=this.dataSource;e=this.listen.dataSource;b&&(this.dataSource=this.dataSourceMap_=null,
e&&b.removeHandler(e,this));if(this.firstChild){if(b)for(var c=0,d;d=this.childNodes[c];c++)n(d);this.clear()}(this.dataSource=a)?(this.dataSourceMap_={},this.setChildNodesState(a.state),e&&(a.addHandler(e,this),a.itemCount&&e.itemsChanged&&e.itemsChanged.call(this,a,{inserted:a.getItems()}))):this.setChildNodesState(q.UNDEFINED);this.emit_dataSourceChanged(b)}},setGrouping:function(a,b){if("function"==typeof a||"string"==typeof a)a={groupGetter:a};!1==a instanceof E&&(a=a&&"object"==typeof a?new this.groupingClass(a):
null);if(this.grouping!==a){var e=this.grouping,c;if(e){this.grouping=null;if(!a&&this.firstChild){c=this.sorting!==r?A(this):this.childNodes;for(var d=c.length;0<d--;)c[d].groupNode=null;H(this,c)}e.setOwner()}if(a&&(this.grouping=a,a.setOwner(this),this.firstChild)){c=this.sorting!==r?A(this):this.childNodes;for(var d=0,g;g=c[d];d++)g.groupNode=this.grouping.getGroupNode(g,!0);for(d=0;g=c[d];d++)g.groupNode.nodes.push(g);c.length=0;for(d=this.grouping.nullGroup;d;d=d.nextSibling)g=d.nodes,d.first=
g[0]||null,d.last=g[g.length-1]||null,c.push.apply(c,g),d.emit_childNodesModified({inserted:g});H(this,c)}this.emit_groupingChanged(e)}},setSorting:function(a,b){a=R(a);b=!!b;if(this.sorting!==a||this.sortingDesc!=!!b){var e=this.sorting,c=this.sortingDesc;this.sorting=a;this.sortingDesc=!!b;if(a!==r&&this.firstChild){var d=[],g;for(g=this.firstChild;g;g=g.nextSibling)g.sortingValue=a(g)||0;if(this.grouping)for(var f=this.grouping.nullGroup;f;f=f.nextSibling)g=f.nodes=A({childNodes:f.nodes,sortingDesc:this.sortingDesc}),
f.first=g[0]||null,f.last=g[g.length-1]||null,d.push.apply(d,g);else d=A(this);H(this,d)}this.emit_sortingChanged(e,c)}},setMatchFunction:function(a){if(this.matchFunction!=a){var b=this.matchFunction;this.matchFunction=a;for(var e=this.lastChild;e;e=e.previousSibling)e.match(a);this.emit_matchFunctionChanged(b)}}},y=O(g,N,{className:c+".Node",emit_enable:w("enable")&&function(){for(var a=this.firstChild;a;a=a.nextSibling)L(a,!1);k.enable.call(this)},emit_disable:w("disable")&&function(){for(var a=
this.firstChild;a;a=a.nextSibling)L(a,!0);k.disable.call(this)},emit_satelliteChanged:function(a,b){g.prototype.emit_satelliteChanged.call(this,a,b);this.satellite[a]instanceof y&&L(this.satellite[a],this.disabled||this.contextDisabled)},emit_select:w("select"),emit_unselect:w("unselect"),emit_match:w("match"),emit_unmatch:w("unmatch"),emit_matchFunctionChanged:w("matchFunctionChanged","oldMatchFunction"),selectable:!0,selected:!1,selection:null,contextSelection:null,matchFunction:null,matched:!0,
disabled:!1,contextDisabled:!1,listen:{owner:{enable:function(){L(this,!1)},disable:function(){L(this,!0)}}},init:function(){this.selection&&(!1==this.selection instanceof m&&(this.selection=new U(this.selection)),this.listen.selection&&this.selection.addHandler(this.listen.selection,this));g.prototype.init.call(this);this.disabled&&this.emit_disable();this.selected&&(this.selected=!1,this.select(!0))},setSelection:function(a){if(this.selection!==a)return B(this,this.selection||this.contextSelection,
a||this.contextSelection,!1,!0),this.selection&&this.listen.selection&&this.selection.removeHandler(this.listen.selection,this),(this.selection=a)&&this.listen.selection&&a.addHandler(this.listen.selection,this),!0},select:function(a){var b=this.selected,e=this.contextSelection;e?a?b?e.remove([this]):e.add([this]):this.selectable&&e.set([this]):!b&&this.selectable&&(this.selected=!0,this.emit_select());return this.selected!=b},unselect:function(){var a=this.selected;if(a){var b=this.contextSelection;
b?b.remove([this]):(this.selected=!1,this.emit_unselect())}return this.selected!=a},setSelected:function(a,b){return a?this.select(b):this.unselect()},enable:function(){var a=this.disabled;a&&(this.disabled=!1,this.contextDisabled||this.emit_enable());return this.disabled!=a},disable:function(){var a=this.disabled;a||(this.disabled=!0,this.contextDisabled||this.emit_disable());return this.disabled!=a},setDisabled:function(a){return a?this.disable():this.enable()},isDisabled:function(){return this.disabled||
this.contextDisabled},match:function(a){"function"!=typeof a&&(a=null);this.underMatch_&&!a&&this.underMatch_(this,!0);this.underMatch_=a;a=!a||a(this);this.matched!=a&&((this.matched=a)?this.emit_match():this.emit_unmatch())},destroy:function(){this.unselect();this.contextSelection=null;this.selection&&this.setSelection();g.prototype.destroy.call(this)}}),E=O(g,N,{className:c+".GroupingNode",emit_childNodesModified:function(a){k.childNodesModified.call(this,a);this.nullGroup.nextSibling=this.firstChild;
var e;if(e=a.inserted){a=0;for(var c;c=e[a++];)c.groupId_=c.delegate?c.delegate.basisObjectId:c.data.id,this.map_[c.groupId_]=c;if(this.dataSource&&this.nullGroup.first)for(e=this.owner,c=b(this.nullGroup.nodes),a=c.length;0<a--;)e.insertBefore(c[a],c[a].nextSibling)}},emit_ownerChanged:function(a){a&&a.grouping===this&&a.setGrouping(null,!0);this.owner&&this.owner.grouping!==this&&this.owner.setGrouping(this);k.ownerChanged.call(this,a);!this.owner&&this.autoDestroyWithNoOwner&&this.destroy()},map_:null,
nullGroup:null,autoDestroyWithNoOwner:!0,autoDestroyEmptyGroups:!0,groupGetter:r,childClass:T,childFactory:function(a){return new this.childClass(x({autoDestroyIfEmpty:this.dataSource?!1:this.autoDestroyEmptyGroups},a))},init:function(){this.map_={};this.nullGroup=new T;g.prototype.init.call(this)},getGroupNode:function(a,b){var e=this.groupGetter(a),c=e instanceof f,d=this.map_[c?e.basisObjectId:e];this.dataSource&&(b=!1);!d&&b&&(d=this.appendChild(c?e:{data:{id:e,title:e}}));return d||this.nullGroup},
setDataSource:function(a){var e=this.dataSource;N.setDataSource.call(this,a);if((a=this.owner)&&this.dataSource!==e)for(var e=b(a.childNodes),c=e.length-1;0<=c;c--)a.insertBefore(e[c],e[c+1])},insertBefore:function(a,b){a=N.insertBefore.call(this,a,b);var e=a.first;if(e){for(var c=e.parentNode,d=a.last,g,f,k,m=null,h=a;(h=h.nextSibling)&&!(m=h.first););k=m?m.previousSibling:c.lastChild;g=e.previousSibling;f=d.nextSibling;if(f!==m){var q=c.childNodes,h=a.nodes,r=h.length;g&&(g.nextSibling=f);f&&(f.previousSibling=
g);k&&(k.nextSibling=e);m&&(m.previousSibling=d);e.previousSibling=k;d.nextSibling=m;var d=q.indexOf(e),n=m?q.indexOf(m):q.length;n>d&&(n-=r);q.splice(d,r);q.splice.apply(q,[n,0].concat(h));k&&g||(c.firstChild=q[0]);m&&f||(c.lastChild=q[q.length-1]);if(e instanceof T)for(e=r;0<e--;)c.insertBefore(h[e],m),m=h[e]}}return a},removeChild:function(a){if(a=N.removeChild.call(this,a)){delete this.map_[a.groupId_];for(var b=0,e;e=a.nodes[b];b++)e.parentNode.insertBefore(e)}return a},clear:function(a){var b=
[],e=this.getGroupNode,c=this.nullGroup;this.getGroupNode=function(){return c};for(var d=this.firstChild;d;d=d.nextSibling)b.push.apply(b,d.nodes);for(var d=0,g;g=b[d];d++)g.parentNode.insertBefore(g);this.getGroupNode=e;N.clear.call(this,a);this.map_={}},destroy:function(){this.autoDestroyWithNoOwner=!1;g.prototype.destroy.call(this);this.nullGroup.destroy();this.map_=this.nullGroup=null}});g.prototype.groupingClass=E;var Y={childNodesModified:function(a,b){var e=this.members_,c={},d,g=0,f=0,k=b.inserted,
m=b.deleted;if(k&&k.length)for(c.inserted=k;d=k[g];)e[d.basisObjectId]=d,g++;if(m&&m.length)for(c.deleted=m;d=m[f];)delete e[d.basisObjectId],f++;(g||f)&&this.emit_itemsChanged(c)},destroy:function(){this.destroy()}},fa=O(m,{className:c+".ChildNodesDataset",sourceNode:null,init:function(){m.prototype.init.call(this);var a=this.sourceNode;u[a.basisObjectId]=this;a.firstChild&&Y.childNodesModified.call(this,a,{inserted:a.childNodes});a.addHandler(Y,this)},destroy:function(){this.sourceNode.removeHandler(Y,
this);delete u[this.sourceNode.basisObjectId];m.prototype.destroy.call(this)}}),U=O(W,{className:c+".Selection",multiple:!1,emit_itemsChanged:function(a){W.prototype.emit_itemsChanged.call(this,a);if(a.inserted)for(var b=0,e;e=a.inserted[b];b++)e.selected||(e.selected=!0,e.emit_select());if(a.deleted)for(b=0;e=a.deleted[b];b++)e.selected&&(e.selected=!1,e.emit_unselect())},add:function(a){if(!this.multiple){if(this.itemCount)return this.set(a);a=[a[0]]}for(var b=[],e=0,c;c=a[e];e++)c.contextSelection==
this&&c.selectable&&b.push(c);return W.prototype.add.call(this,b)},set:function(a){for(var b=[],e=0,c;c=a[e];e++)c.contextSelection==this&&c.selectable&&b.push(c);this.multiple||b.splice(1);return W.prototype.set.call(this,b)}});F.exports={DELEGATE:C,AbstractNode:g,Node:y,GroupingNode:E,PartitionNode:T,ChildNodesDataset:fa,Selection:U,nullSelection:new m}},"5.js":function(c,F,a,p,w,z,M){function h(a,b){return function(){a.apply(this,arguments);b.apply(this,arguments)}}function n(a){var b=q[a];if(!b)for(var c=
[],d={},f=1,b=q[a]={actions:c,handler:d};a;){if(a&1){var k=R[f];c.push(k.action);for(var m in k.handler)d[m]=d[m]?h(d[m],k.handler[m]):k.handler[m]}f<<=1;a>>=1}return b}function s(a,b){for(;b&&b!==a&&b!==b.delegate;)b=b.delegate;return b===a}function v(a,b){var c={},d;a&&a.length&&(d=c.inserted=a);b&&b.length&&(d=c.deleted=b);if(d)return c}function d(a,b){var c=[],d=[];if(a&&a.itemCount)if(b&&b.itemCount){for(var f in a.items_){var k=a.items_[f];!1==k.basisObjectId in b.items_&&d.push(k)}for(f in b.items_)k=
b.items_[f],!1==k.basisObjectId in a.items_&&c.push(k)}else d=a.getItems();else b&&(c=b.getItems());return v(c,d)}function A(a){return Array.isArray(a)?a.map(function(a){return{data:a}}):{data:a}}function D(a){a&&a.constructor===Object||(a={value:a});return new C({data:a})}a.require("4.js");w=this.path;z=a.Class;var B=a.cleaner,L=a.object.values,H=a.fn.$self,S=a.event.Emitter;M=a.event.create;var O=a.event.events,x={},b=[],I={},Q={priority:[],values:{},add:function(a,b){var c=a.toLowerCase();Q[a]=
c;I[c]=a;this.values[c]=a;b=b?this.priority.indexOf(b):-1;-1==b?this.priority.push(c):this.priority.splice(b,0,c)},getList:function(){return L(I)}};Q.add("READY");Q.add("DEPRECATED");Q.add("UNDEFINED");Q.add("ERROR");Q.add("PROCESSING");var R={},r=1,k={NONE:0,ALL:0,link:function(a,b,c){a+=b.basisObjectId;var d=c.subscribers_;d||(d=c.subscribers_={});d[a]||(d[a]=b,1==(c.subscriberCount+=1)&&c.emit_subscribersChanged(1))},unlink:function(a,b,c){a+=b.basisObjectId;(b=c.subscribers_)&&b[a]&&(delete b[a],
0==(c.subscriberCount-=1)&&(c.emit_subscribersChanged(-1),c.subscribers_=null))},add:function(a,b,c){R[r]={handler:b,action:c};k[a]=r;k.ALL|=r;r<<=1},addProperty:function(a,b){var c={};c[b||a+"Changed"]=function(b,c){c&&k.unlink(a,b,c);b[a]&&k.link(a,b,b[a])};this.add(a.toUpperCase(),c,function(b,c){c[a]&&b(a,c,c[a])})}},q={};k.addProperty("delegate");k.addProperty("target");k.addProperty("dataset");var G=z(S,{className:w+".AbstractData",state:Q.UNDEFINED,emit_stateChanged:M("stateChanged","oldState"),
active:!1,emit_activeChanged:M("activeChanged"),subscribeTo:k.NONE,subscriberCount:0,subscribers_:null,emit_subscribersChanged:M("subscribersChanged","delta"),syncEvents:z.oneFunctionProperty(function(){this.isSyncRequired()&&this.syncAction()},{stateChanged:!0,subscribersChanged:!0}),syncAction:null,init:function(){S.prototype.init.call(this);this.active&&this.addHandler(n(this.subscribeTo).handler);var a=this.syncAction;a&&(this.syncAction=null,this.setSyncAction(a))},setState:function(a,b){var c=
String(a);if(!I[c])throw 5;if(this.state!=c||this.state.data!=b){var d=this.state;this.state=Object(c);this.state.data=b;this.emit_stateChanged(d);return!0}return!1},deprecate:function(){this.state!=Q.PROCESSING&&this.setState(Q.DEPRECATED)},setActive:function(a){a=!!a;if(this.active!=a){this.active=a;this.emit_activeChanged();if(a){a=n(this.subscribeTo);for(var b=0,c;c=a.actions[b];b++)c(k.link,this);this.addHandler(a.handler)}else{a=n(this.subscribeTo);for(b=0;c=a.actions[b++];)c(k.unlink,this);
this.removeHandler(a.handler)}return!0}return!1},setSubscription:function(a){var b=this.subscribeTo,c=a&k.ALL;if(a=b^c){this.subscribeTo=c;if(this.active){var d=n(b),c=n(c);this.removeHandler(d.handler);this.addHandler(c.handler);for(d=1;a;)a&1&&(c=R[d],b&d?c.action(k.unlink,this):c.action(k.link,this)),d<<=1,a>>=1}return!0}return!1},isSyncRequired:function(){return 0<this.subscriberCount&&(this.state==Q.UNDEFINED||this.state==Q.DEPRECATED)},setSyncAction:function(a){var b=this.syncAction;"function"!=
typeof a&&(a=null);(this.syncAction=a)?(b||this.addHandler(this.syncEvents),this.isSyncRequired()&&this.syncAction()):b&&this.removeHandler(this.syncEvents)},destroy:function(){if(this.active)for(var a=n(this.subscribeTo),b=0,c;c=a.actions[b];b++)c(k.unlink,this);S.prototype.destroy.call(this);this.state=Q.UNDEFINED}}),f={},m={},W=function(a){this.set(this.fn(a))},t={destroy:function(a){this.value.unlink(a,this.fn)}};c=z(G,{className:w+".Value",emit_change:M("change","oldValue")&&function(a){O.change.call(this,
a);for(var b=this;b=b.links_;)b.fn.call(b.context,this.value,a)},value:null,initValue:null,proxy:null,locked:!1,lockedValue_:null,links_:null,bindingBridge:{attach:function(a,b,c){a.link(c,b,!0)},detach:function(a,b,c){a.unlink(c,b)},get:function(a){return a.value}},init:function(){G.prototype.init.call(this);this.proxy&&(this.value=this.proxy(this.value));this.initValue=this.value},set:function(a){var b=this.value;a=this.proxy?this.proxy(a):a;var c=a!==b;c&&(this.value=a,this.locked||this.emit_change(b));
return c},reset:function(){this.set(this.initValue)},lock:function(){this.locked||(this.locked=!0,this.lockedValue_=this.value)},unlock:function(){this.locked&&(this.locked=!1,this.value!==this.lockedValue_&&(this.emit_change(this.lockedValue_),this.lockedValue_=null))},compute:function(b,c){c||(c=b,b=null);var d=this,k=a.event.createHandler(b,function(a){this.set(c(a,d.value))}),m=k.events.concat(String(c),this.basisObjectId).join("_"),h=f[m];if(!h){var q={};k.destroy=function(a){delete q[a.basisObjectId];
this.destroy()};this.addHandler({change:function(){for(var a in q){var b=q[a];b.token.set(c(b.object,this.value))}},destroy:function(){for(var a in q){var b=q[a];b.object.removeHandler(k,b.token);b.token.destroy()}d=q=null}});h=f[m]=function(b){var e=b.basisObjectId,f=q[e];f||(f=new a.Token(c(b,d.value)),b.addHandler(k,f),f=q[e]={token:f,object:b});return f.token};h.deferred=function(){return function(a){return h(a).deferred()}}}return h},as:function(b,c){if(this.links_)for(var d=this;d=d.links_;)if(d.context instanceof
a.Token&&d.context.fn==String(b))return c?d.context.deferred():d.context;d=new a.Token;d.fn=b;this.link(d,W);return c?d.deferred():d},deferred:function(a){return this.as(a,!0)},link:function(a,b,c){if("function"!=typeof b){var d=String(b);(b=m[d])||(b=m[d]=function(a){this[d]=a})}this.links_={value:this,context:a,fn:b,links_:this.links_};a instanceof S&&a.addHandler(t,this.links_);c||b.call(a,this.value);return a},unlink:function(b,c){for(var d=this,f;f=d,d=d.links_;)d.context!==b||c&&d.fn!==c||(d.fn=
a.fn.$undef,f.links_=d.links_,d.context instanceof S&&d.context.removeHandler(t,d))},destroy:function(){for(var a=this;a=a.links_;)a.object instanceof S&&a.object.removeHandler(t,a);G.prototype.destroy.call(this);this.links_=this.lockedValue_=this.value=this.initValue=this.proxy=null}});var C=z(G,{className:w+".Object",subscribeTo:k.DELEGATE+k.TARGET,data:null,emit_update:M("update","delta"),delegate:null,emit_delegateChanged:M("delegateChanged","oldDelegate"),isTarget:!1,target:null,emit_targetChanged:M("targetChanged",
"oldTarget"),root:null,emit_rootChanged:M("rootChanged","oldRoot"),listen:{delegate:{update:function(a,b){this.data=a.data;this.emit_update(b)},stateChanged:function(a,b){this.state=a.state;this.emit_stateChanged(b)},targetChanged:function(a,b){this.target=a.target;var c=this.listen.target;c&&(b&&b.removeHandler(c,this),this.target&&this.target.addHandler(c,this));this.emit_targetChanged(b)},rootChanged:function(a,b){this.data=a.data;this.root=a.root;this.emit_rootChanged(b)},destroy:function(){this.setDelegate()}}},
init:function(){this.root=this;G.prototype.init.call(this);var a=this.delegate;a?(this.delegate=null,this.data=a.data,this.state=a.state,this.setDelegate(a)):(this.data||(this.data={}),this.isTarget&&(this.target=this))},setDelegate:function(a){if(a&&a instanceof C){if(a.delegate&&s(this,a))return!1}else a=null;if(this.delegate!==a){var b=this.state,c=this.data,d=this.delegate,f=this.target,k=this.root,m={},h=this.listen.delegate,q=(f||a)&&(!a||a.target!==f)&&this.listen.target;d&&h&&d.removeHandler(h,
this);f&&q&&f.removeHandler(q,this);if(a){this.delegate=a;this.root=a.root;this.data=a.data;this.state=a.state;this.target=a.target;for(var r in a.data)!1===r in c&&(m[r]=void 0);for(r in c)c[r]!==a.data[r]&&(m[r]=c[r]);h&&a.addHandler(h,this);a.target&&q&&a.target.addHandler(q,this);for(r in m){this.emit_update(m);break}b===this.state||String(b)==this.state&&b.data===this.state.data||this.emit_stateChanged(b)}else for(r in this.target=this.delegate=null,this.root=this,this.data={},c)this.data[r]=
c[r];this.root!==k&&this.emit_rootChanged(k);this.target!==f&&this.emit_targetChanged(f);this.emit_delegateChanged(d);return!0}return!1},setState:function(a,b){var c=this.target||this.root;return c!==this?c.setState(a,b):G.prototype.setState.call(this,a,b)},update:function(a){var b=this.target||this.root;if(b!==this)return b.update(a);if(a){var b={},c=!1,d;for(d in a)this.data[d]!==a[d]&&(c=!0,b[d]=this.data[d],this.data[d]=a[d]);if(c)return this.emit_update(b),b}return!1},destroy:function(){this.delegate&&
this.setDelegate();G.prototype.destroy.call(this);this.data=x;this.target=this.root=null}});p=z(C,{className:w+".Slot"});var u={destroy:function(){delete this.map[this.itemId]}},H=z(null,{className:w+".KeyObjectMap",itemClass:C,keyGetter:H,map_:null,extendConstructor_:!0,init:function(){this.map_={};B.add(this)},resolve:function(a){return this.get(this.keyGetter(a),a)},create:function(a,b){var c={};a instanceof C?c.delegate=a:c.data={id:a,title:a};return new this.itemClass(c)},get:function(a,b){var c=
a instanceof C?a.basisObjectId:a,d=this.map_[c];!d&&b&&(d=this.map_[c]=this.create(a,b),d.addHandler(u,{map:this.map_,itemId:c}));return d},destroy:function(){B.remove(this);for(var a=L(this.map_),b=0,c;c=a[b++];)c.destroy()}}),$=z(C,{className:w+".DatasetWrapper",subscribeTo:C.prototype.subscribeTo+k.DATASET,listen:{dataset:{itemsChanged:function(a,b){this.itemCount=a.itemCount;this.emit_itemsChanged(b)},destroy:function(){this.setDataset()}}},dataset:null,emit_datasetChanged:M("datasetChanged",
"oldDataset"),emit_itemsChanged:M("itemsChanged","delta"),init:function(){C.prototype.init.call(this);var a=this.dataset;a&&(this.dataset=null,this.setDataset(a))},setDataset:function(a){!1==a instanceof ba&&(a=null);if(this.dataset!==a){var b=this.listen.dataset,c=this.dataset,f;b&&(c&&c.removeHandler(b,this),a&&a.addHandler(b,this));this.itemCount=a?a.itemCount:0;(f=d(c,a))&&this.emit_itemsChanged(f);this.dataset=a;this.emit_datasetChanged(c)}},has:function(a){return this.dataset?this.dataset.has(a):
null},getItems:function(){return this.dataset?this.dataset.getItems():[]},pick:function(){return this.dataset?this.dataset.pick():null},top:function(a){return this.dataset?this.dataset.top(a):[]},forEach:function(a){if(this.dataset)return this.dataset.forEach(a)},destroy:function(){this.dataset&&this.setDataset();C.prototype.destroy.call(this)}}),ba=z(G,{className:w+".AbstractDataset",itemCount:0,items_:null,members_:null,cache_:null,emit_itemsChanged:M("itemsChanged","delta")&&function(a){var b,
c=0,d=0,f;if(b=a.inserted)for(;f=b[c];)this.items_[f.basisObjectId]=f,c++;if(b=a.deleted)for(;f=b[d];)delete this.items_[f.basisObjectId],d++;this.itemCount+=c-d;this.cache_=null;O.itemsChanged.call(this,a)},init:function(){G.prototype.init.call(this);this.members_={};this.items_={}},has:function(a){return!(!a||!this.items_[a.basisObjectId])},getItems:function(){this.cache_||(this.cache_=L(this.items_));return this.cache_},pick:function(){for(var a in this.items_)return this.items_[a];return null},
top:function(a){var b=[];if(a)for(var c in this.items_)if(b.push(this.items_[c])>=a)break;return b},forEach:function(a){for(var b=this.getItems(),c=0;c<b.length;c++)a(b[c])},clear:function(){},destroy:function(){this.clear();G.prototype.destroy.call(this);this.cache_=b;this.itemCount=0;this.items_=this.members_=null}});w=z(ba,{className:w+".Dataset",listen:{item:{destroy:function(a){this.remove([a])}}},init:function(){ba.prototype.init.call(this);var a=this.items;a&&(this.items=null,this.set(a))},
add:function(a){var b=this.members_,c=this.listen.item,d=[],f;a&&!Array.isArray(a)&&(a=[a]);for(var k=0;k<a.length;k++){var m=a[k];if(m instanceof C){var h=m.basisObjectId;b[h]||(b[h]=m,c&&m.addHandler(c,this),d.push(m))}}d.length&&this.emit_itemsChanged(f={inserted:d});return f},remove:function(a){var b=this.members_,c=this.listen.item,d=[],f;a&&!Array.isArray(a)&&(a=[a]);for(var k=0;k<a.length;k++){var m=a[k];if(m instanceof C){var h=m.basisObjectId;b[h]&&(c&&m.removeHandler(c,this),delete b[h],
d.push(m))}}d.length&&this.emit_itemsChanged(f={deleted:d});return f},set:function(a){if(!this.itemCount)return this.add(a);if(!a||!a.length)return this.clear();for(var b=this.members_,c=this.listen.item,d={},f=[],k=[],m,h,q,r=0;r<a.length;r++)m=a[r],m instanceof C&&(h=m.basisObjectId,d[h]=m,b[h]||(b[h]=m,c&&m.addHandler(c,this),k.push(m)));for(h in b)d[h]||(m=b[h],c&&m.removeHandler(c,this),delete b[h],f.push(m));(q=v(k,f))&&this.emit_itemsChanged(q);return q},sync:function(a){a=this.set(a)||{};
var b=a.deleted;if(b)for(var c=0,d;d=b[c];c++)d.destroy();return a.inserted},clear:function(){var a=this.getItems(),b=this.listen.item,c;if(a.length){if(b)for(c=0;c<a.length;c++)a[c].removeHandler(b,this);this.emit_itemsChanged(c={deleted:a});this.members_={}}return c}});w.setAccumulateState=function(){function b(){var a=q;q={};for(var c in a){var e=a[c];k.call(e.dataset,e)}}function c(a){var b=this.basisObjectId,e=a.inserted,d=a.deleted,f=q[b];if(e&&d)f&&(delete q[b],k.call(f.dataset,f)),k.call(this,
a);else{if(f){var g=f[e?"inserted":"deleted"];if(g){g.push.apply(g,e||d);return}k.call(f.dataset,f)}q[b]=a;a.dataset=this}}function d(){h=null;m&&(m=0,f.emit_itemsChanged=k,b())}var f=ba.prototype,k=f.emit_itemsChanged,m=0,h,q={};return function(q){q?(0==m&&(f.emit_itemsChanged=c,h||(h=a.setImmediate(d))),m++):(m-=0<m,0==m&&(f.emit_itemsChanged=k,b()))}}();F.exports={STATE:Q,SUBSCRIPTION:k,AbstractData:G,Value:c,Object:C,Slot:p,KeyObjectMap:H,AbstractDataset:ba,Dataset:w,DatasetWrapper:$,isConnected:s,
getDatasetDelta:d,wrapData:A,wrapObject:D,wrap:function(a,b){var c=b?D:A;return Array.isArray(a)?a.map(c):c(a)}}},"12.js":function(c,F,a,p,w,z,M){a.require("2.js");a.require("f.js");var h=new a.data.Value({value:[]}),n=new a.ui.Node({autoDelegate:!0,dataSource:app.type.Provider.all,handler:{update:function(){h.set(this.data.providers)}},template:a.template.get("#n"),childClass:{checked:!1,template:a.template.get("#o"),binding:{id:"data:",imageUrl:{events:"update",getter:function(a){return app.type.Provider.assets[a.data.id]}},
title:"data:",unchecked:h.compute("update",function(a,c){return-1==c.indexOf(a.data.id)})},action:{toggle:function(){var c=a.array(this.parentNode.data.providers),h=c.indexOf(this.data.id);if(-1==h)if(app.type.Provider(this.data.id).data.enabled)c.push(this.data.id);else return window.open("/login/"+this.data.id,"oauth","scrollbars=0, resizable=1, menubar=0, left="+(screen.width-800)/2+", top="+(screen.height-600)/2+", width=800, height=600, toolbar=0, status=0"),!1;else c.splice(h,1);this.parentNode.update({providers:c})}}}});
app.onProvidersInit=function(){n.update({providers:app.type.Provider.all.getItems().filter(function(a){return a.data.enabled}).map(function(a){return a.data.id})})};F.exports=n},"4.js":function(c,F,a,p,w,z,M){function h(a){var c=A[a];c||(c=function(){for(var c=this,d,h;c=c.handler;)h=c.callbacks[a],"function"==typeof h&&h.apply(c.context||this,d||(d=[this].concat(s.call(arguments)))),h=c.callbacks["*"],"function"==typeof h&&h.call(c.context||this,{sender:this,type:a,args:arguments});v&&this.emit_debug&&
this.emit_debug({sender:this,type:a,args:arguments})},v&&(c=(new Function("slice, DEVMODE",'return {"'+n+".events."+a+'":\n\n      function('+s.call(arguments,1).join(", ")+"){"+c.toString().replace(/\beventName\b/g,"'"+a+"'").replace(/^function[^(]*\(\)[^{]*\{|\}$/g,"")+'}\n\n}["'+n+".events."+a+'"];'))(s,v)),A[a]=c);return c}var n=this.path;c=a.Class;var s=Array.prototype.slice,v=!1,d={},A={},D=function(){throw 4;};c=c(null,{className:n+".Emitter",extendConstructor_:!0,handler:null,emit_destroy:h("destroy"),
listen:c.nestedExtendProperty(),init:function(){this.handler&&!this.handler.callbacks&&(this.handler={callbacks:this.handler,context:this,handler:null})},addHandler:function(c,d){v&&!c&&a.dev.warn(this.constructor.className+"#addHandler: callbacks is not an object (",c,")");d=d||this;if(v)for(var h=this;h=h.handler;)if(h.callbacks===c&&h.context===d){a.dev.warn(this.constructor.className+"#addHandler: add duplicate event callbacks",c,"to Emitter instance:",this);break}this.handler={callbacks:c,context:d,
handler:this.handler}},removeHandler:function(c,h){var n=this,p;for(h=h||this;p=n,n=n.handler;)if(n.callbacks===c&&n.context===h){n.callbacks=d;p.handler=n.handler;return}v&&p!==this&&a.dev.warn(this.constructor.className+"#removeHandler: no handler removed")},destroy:function(){v&&(this.destroy=D);this.emit_destroy();this.handler=null}});v&&c.extend({handler_list:function(){for(var a=[],c=this;c=c.handler;)a.push([c.callbacks,c.context]);return a},emit_debug:null});F.exports={create:h,createHandler:function(a,
c){var d={events:[]};if(a){a=String(a).trim().split(/\s+|\s*,\s*/).sort();for(var d={events:a},h=0,n;n=a[h];h++)"destroy"!=n&&(d[n]=c)}return d},events:A,Emitter:c}},"3.js":function(c,F,a,p,w,z,M){function h(a){var b=[],c;for(c in a)D.call(a,c)&&b.push(c);return b}function n(a,b,c,d){var k=a.cultureValues[b];d=d?d+".":"";for(var h in c)if(D.call(c,h)){var q=d+h,r=c[h];(k[q]=r)&&("object"==typeof r||Array.isArray(r))&&n(a,b,r,q)}}function s(c){var d=a.path.extname(c);c=a.resource(".l10n"!=d?a.path.dirname(c)+
"/"+a.path.basename(c,d)+".l10n":c);(d=b[c.url])||(d=b[c.url]=new I(c));return d}function v(a){var b=r[a];b||(b=r[a]=new G(a));return b}function d(a){if(a&&q!=a){q=a;for(var b=0,c;c=x[b];b++)c.syncValues();v.set(a)}}function A(b){"string"==typeof b&&(b=b.trim().split(" "));if(b.length){var c={},h,r;k={};for(var n=0,p;h=b[n];n++)h=h.split("/"),2<h.length&&(h=h.slice(0,2)),p=h[0],r||(r=p),c[p]=v(p),k[p]=h;for(p in k)k[p]=a.array.flatten(k[p].map(function(a){return k[a]})).concat(r).filter(function(a,
b,c){return!b||-1==c.lastIndexOf(a,b-1)});R=a.object.keys(c);!1==q in c&&d(r)}}a.require("4.js");c=this.path;p=a.Class;var D=Object.prototype.hasOwnProperty,B=a.event.Emitter;a.resource.extensions[".l10n"]=a.resource.extensions[".json"];var L=[],H={},S=p(a.Token,{className:c+".ComputeToken",init:function(b,c){c.computeTokens[this.basisObjectId]=this;this.token=c;this.get=c.computeGetMethod;a.Token.prototype.init.call(this,b)},toString:function(){return this.get()},destroy:function(){delete this.token.computeTokens[this.basisObjectId];
this.token=null;a.Token.prototype.destroy.call(this)}}),O=p(a.Token,{className:c+".Token",index:NaN,dictionary:null,name:"",type:"default",computeTokens:null,init:function(b,c,d,k){a.Token.prototype.init.call(this,k);this.index=L.push(this)-1;this.name=c;this.dictionary=b;this.computeTokens={};d?this.setType(d):this.apply()},toString:function(){return this.get()},computeGetMethod:function(){},apply:function(){var b={},c=this.computeTokens,d="plural"==this.type?function(){return b[r[q].plural(this.value)]}:
function(){return b[this.value]};this.computeGetMethod=d;if("plural"==this.type&&Array.isArray(this.value)||"default"==this.type&&"object"==typeof this.value)b=a.object.slice(this.value,h(this.value));for(var k in c){var n=c[k],p=n.get(),s=d.call(n);n.get=d;p!==s&&n.apply()}a.Token.prototype.apply.call(this)},setType:function(b){"plural"==b||a.l10n.enableMarkup&&"markup"==b||(b="default");this.type!=b&&(this.type=b,this.apply())},compute:function(b,c){1==arguments.length&&(c=b,b="");c=a.getter(c);
b=String(b).trim().split(/\s+|\s*,\s*/).sort();var d=b.concat(this.basisObjectId,c.basisGetterId_).join("_");if(H[d])return H[d];for(var k=this,h={},q=function(a){this.set(c(a))},r={destroy:function(a){delete h[a.basisObjectId];this.destroy()}},n=0,e;e=b[n];n++)"destroy"!=e&&(r[e]=q);return H[d]=function(a){if(!1==a instanceof B)throw 3;var b=a.basisObjectId,e=h[b];e||(e=h[b]=new S(c(a),k),a.addHandler(r,e));return e}},computeToken:function(a){return new S(a,this)},token:function(a){"plural"==this.type&&
(a=r[q].plural(a));if(this.dictionary)return this.dictionary.token(this.name+"."+a)},destroy:function(){for(var b in this.computeTokens)this.computeTokens[b].destroy();this.value=this.computeTokens=null;a.Token.prototype.destroy.call(this)}}),x=[],b={},I=p(null,{className:c+".Dictionary",tokens:null,types:null,cultureValues:null,index:NaN,resource:null,init:function(a){this.tokens={};this.types={};this.cultureValues={};this.resource=a;this.update(a());a.attach(this.update,this);this.index=x.push(this)-
1;Q.set(a.url)},update:function(a){a||(a={});this.cultureValues={};for(var b in a)/^_|_$/.test(b)||(this.cultureValues[b]={},n(this,b,a[b]));this.types=a._meta&&a._meta.type||{};for(var c in this.tokens)this.tokens[c].setType(this.types[c]);this.syncValues()},syncValues:function(){for(var a in this.tokens)this.tokens[a].set(this.getValue(a))},getValue:function(a){for(var b=k[q],c=0,d;d=b[c];c++)if((d=this.cultureValues[d])&&a in d)return d[a]},getCultureValue:function(a,b){return this.cultureValues[a]&&
this.cultureValues[a][b]},token:function(a){var b=this.tokens[a];b||(b=this.tokens[a]=new O(this,a,this.types[a],this.getValue(a)));return b},destroy:function(){this.cultureValues=this.tokens=null;a.array.remove(x,this)}}),Q=new a.Token,R=[],r={},k={},q=null,G=a.Class(null,{className:c+".Culture",name:"",init:function(a){this.name=a;"ru-RU"==a&&(this.plural=function(a){return 1==a%10&&11!=a%100?0:2<=a%10&&4>=a%10&&(10>a%100||20<=a%100)?1:2})},plural:function(a){return 1==Number(a)?0:1}});a.object.extend(v,
new a.Token(q));A("en-US");d("en-US");F.exports={ComputeToken:S,Token:O,token:function(a){if("#"==a.charAt(0))return L[parseInt(a.substr(1),36)];if(a=a.match(/^(.+?)@(.+)$/))return s(a[2]).token(a[1])},Dictionary:I,dictionary:s,getDictionaries:function(){return x.slice(0)},addCreateDictionaryHandler:Q.attach.bind(Q),removeCreateDictionaryHandler:Q.detach.bind(Q),Culture:G,culture:v,getCulture:function(){return q},setCulture:d,getCultureList:function(){return R.slice(0)},setCultureList:A,onCultureChange:function(a,
b,c){v.attach(a,b);c&&a.call(b,q)}}},"13.js":function(c,F,a,p,w,z,M){a.require("2.js");F.exports=new a.ui.Node({template:a.template.get("#p"),binding:{},action:{}})},"2.js":function(c,F,a,p,w,z,M){a.require("3.js");a.require("5.js");a.require("6.js");a.require("7.js");a.require("8.js");c=this.path;var h=p.document;p=a.Class;var n=a.event.create,s=a.template.html.Template,v=a.template.TemplateSwitcher;w=a.dom.wrapper.Node;var d=a.dom.wrapper.PartitionNode,A=a.dom.wrapper.GroupingNode,D=1,B=function(){var a=
{},b=/^([a-z_][a-z0-9_]*):(.*)/i;return{add:function(b,c){a[b]||(a[b]=c)},process:function(c,d){var f,h=d.match(b);h&&(f=a[h[1]],d=h[2]||c);return f?f(d):d}}}();B.add("data",function(a){return{events:"update",getter:"data."+a}});B.add("satellite",function(a){return{events:"satelliteChanged",getter:function(b){return b.satellite[a]?b.satellite[a].element:null}}});var L=p.customExtendProperty({state:{events:"stateChanged",getter:function(a){return String(a.state)}},childNodesState:{events:"childNodesStateChanged",
getter:function(a){return String(a.childNodesState)}},childCount:{events:"childNodesModified",getter:function(a){return a.childNodes?a.childNodes.length:0}},hasChildren:{events:"childNodesModified",getter:function(a){return!!a.firstChild}},empty:{events:"childNodesModified",getter:function(a){return!a.firstChild}}},function(b,c){b.bindingId=D++;for(var d in c){var h=null,f=c[d];R&&f instanceof R?h={events:"satelliteChanged",getter:function(b,c){var d=a.fn.runOnce(function(a){a.setSatellite(b,c)});
return function(a){d(a);return a.satellite[b]?a.satellite[b].element:null}}(d,f)}:f&&("string"==typeof f?f=B.process(d,f):f.bindingBridge&&(f=a.fn.$const(f)),h="object"!=typeof f?{getter:"function"==typeof f?f:a.getter(f)}:Array.isArray(f)?{events:f[0],getter:a.getter(f[1])}:{events:f.events,getter:a.getter(f.getter)});b[d]=h}}),H={attach:function(a,b,c){a.addHandler(b,c)},detach:function(a,b,c){a.removeHandler(b,c)}},S=p.extensibleProperty({select:function(a){this.isDisabled()||(this.contextSelection&&
this.contextSelection.multiple?this.select(a.ctrlKey||a.metaKey):this.select())}}),O={"*":function(a){var b=this.templateSwitcher_;b&&b.ruleEvents&&b.ruleEvents[a.type]&&this.setTemplate(b.resolve(this))}},x=new s("<div/>"),b=[],I;z=function(c){return{template:x,emit_templateChanged:n("templateChanged"),templateSwitcher_:null,binding:L,action:S,tmpl:null,element:null,childNodesElement:null,emit_update:function(a){this.templateUpdate(this.tmpl,"update",a);c.emit_update.call(this,a)},init:function(){this.element=
this.childNodesElement=b.pop()||h.createDocumentFragment();c.init.call(this)},postInit:function(){c.postInit.call(this);var a=this.template;if(a){var d=this.element;this.template=null;this.setTemplate(a);this.grouping&&(this.tmpl.groupsElement||this.childNodesElement).appendChild(d);b.push(d);this.container&&(this.container.appendChild(this.element),this.container=null)}},templateSync:function(){var a=this.element,b=this.template.createInstance(this,this.templateAction,this.templateSync,this.binding,
H);b.childNodesHere&&(b.childNodesElement=b.childNodesHere.parentNode,b.childNodesElement.insertPoint=b.childNodesHere);this.tmpl=b;this.element=b.element;this.childNodesElement=b.childNodesElement||b.element;1!=this.childNodesElement.nodeType&&(this.childNodesElement=h.createDocumentFragment());this.grouping&&this.grouping.syncDomRefs();if(this instanceof Q){var c=this.nodes;if(c)for(var d=c.length-1,m;m=c[d];d--)m.parentNode.insertBefore(m,m.nextSibling)}else for(m=this.lastChild;m;m=m.previousSibling)this.insertBefore(m,
m.nextSibling);this.content&&(b.content||b.element).appendChild(this.content.nodeType?this.content:h.createTextNode(this.content));this.templateUpdate(this.tmpl);a&&a!==this.element&&11!=a.nodeType&&(b=a&&a.parentNode)&&(this.owner&&this.owner.tmpl&&this.owner.tmpl.set(a,this.element),this.element.parentNode!==b&&b.replaceChild(this.element,a));this.emit_templateChanged()},setTemplate:function(a){var b=this.templateSwitcher_;a instanceof v&&(this.templateSwitcher_=a,a=a.resolve(this),b||this.addHandler(O,
this));!1==a instanceof s&&(a=null);!b||a&&b.resolve(this)===a||(this.templateSwitcher_=null,this.removeHandler(O,this));this.template!==a&&(b=this.template,(this.template=a)?this.templateSync():(a=this.element,b.clearInstance(this.tmpl),this.childNodesElement=this.element=this.tmpl=null,(b=a&&a.parentNode)&&1==b.nodeType&&b.removeChild(a)))},updateBind:function(a){var b=this.binding[a];(b=b&&b.getter)&&this.tmpl&&this.tmpl.set(a,b(this))},templateAction:function(a,b){var c=this.action[a];c&&c.call(this,
b)},templateUpdate:function(a,b,c){},focus:function(b){var c=this.tmpl?this.tmpl.focus||this.element:null;c&&(I&&(I=a.clearImmediate(I)),I=a.setImmediate(function(){try{c.focus(),b&&c.select()}catch(a){}}))},blur:function(){var a=this.tmpl?this.tmpl.focus||this.element:null;if(a)try{a.blur()}catch(b){}},destroy:function(){c.destroy.call(this);this.setTemplate()}}};M=function(a){return{insertBefore:function(b,c){b=a.insertBefore.call(this,b,c);var d=(b.groupNode||this).childNodesElement||this.childNodesElement,
f=b.nextSibling,h=b.element,f=(f&&f.element.parentNode==d?f.element:null)||d.insertPoint||null;h.parentNode===d&&h.nextSibling===f||d.insertBefore(h,f);return b},removeChild:function(b){a.removeChild.call(this,b);var c=b.element,d=c.parentNode;d&&d.removeChild(c);return b},clear:function(b){if(b)for(var c=this.firstChild;c;){var d=c.element,f=d.parentNode;f&&f.removeChild(d);c=c.nextSibling}a.clear.call(this,b)},setChildNodes:function(b,c){var d=h.createDocumentFragment(),f=this.grouping||this,m=
f.childNodesElement;f.childNodesElement=d;a.setChildNodes.call(this,b,c);m.insertBefore(d,m.insertPoint||null);f.childNodesElement===d&&(f.childNodesElement=m)}}};var Q=p(d,z,{className:c+".PartitionNode",binding:{title:"data:"}}),d=p(A,M,{className:c+".GroupingNode",childClass:Q,groupingClass:p.SELF,nullElement:null,element:null,childNodesElement:null,emit_ownerChanged:function(a){this.syncDomRefs();A.prototype.emit_ownerChanged.call(this,a)},listen:{owner:{templateChanged:function(){this.syncDomRefs();
for(var a=this.lastChild;a;a=a.previousSibling)this.insertBefore(a,a.nextSibling)}}},init:function(){this.element=this.childNodesElement=this.nullElement=h.createDocumentFragment();A.prototype.init.call(this)},syncDomRefs:function(){var a=this,b=this.owner,c=null;b&&(c=b.tmpl&&b.tmpl.groupsElement||b.childNodesElement,c.appendChild(this.nullElement));do a.element=a.childNodesElement=c;while(a=a.grouping)},destroy:function(){A.prototype.destroy.call(this);this.nullElement=this.childNodesElement=this.element=
null}}),R=p(w,z,M,{className:c+".Node",binding:{selected:{events:"select unselect",getter:function(a){return a.selected}},unselected:{events:"select unselect",getter:function(a){return!a.selected}},disabled:{events:"disable enable",getter:function(a){return a.disabled||a.contextDisabled}},enabled:{events:"disable enable",getter:function(a){return!(a.disabled||a.contextDisabled)}}},childClass:p.SELF,childFactory:function(a){return new this.childClass(a)},groupingClass:d});c=R.subclass({className:c+
".ShadowNodeList",emit_ownerChanged:function(a){R.prototype.emit_ownerChanged.call(this,a);this.setDataSource(this.owner&&this.owner.getChildNodesDataset())},getChildNodesElement:function(a){return a.childNodesElement},listen:{owner:{templateChanged:function(){this.childNodes.forEach(function(a){this.appendChild(a.element)},this.getChildNodesElement(this.owner)||this.owner.element)}}},childClass:{className:c+".ShadowNode",getElement:function(a){return a.element},templateSync:function(){R.prototype.templateSync.call(this);
var a=this.getElement(this.delegate);a&&(a.basisTemplateId=this.delegate.element.basisTemplateId,this.element=a)},listen:{delegate:{templateChanged:function(){var a=this.element,b=a.parentNode,c=this.getElement(this.delegate);c&&(c.basisTemplateId=this.delegate.element.basisTemplateId);this.element=c||this.tmpl.element;b&&b.replaceChild(this.element,a)}}}}});F.exports={BINDING_PRESET:B,Node:R,PartitionNode:Q,GroupingNode:d,ShadowNodeList:c,ShadowNode:c.prototype.childClass}},"0.js":function(c,F,a,
p,w,z,M){a.require("1.js");a.require("2.js");a.require("b.js");F.exports=a.app.create({title:"EventShot",init:function(){var c=new a.ui.Node({selection:!0,listen:{selection:{itemsChanged:function(a){a.itemCount||this.firstChild.select()}}},childClass:{template:a.template.get("#1"),handler:{select:function(){this.lazyContent&&(this.appendChild(this.lazyContent()),this.lazyContent=null)}}},childNodes:[{selected:!0,name:"welcome",lazyContent:a.resource("t.js")},{selected:!0,name:"add-event",router:"/add-event",
lazyContent:a.resource("u.js")},{name:"list",router:"/list",lazyContent:a.resource("v.js")},{name:"event",router:/^\/event(\/.*)?$/,lazyContent:a.resource("w.js")}]});a.router.start();return new a.ui.Node({template:a.template.get("#2"),binding:{pages:c},action:{showEventList:function(){a.router.navigate("/list")},createEvent:function(){a.router.navigate("/add-event")}}})}})}};(function(c){function F(a,b){for(var c in b)a[c]=b[c];return a}function a(a,b){for(var c in b)!1==c in a&&(a[c]=b[c]);return a}
function p(a,b){var c={};if(!b)return F(c,a);for(var d=0,e;e=b[d++];)e in a&&(c[e]=a[e]);return c}function w(){return s(arguments).reduce(F,{})}function z(a,b,c){var d=[],e;for(e in a)d.push(b.call(c,e,a[e]));return d}function M(a){return a}function h(){}function n(a,c){if(b.extProto)for(var d in c)a.prototype[d]=function(a,b){return function(){var b=[this];Array.prototype.push.apply(b,arguments);return c[a].apply(c,b)}}(d,a.name)}function s(a,b){if(null!=a){var c=a.length;if("undefined"==typeof c||
"[object Function]"==A.call(a))return[a];b||(b=0);if(0<c-b){for(var d=[],e=0,f=b;f<c;)d[e++]=a[f++];return d}}return[]}function v(a,b,c){for(var d=[],e="function"==typeof b,f=0;f<a;f++)d[f]=e?b.call(c,f,d):b;return d}var d=c.document,A=Object.prototype.toString,D=function(){function a(b){if(c.test(b)){var d=b.split("."),e=d[0],f=d[1],g=d[2];switch(d.length){case 1:b=function(a){return null!=a?a[e]:a};break;case 2:b=function(a){return null!=a?a[e][f]:a};break;case 3:b=function(a){return null!=a?a[e][f][g]:
a};break;default:b=function(a){if(null!=a){a=a[e][f][g];for(var b=3,c;c=d[b];b++)a=a[c]}return a}}return b}return new Function("object","return object != null ? object."+b+" : object")}var b=1,c=/^[a-z$_][a-z$_0-9]*(\.[a-z$_][a-z$_0-9]*)*$/i,d=[],e={},f={};return function(c,g){var h,k,l;if(!c||c===B)return B;"function"==typeof c?(l=c.basisGetterId_)?h=d[Math.abs(l)-1]:(h=function(a){return c(a)},h.base=c,h.__extend__=D,l=d.push(h),c.basisGetterId_=-l,h.basisGetterId_=l):(h=e[c])?l=h.basisGetterId_:
(h=a(c),h.base=c,h.__extend__=D,l=d.push(h),h.basisGetterId_=l,e[c]=h);k=null!=g&&typeof g;if(!k)return h;var m=f[l],K;if("string"==k)K=k+g;else if("function"==k)K=g.basisModId_;else if("object"!=k)return h;if(K&&m&&m[K])return m[K];"function"==typeof h.base&&(h=h.base);switch(k){case "string":k=function(a){return N.format(g,h(a))};break;case "function":K||(K=k+b++,g.basisModId_=K);k=function(a){return g(h(a))};break;default:k=function(a){return g[h(a)]}}k.base=h.base||h;k.__extend__=D;K&&(m||(m=
{},f[l]=m),m[K]=k,k.mod=g,k.basisGetterId_=d.push(k));return k}}(),B=F(function(){},{__extend__:D}),L=function(){var a={log:h,info:h,warn:h,error:h};"undefined"!=typeof console&&z(a,function(b){a[b]="bind"in Function.prototype&&"function"==typeof console[b]?Function.prototype.bind.call(console[b],console):function(){Function.prototype.apply.call(console[b],console,arguments)}});return a}(),H=c.setImmediate||c.msSetImmediate,S=c.clearImmediate||c.msSetImmediate;H&&(H=H.bind(c));S&&(S=S.bind(c));H||
function(){var a=function(){var a={},b=1;H=function(){a[++b]={fn:arguments[0],args:s(arguments,1)};e(b);return b};S=function(b){delete a[b]};return function(b){var d=a[b];if(d)try{"function"==typeof d.fn?d.fn.apply(void 0,d.args):(c.execScript||function(a){c.eval.call(c,a)})(String(d.fn))}finally{delete a[b]}}}(),b=function(b){setTimeout(function(){a(b)},0)},e=b;if(c.process&&"function"==typeof process.nextTick)e=function(b){process.nextTick(function(){a(b)})};else if(c.MessageChannel)e=function(b){var d=
new c.MessageChannel;d.port1.onmessage=function(){a(b)};d.port2.postMessage("")};else{var f=c.postMessage&&!c.importScripts;if(f){var g=c.onmessage;c.onmessage=function(){f=!1};c.postMessage("","*");c.onmessage=g}f?(g=function(b){b&&b.source==c&&(b=String(b.data).split("basisjs.setImmediate")[1])&&a(b)},c.addEventListener?c.addEventListener("message",g,!0):c.attachEvent("onmessage",g),e=function(a){c.postMessage("basisjs.setImmediate"+a,"*")}):d&&"onreadystatechange"in d.createElement("script")&&
(e=function da(c){"undefined"!=typeof U&&(e=b,U.head.ready(function(){e=function(b){var c=d.createElement("script");c.onreadystatechange=function(){a(b);c.onreadystatechange=null;U.remove(c);c=null};U.head.add(c)}}));e===da?b(c):e(c)})}}();var O="object"==typeof process&&"[object process]"==A.call(process),x=function(){var a="",b,c={};if(O){for(var d="normalize dirname extname basename resolve relative".split(" "),e=0,f;f=d[e];e++)c[f]=function(a,b){return function(){return b[a].apply(b,arguments).replace(/\\/g,
"/")}}(f,require("path"));b=c.resolve(".")+"/"}else{var g=/^([^\/]+:|\/)/,h=/^([a-zA-Z0-9\-]+:)?\/\/[^\/]+/,k=/[\?#].*$/,c={normalize:function(a){var b=[];a=(a||"").replace(h,"").replace(k,"").split("/");for(var c=0;c<a.length;c++)".."==a[c]?b.pop():!a[c]&&c||"."==a[c]||b.push(a[c]);return b.join("/")},dirname:function(a){return c.normalize(a).replace(/\/[^\/]*$/,"")},extname:function(a){return(a=c.normalize(a).match(/\.[^\\\/]*$/))?a[0]:""},basename:function(a,b){var d=c.normalize(a).match(/[^\\\/]*$/),
d=d?d[0]:"";b==c.extname(d)&&(d=d.substring(0,d.length-b.length));return d},resolve:function(a,d){for(var e=s(arguments).reverse(),f=[],h=!1,k=0;!h&&k<e.length;k++)"string"==typeof e[k]&&(f.unshift(e[k]),h=g.test(e[k]));h||f.unshift("/"==b?"":b);return c.normalize(f.join("/"))},relative:function(a,d){"string"!=typeof d&&(d=a,a=b);for(var e=c.normalize(d).split(/\//),f=c.normalize(a).split(/\//),g=0;e[g]==f[g]&&"string"==typeof f[g];)g++;for(var h="",f=f.length-g;0<f;f--)h+="../";return h+e.slice(g).join("/")}};
b=location.pathname.replace(/[^\/]+$/,"");a=location.protocol+"//"+location.host}c.baseURI=b;c.origin=a;return c}(),b={path:{basis:"",app:""},autoload:"0.js"},I=function(){function a(b){return"function"==typeof b&&!!b.basisClassId_}function b(a){for(var c=this;c&&c!==a;)c=c.superClass_;return c===a}function c(h,k){var m=f++;"function"!=typeof h&&(h=l);var n=function(){};n.prototype=h.prototype;for(var n=new n,m={basisClassId_:m,superClass_:h,extendConstructor_:!!h.extendConstructor_,isSubclassOf:b,
subclass:function(){return c.apply(null,[r].concat(s(arguments)))},extend:d,__extend__:function(b){return b&&b!==g&&("object"==typeof b||"function"==typeof b&&!a(b))?l.create.call(null,r,b):b},prototype:n},p=1,q;q=arguments[p];p++)m.extend(q);var r=m.extendConstructor_?function(a){this.basisObjectId=e.id++;var b,c;for(c in a)b=this[c],this[c]=b&&b.__extend__?b.__extend__(a[c]):a[c];this.init();this.postInit()}:function(){this.basisObjectId=e.id++;this.init.apply(this,arguments);this.postInit()};n.constructor=
r;for(var t in n)n[t]===g&&(n[t]=r);F(r,m);return r}function d(b){var c=this.prototype;"function"!=typeof b||a(b)||(b=b(this.superClass_.prototype));b.prototype&&(b=b.prototype);for(var e in b){var f=b[e],g=c[e];"className"==e||"extendConstructor_"==e?this[e]=f:c[e]=g&&g.__extend__?g.__extend__(f):f}k&&b[e="toString"]!==A&&(c[e]=b[e]);return this}var e={id:1},f=1,g={},k=function(){for(var a in{toString:1})return!1;return!0}(),l=F(c,{className:"basis.Class",extendConstructor_:!1,prototype:{basisObjectId:0,
constructor:null,init:function(){},postInit:function(){},destroy:function(){for(var a in this)hasOwnProperty.call(this,a)&&(this[a]=null);this.destroy=h}}}),m=function(a,b,c){return{__extend__:function(a){if(!a||a&&a.__extend__)return a;var c=function(){};c.prototype=this;c=new c;b(c,a);return c}}.__extend__(a||{})},n=function(a){return m(a,F,"extensibleProperty")};return F(l,{SELF:g,create:c,isClass:a,customExtendProperty:m,extensibleProperty:n,nestedExtendProperty:function(a){return m(a,function(a,
b){for(var c in b){var d=a[c];a[c]=d&&d.__extend__?d.__extend__(b[c]):n(b[c])}},"nestedExtendProperty")},oneFunctionProperty:function(a,b){var c=function(b){var d={__extend__:c};if(b){if(b.__extend__)return b;for(var e in b)b[e]&&(d[e]=a)}return d};return c(b||{})}})}(),Q=I(null,{className:"basis.Token",value:null,handler:null,deferredToken:null,bindingBridge:{attach:function(a,b,c){a.attach(b,c)},detach:function(a,b,c){a.detach(b,c)},get:function(a){return a.get()}},init:function(a){this.value=a},
get:function(){return this.value},set:function(a){this.value!==a&&(this.value=a,this.apply())},attach:function(a,b){this.handler={fn:a,context:b,handler:this.handler}},detach:function(a,b){for(var c=this,d;d=c,c=c.handler;)if(c.fn===a&&c.context===b){c.fn=h;d.handler=c.handler;break}},apply:function(){for(var a=this.get(),b=this;b=b.handler;)b.fn.call(b.context,a)},deferred:function(){var a=this.deferredToken;a||(a=this.deferredToken=new aa.DeferredToken(this.value),this.attach(a.set,a));return a},
destroy:function(){this.deferredToken&&(this.deferredToken.destroy(),this.deferredToken=null);this.value=this.handler=null}}),R=function(){function a(){var d=b;b={};c=null;for(var e in d)d[e].apply()}var b={},c;return function(d){d.basisObjectId in b||(b[d.basisObjectId]=d,c||H(a))}}(),r=Q.subclass({className:"basis.DeferredToken",set:function(a){this.value!==a&&(this.value=a,R(this))},deferred:function(){return this}}),k={},q={};(function(){if("undefined"!=typeof la){for(var a in la)q[x.resolve(a)]=
la[a];la=null}})();var G=function(a,b){if(b||!q.hasOwnProperty(a)){var c="";if(O)try{c=require("fs").readFileSync(a,"utf-8")}catch(d){}else{var e=new XMLHttpRequest;e.open("GET",a,!1);e.setRequestHeader("If-Modified-Since",(new Date(0)).toGMTString());e.setRequestHeader("X-Basis-Resource",1);e.send("");200<=e.status&&400>e.status&&(c=e.responseText)}q[a]=c}return q[a]},f=function(a){a=x.resolve(a);if(!k[a]){var b=f.extensions[x.extname(a)],c=!1,d=!1,e,g=function(){if(c)return e;var f=G(a);b?d||(d=
!0,e=b(f,a)):e=f;c=!0;g.apply();return e};F(g,F(new Q,{url:a,fetch:function(){return g()},toString:function(){return"[basis.resource "+a+"]"},update:function(f){f=String(f);if(!c||f!=q[a]){q[a]=f;if(b){if(!d||!b.updatable)return;e=b(f,a)}else e=f;c=!0;g.apply()}},reload:function(){var b=q[a],d=G(a,!0);d!=b&&(c=!1,g.update(d))},get:function(b){return b?G(a):g()},ready:function(a,d){if(c&&(a.call(d,g()),b&&!b.updatable))return;g.attach(a,d);return g}}));k[a]=g}return k[a]},m=p(b.path);F(f,{getFiles:function(){var a=
[],b;for(b in k)a.push(x.relative(b));return a},getSource:function(a){return G(x.resolve(a))},exists:function(a){return!!k.hasOwnProperty(x.resolve(a))},extensions:{".js":function(c,d){var e=C[d];if(!e){var f=!0,e=x.dirname(d)+"/"+x.basename(d,x.extname(d)),g;for(g in b.path){var h=b.path[g]+g+"/";if(d.substr(0,h.length)==h){f=!1;e=e.substr(b.path[g].length);break}}e=e.replace(/\./g,"_").replace(/\//g,".");f&&(e="implicit."+e)}t[e]||(g=$(e),g.exports=W({path:g.path,exports:g.exports},d,c).exports,
g.exports&&g.exports.constructor===Object&&a(g,g.exports));return t[e].exports},".css":F(function(a,b){var c=V.resources[b];c?c.updateCssText(a):c=new V(b);return c},{updatable:!0}),".json":F(function(a,b){if("object"==typeof a)return a;var c;try{a=String(a),c=aa.json.parse(a)}catch(d){}return c||null},{updatable:!0})}});var W=function(a,b,d){var e=x.dirname(b)+"/",g=d;a.exports||(a.exports={});if("function"!=typeof g)try{g=new Function("exports, module, basis, global",'var __filename = "'+b.replace(/\\/g,
"\\\\").replace(/"/g,'\\"')+'";\nvar __dirname = basis.path.dirname(__filename);\nvar resource = function(url){ return basis.resource(__dirname + "/" + url); };\n"use strict";\n\n'+d)}catch(h){return aa.dev.error("Compilation error at "+b+("line"in h?":"+(h.line-4):"")+": "+h),a}g.call(a.exports,a.exports,a,aa,c,b,e,function(a){return f(e+a)});return a},t={},C={};"undefined"!=typeof na&&function(a){for(var b in a){var c=x.resolve(b);C[c]=a[b]}}(na);var u=I(null,{className:"basis.Namespace",init:function(a){this.name=
a;this.exports={path:this.name}},toString:function(){return"[basis.namespace "+this.path+"]"},extend:function(b){F(this.exports,b);return a(this,b)}}),$=function(a){a=a.split(".");var d;d=a[0];var e=t[d];e||(e=t[d]=new u(d),e.namespaces_={},e.namespaces_[d]=e,b.noConflict||(c[d]=e));for(var e=d=e,f=1,g;g=a[f];f++){if(!e[g]){var h=a.slice(0,f+1).join(".");e[g]=new u(h);d.namespaces_[h]=e[g]}e=e[g]}return t[a.join(".")]=e},ba=function(){if(O){var b=x.dirname(module.filename)+"/",c=module.constructor.prototype;
return function(d,e){if(/[^a-z0-9_\.]/i.test(d)&&".js"!=x.extname(d))return d=x.resolve(e,d),require(d);var f=c._compile,g=$(d);c._compile=function(a,b){this.basis=aa;a='var basis = module.basis;\nvar resource = function(filename){ return basis.require(__dirname + "/" + filename) };\n'+a;f.call(F(this,g),a,b)};var h=require(b+d.replace(/\./g,"/"));(g.exports=h)&&h.constructor===Object&&a(g,h);c._compile=f;return h}}return function(a,b){if(/[^a-z0-9_\.]/i.test(a)||".js"==x.extname(a))a=x.resolve(b,
a);else{var c=a,d=c.split(".")[0];a=c.replace(/\./g,"/")+".js";d==c&&(m[d]=m[c]||x.baseURI,C[m[d]+a]=d);a=(m[d]||"")+a}return f(a).fetch()}}();a(Function.prototype,{bind:function(a){var b=this,c=s(arguments,1);return c.length?function(){return b.apply(a,c.concat.apply(c,arguments))}:function(){return b.apply(a,arguments)}}});a(Array,{isArray:function(a){return"[object Array]"===A.call(a)}});a(Array.prototype,{indexOf:function(a,b){b=parseInt(b,10)||0;if(0>b)return-1;for(;b<this.length;b++)if(this[b]===
a)return b;return-1},lastIndexOf:function(a,b){var c=this.length;b=parseInt(b,10);for(b=isNaN(b)||b>=c?c-1:(b+c)%c;0<=b;b--)if(this[b]===a)return b;return-1},forEach:function(a,b){for(var c=0,d=this.length;c<d;c++)c in this&&a.call(b,this[c],c,this)},every:function(a,b){for(var c=0,d=this.length;c<d;c++)if(c in this&&!a.call(b,this[c],c,this))return!1;return!0},some:function(a,b){for(var c=0,d=this.length;c<d;c++)if(c in this&&a.call(b,this[c],c,this))return!0;return!1},filter:function(a,b){for(var c=
[],d=0,e=this.length;d<e;d++)d in this&&a.call(b,this[d],d,this)&&c.push(this[d]);return c},map:function(a,b){for(var c=[],d=0,e=this.length;d<e;d++)d in this&&(c[d]=a.call(b,this[d],d,this));return c},reduce:function(a,b){var c=this.length,d=arguments.length;if(0==c&&1==d)throw 1;var e,f=0;1<d&&(e=b,f=1);for(d=0;d<c;d++)d in this&&(e=f++?a.call(null,e,this[d],d,this):this[d]);return e}});var e={flatten:function(a){return a.concat.apply([],a)},repeat:function(a,b){return e.flatten(v(parseInt(b,10)||
0,a))},search:function(a,b,c,d){a.lastSearchIndex=-1;c=D(c||M);d=parseInt(d,10)||0;for(var e=a.length;d<e;d++)if(c(a[d])===b)return a[a.lastSearchIndex=d]},lastSearch:function(a,b,c,d){a.lastSearchIndex=-1;c=D(c||M);var e=a.length;d=isNaN(d)||null==d?e:parseInt(d,10);for(e=d>e?e:d;0<e--;)if(c(a[e])===b)return a[a.lastSearchIndex=e]},add:function(a,b){return-1==a.indexOf(b)&&!!a.push(b)},remove:function(a,b){var c=a.indexOf(b);return-1!=c&&!!a.splice(c,1)},has:function(a,b){return-1!=a.indexOf(b)},
sortAsObject:function(a,b,c,d){b=D(b);d=d?-1:1;return a.map(function(a,c){return{i:c,v:b(a)}}).sort(c||function(a,b){return d*(a.v>b.v||-(a.v<b.v)||(a.i>b.i?1:-1))}).map(function(b){return a[b.i]},a)}};n(Array,e);if(![1,2].splice(1).length){var g=Array.prototype.splice;Array.prototype.splice=function(){var a=s(arguments);2>a.length&&(a[1]=this.length);return g.apply(this,a)}}var T=/([\/\\\(\)\[\]\?\{\}\|\*\+\-\.\^\$])/g,ca=/\{([a-z\d_]+)(?::([\.0])(\d+)|:(\?))?\}/gi;a(String,{toLowerCase:function(a){return String(a).toLowerCase()},
toUpperCase:function(a){return String(a).toUpperCase()},trim:function(a){return String(a).trim()},trimLeft:function(a){return String(a).trimLeft()},trimRight:function(a){return String(a).trimRight()}});a(String.prototype,{trimLeft:function(){return this.replace(/^\s+/,"")},trimRight:function(){return this.replace(/\s+$/,"")},trim:function(){return this.trimLeft().trimRight()}});var N={toObject:function(a,b){try{return(new Function("return 0,"+a))()}catch(c){if(b)throw 2;}},repeat:function(a,b){return Array(parseInt(b,
10)+1||0).join(a)},qw:function(a){return(a=a.trim())?a.split(/\s+/):[]},forRegExp:function(a){return a.replace(T,"\\$1")},format:function(a,b){var c=s(arguments,1);"object"==typeof b&&F(c,b);return a.replace(ca,function(a,b,d,e,f){a=b in c?c[b]:f?"":a;return d&&!isNaN(a)?(a=Number(a),"."==d?a.toFixed(e):Y.lead(a,e)):a})},capitalize:function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()},camelize:function(a){return a.replace(/-(.)/g,function(a,b){return b.toUpperCase()})},dasherize:function(a){return a.replace(/[A-Z]/g,
function(a){return"-"+a.toLowerCase()})}};n(String,N);if(11!="|||".split(/\|/).length+"|||".split(/(\|)/).length){var y=String.prototype.split;String.prototype.split=function(a,b){if(!a||!1==a instanceof RegExp||""==a.source)return y.apply(this,arguments);var c=[],d=0,e;for(a.global||(a=RegExp(a.source,/\/([mi]*)$/.exec(a)[1]+"g"));e=a.exec(this);)e[0]=this.substring(d,e.index),c.push.apply(c,e),d=a.lastIndex;c.push(this.substr(d));return c}}if("2"!="12".substr(-1)){var E=String.prototype.substr;
String.prototype.substr=function(a,b){return E.call(this,0>a?Math.max(0,this.length+a):a,b)}}var Y={fit:function(a,b,c){return!isNaN(b)&&a<b?Number(b):!isNaN(c)&&a>c?Number(c):a},lead:function(a,b,c){return(a+"").replace(/\d+/,function(a){return 1<(b-=a.length-1)?Array(b).join(c||0)+a:a})},group:function(a,b,c){return(a+"").replace(/\d+/,function(a){return a.replace(/\d/g,function(d,e){return!e+(a.length-e)%(b||3)?d:(c||" ")+d})})},format:function(a,b,c,d,e,f){a=a.toFixed(b);if(c||f)a=a.replace(/(\d+)(\.?)/,
function(a,b,d){return(c?Number(b).group(3,c):b)+(d?f||d:"")});d&&(a=a.replace(/^-?/,"$&"+(d||"")));return a+(e||"")}};n(Number,Y);a(Date,{now:function(){return+new Date}});var fa=function(){function a(){if("complete"==d.readyState&&d.body&&!e++)for(;f;)f.callback.call(f.context),f=f.next}function b(){try{d.documentElement.doScroll("left"),a()}catch(c){setTimeout(b,1)}}var e=!d||"complete"==d.readyState&&!!d.body,f;if(!e)if(d.addEventListener)d.addEventListener("DOMContentLoaded",a,!1),c.addEventListener("load",
a,!1);else{d.attachEvent("onreadystatechange",a);c.attachEvent("onload",a);try{!c.frameElement&&d.documentElement.doScroll&&b()}catch(g){}}return function(a,b){e?a.call(b):f={callback:a,context:b,next:f}}}(),U=function(){function a(b){if(d&&!h[b]&&(h[b]=d[b]||d.getElementsByTagName(b)[0],h[b])){var c=k[b];delete k[b];for(var e=0,f;f=c[e];e++)f[0].call(f[1],h[b])}return h[b]}function b(){var d=this[0],e=this[1],f=this[2];c(e);var g=a(d);g?(!0===f&&(f=g.firstChild),f&&f.parentNode===g||(f=null),g.insertBefore(e,
f)):k[d].push([b,[d,e,f]])}function c(a){for(var b in k){var d=e.search(k[b],a,function(a){return a[1]&&a[1][1]});d&&e.remove(k[b],d)}a&&a.parentNode&&1==a.parentNode.nodeType&&a.parentNode.removeChild(a)}function f(){a("head")&&a("body")&&clearInterval(g)}var g,h={},k={head:[],body:[]};d&&(g=setInterval(f,5),fa(f));return{head:{ready:function(a,b){k.head?k.head.push([a,b]):a.call(b)},add:function(a,c){b.call(["head",a,c])}},body:{ready:function(a,b){k.body?k.body.push([a,b]):a.call(b)},add:function(a,
c){b.call(["body",a,c])}},remove:c}}(),l=function(){function a(c){d.globalDestroy=!0;d.add=h;for(d.remove=h;c=b.pop();)if("function"==typeof c.destroy)try{c.destroy()}catch(e){}else for(var f in c)c[f]=null;b.length=0}var b=[];if("attachEvent"in c)c.attachEvent("onunload",a);else if("addEventListener"in c)c.addEventListener("unload",a,!1);else return{add:h,remove:h};var d={add:function(a){null!=a&&b.push(a)},remove:function(a){e.remove(b,a)}};return d}(),V=function(){function a(b){m.setAttribute("href",
b);U.head.add(m,!0)}function b(){m.setAttribute("href",location.href);U.remove(m)}function c(){a(this.baseURI);this.element||(this.element=d.createElement("style"),h||(this.textNode=this.element.appendChild(d.createTextNode(""))));U.head.add(this.element);this.syncCssText();b()}var e={},g=!0,h;try{h=!d.createElement("style").appendChild(d.createTextNode(""))}catch(k){h=!0}l.add({destroy:function(){g=!1;for(var a in e)e[a].destroy();e=null}});var m=d&&d.createElement("base"),n=I(null,{className:"basis.CssResource",
inUse:0,url:"",baseURI:"",cssText:"",resource:null,element:null,textNode:null,init:function(a){this.url=x.resolve(a);this.baseURI=x.dirname(a)+"/";e[a]=this},updateCssText:function(c){this.cssText!=c&&(this.cssText=c,this.inUse&&this.element&&(a(this.baseURI),this.syncCssText(),b()))},syncCssText:function(){this.textNode?this.textNode.nodeValue=this.cssText:this.element.styleSheet.cssText=this.cssText},startUse:function(){if(!this.inUse){if(!this.resource){var a=f(this.url);this.resource=a;this.cssText=
a.get(!0)}U.head.ready(c,this)}this.inUse+=1},stopUse:function(){this.inUse&&(this.inUse-=1,!this.inUse&&this.element&&U.remove(this.element))},destroy:function(){this.element&&g&&U.remove(this.element);this.cssText=this.resource=this.textNode=this.element=null}});n.resources=e;return n}(),aa=$("basis").extend({version:"1.0.0-rc3",NODE_ENV:O,config:b,platformFeature:{},path:x,namespace:$,require:ba,resource:f,asset:function(a){return a},getter:D,ready:fa,setImmediate:H,clearImmediate:S,nextTick:function(){H.apply(null,
arguments)},Class:I,Token:Q,DeferredToken:r,cleaner:l,console:L,doc:U,object:{extend:F,complete:a,keys:function(a){var b=[],c;for(c in a)b.push(c);return b},values:function(a){var b=[],c;for(c in a)b.push(a[c]);return b},slice:p,splice:function(a,b){var c={};if(!b)return F(c,a);for(var d=0,e;e=b[d++];)e in a&&(c[e]=a[e],delete a[e]);return c},merge:w,iterate:z},fn:{$undefined:function(a){return void 0==a},$defined:function(a){return void 0!=a},$isNull:function(a){return null==a||void 0==a},$isNotNull:function(a){return null!=
a&&void 0!=a},$isSame:function(a){return a===this},$isNotSame:function(a){return a!==this},$self:M,$const:function(a){return function(){return a}},$false:function(){return!1},$true:function(){return!0},$null:function(){return null},$undef:h,getter:D,nullGetter:B,wrapper:function(a){return function(b){var c={};c[a]=b;return c}},lazyInit:function(a,b){var c=0,d,e;return d=function(){c++||(d.inited=!0,d.data=e=a.apply(b||this,arguments));return e}},lazyInitAndRun:function(a,b,c){var d=0,e,f;return e=
function(){d++||(e.inited=!0,e.data=f=a.call(c||this));b.apply(f,arguments);return f}},runOnce:function(a,b){var c=0;return function(){if(!c++)return a.apply(b||this,arguments)}}},array:F(s,w(e,{from:s,create:v})),string:w(N,{isEmpty:function(a){return null==a||""==String(a)},isNotEmpty:function(a){return null!=a&&""!=String(a)}}),number:Y,bool:{invert:function(a){return!a}},json:{parse:"undefined"!=typeof JSON?JSON.parse:N.toObject}});$("basis.dev").extend(L);b.autoload&&ba(b.autoload)})(this)}).call(this)